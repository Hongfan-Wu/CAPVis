<html>
<head>

    <!-- Ignore Favicon -> Solved the warning in console of the browser. -->
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">

    <title>CAPVis</title>
    <!-- Three.js and Lodash libraries-->
    <script  src="https://cdn.jsdelivr.net/npm/echarts@5.0.2/dist/echarts.min.js"></script>
    <script  src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
    <script src="{{url_for('static', filename='modules/three.js-r101/three.js')}}"></script>
    <script src="{{url_for('static', filename='modules/lodash/lodash.js')}}"></script>

    <!-- Importing D3 minified versions v3 and v5. -->
    <script src="{{url_for('static', filename='modules/d3v3/d3.min.js')}}"></script>
    <script src="{{url_for('static', filename='modules/d3/d3.min.js')}}"></script>

    <!-- Importing additional modules such as PCP, annotator, tip, legend, lasso, papaParse, and Jquery. -->
    <script src="{{url_for('static', filename='modules/d3-annotations/d3-annotator.js')}}"></script>
    <script src="{{url_for('static', filename='modules/d3-tip/tip.js')}}"></script>
    <script src="{{url_for('static', filename='modules/d3-legend/d3-legend.min.js')}}"></script>
    <script src="{{url_for('static', filename='modules/d3-lasso/lasso.js')}}"></script>
    <script src="{{url_for('static', filename='modules/plotly/plotly_min.js')}}"></script>
    <script src="{{url_for('static', filename='modules/pcp/d3v3.parcoords.js')}}"></script>

    <script src="{{url_for('static', filename='modules/papa/papaparse.min.js')}}"></script>
    <script src="{{url_for('static', filename='modules/jquery/jquery.min.js')}}"></script>

    <!-- Basic scripts that we execute. -->
    <script src="{{url_for('static', filename='js/data_form_handler.js')}}"></script>
    <script src="{{url_for('static', filename='modules/pca/pca.js')}}"></script>

    <!-- CSS - Styling -->
    <link rel="stylesheet" href="../static/css/w3.css">
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}"/>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/d3.parcoords.css">
    <link rel="stylesheet" href="../static/css/reset.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.0/css/all.css" integrity="sha384-Mmxa0mLqhmOeaE8vgOSbKacftZcsNYDjQzuCOm6D02luYSzBG8vpaOykv9lFQ51Y" crossorigin="anonymous">
    <!-- Bootstrap -->

    <script src="{{url_for('static', filename='modules/popper/popper.min.js')}}"></script>
    <script src="{{url_for('static', filename='modules/bootstrap/bootstrap.min.js')}}"></script>
    <style type="text/css">

        #bbb td{border:1px solid #D3D3D3;font-size: 14.5px;word-wrap:break-word;word-break:break-all;}
        #mwdata th{border:1px solid #D3D3D3;font-size: 16px;text-align: center}
        #tdData1 td{text-align: center}
        #bbb{
            width: 400px;
            height: 200px;
        }
        .inputNum {
            vertical-align: middle;
            height: 22px;
            border: 1px solid #d0d0d0;
            text-align: center;
        }

        .btnn {
            display: inline-block;
            vertical-align: middle;
            background: #f0f0f0 no-repeat center;
            border: 1px solid #d0d0d0;
            width: 24px;
            height: 24px;
            border-radius: 2px;
            box-shadow: 0 1px rgba(100, 100, 100, .1);
            color: #666;
            transition: color .2s, background-color .2s;
        }

        .btnn:active {
            color: #666;
            /*box-shadow: inset 0 1px rgba(100, 100, 100, .1);*/
        }

        /*.btnn:hover {*/
        /*    background-color: #e9e9e9;*/
        /*    color: #333;*/
        /*}*/

        .btn_plus {
            background-image: linear-gradient(to top, currentColor, currentColor), linear-gradient(to top, currentColor, currentColor);
            background-size: 10px 2px, 2px 10px;
        }

        .btn_minus {
            background-image: linear-gradient(to top, currentColor, currentColor);
            background-size: 10px 2px;
        }
        .disabled{
            opacity:0.3;
            cursor:not-allowed;
            pointer-events:none;
        }
        .slider {
            pointer-events: none;
            margin: 0px;
            /*width:200px;*/

            cursor: pointer;
            padding-left: 30%;
            /*height:6px;*/

            padding-right: 30%;
            background-color: #17694f;
            box-sizing: border-box;
        }
        .slider.focusable {
            border: 1px solid #222;
        }
        .thumb {
            cursor: pointer;
            border-color: white;
            /*border-width:4px; width:16px; height:16px;*/
            margin-top: 23px;
            /*margin-left: 18px;*/
            padding-left: 20px;
            border-style: solid;
            background-color: #0f4534;
            background-color: #646464;
            border-radius: 50%;
            /*top:-6px;left:50px;*/

            position: absolute;
        }
        .track {
            pointer-events: none;
            height: 100%;
            /*margin-left: -10px;*/
            background-color: #4ac4ac;
        }
        .container {
            position: relative;
            /*margin: 2px auto;*/
            height: 30px;
            width: 100px;
            margin-left: -10px;
            margin-top: -10px;
        }
        .output {
            pointer-events: none;
            margin: 0;
            width: 10px;
            height: 10px;
            line-height: 30px;
            border-radius: 50% 50% 0 50%;
            background-color: white;
            text-align: center;
            -webkit-transform: rotate(45deg);
            -moz-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
            position: absolute;
            /*left:45px*/

            top: -45px;
        }
        .output p {
            -webkit-user-select:none;
            -moz-user-select:none;
            -ms-user-select:none;
            user-select:none;
            pointer-events: none;
            font-size: 5px;
            color: #0a1a17;
            text-align: center;
            -webkit-transform: rotate(-45deg);
            -moz-transform: rotate(-45deg);
            -ms-transform: rotate(-45deg);
            transform: rotate(-45deg);
        }
    </style>
</head>

<body>
<div class="w3-container">

    <div id="myModal" class="w3-modal">
        <div class="w3-modal-content w3-card-4 w3-animate-zoom">
            <header class="w3-container w3-blue">
                <h2 title="Tip: t-SNE grid search with 25 most diverse projections extracted from 500 generated embeddings (using Procrustes distance). " style="display:inline-block; font-size: 16px; margin-top: 15px; margin-left: 10px; margin-bottom:15px">t-SNE Grid Search</h3>
                    [Sorting:
                    <select id="param-SortMOver-view" name="param-SortMOver-view" style="color: black" onchange="ReSortOver()">
                        <option value="1" selected>Quality Metrics Average (QMA)</option>
                        <option value="2">Neighborhood Hit (NH)</option>
                        <option value="3">Trustworthiness (T)</option>
                        <option value="4">Continuity (C)</option>
                        <option value="5">Stress (S)</option>
                        <option value="6">Shepard Diagram Correlation (SDC)</option>
                    </select>
                    ]
            </header>
            <div id="loader"></div>
            <div id="gridVisual"></div>
            <div class="w3-container w3-light-grey w3-padding">
                <button id="confirmModal" class="w3-button w3-left w3-white w3-border" style="margin-top: -3px; margin-bottom: -3px" onclick="ReSort(true)" disabled>Confirm</button>
                <button id="closeModal" class="w3-button w3-right w3-white w3-border" style="margin-top: -3px; margin-bottom: -3px" onclick="closeModalFun()">Close</button>
            </div>
        </div>
    </div>

</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-3">
            <div class="panel panel-default" id="left-side-param">
                <div class="panel-heading">
                    <h2 class="panel-title" style="display:inline-block" data-toggle="tooltip" data-placement="right" title="Tip: a panel for controlling the cluster algorithm and its parameters.">Cluster Parameter</h2>
<!--                    [M:-->
<!--                    <select id="param-EX-view" name="param-EX-view" data-toggle="tooltip" data-placement="right" title="Tip: the option of changing between grid search (generating 500 projections) and a single set of parameters (1 projection)." onchange="ExecuteMode()">-->
<!--                        <option value="1" selected>Grid Search</option>-->
<!--                        <option value="2">Single Set</option>-->
<!--                    </select>-->
<!--                    ]-->
                    <div id="cost" title="Tip: the overall cost reduced by each iteration step of the t-SNE algorithm." style="display:inline-block; margin-top:3px; float:right"></div>
                </div>
                <div class="panel-body">
                    <table class="table table-borderless paramTable" style="border-collapse: separate ;border-spacing: 10px">
                        <tbody>
                        <tr>
                            <td scope="row"><label id="data" for="param-dataset" data-toggle="tooltip" data-placement="right">Data sets</label></td>
                            <td>
                                <select id="param-dataset" name="param-dataset" onchange="table_history_model();" style="font-size: 15px; border-radius: 5px;width: 250px" >
                                    <option value="359-364.csv" selected>359-364.csv</option>
                                    <option value="331-352.csv" >331-352.csv</option>
                                    <option value="359-364.csv" >359-364.csv</option>
                                    <option value="376-399.csv" >376-399.csv</option>
                                    <option value="392-416.csv" >392-416.csv</option>
                                    <option value="442-469.csv" >442-469.csv</option>
                                    <option value="481-512.csv" >481-512.csv</option>
                                    <option value="500-531.csv" >500-531.csv</option>
                                    <option value="524-557.csv" >524-557.csv</option>
                                    <option value="561-596.csv" >561-596.csv</option>
                                    <option value="568-604.csv" >568-604.csv</option>
<!--                                    <option value="breast-cancer-wisconsin.csv">Breast Cancer</option>-->
<!--                                    <option value="iris.csv">Iris</option>-->
<!--                                    <option value="SPECTF.csv">SPECTF</option>-->
<!--                                    <option value="blobs.csv">Gaussian Clusters</option>-->
                                    <option value="empty">Upload File</option>
                                </select>
                            </td>
<!--                            <td><button type="button" class="button" id="FactRes" onclick="FactoryReset()" data-toggle="tooltip" data-placement="right" title="Tip: Restart the entire web page/application.">Factory reset</button></td>-->
                        </tr>
                        <tr>
                            <td scope="row"><label id="data2" for="param-position" data-toggle="tooltip" data-placement="right">Spatial location</label></td>
                            <td scope="row" colspan="2">
                                <select id="param-position" name="param-position" style="font-size: 15px; border-radius: 5px;width: 250px" onchange="table_history_model()">
                                    <option value="高温过热器出口段横向" selected>High temperature superheater</option>
                                    <option value="低温过热器上部屏出口段后墙横向">Low superheater(Upper screen)</option>
                                    <option value="低温过热器下部屏出口段后墙横向">Low superheater(Lower screen)</option>
                                    <option value="后墙隔墙出口段">Rear wall</option>
                                    <option value="水冷壁左侧墙垂直">Vertical water wall(Left)</option>
                                    <option value="水冷壁右侧墙垂直">Vertical water wall(Right)</option>
                                    <option value="水冷壁前墙垂直">Vertical water wall(Front)</option>
                                    <option value="水冷壁后墙垂直">Vertical water wall(Rear)</option>
                                    <option value="水冷壁左侧墙螺旋">Spiral water wall(Left)</option>
                                    <option value="水冷壁右侧墙螺旋">Spiral water wall(Right)</option>
                                    <option value="水冷壁前墙螺旋">Spiral water wall(Front)</option>
                                    <option value="水冷壁后墙螺旋">Spiral water wall(Rear)</option>
<!--                                    <option value="blobs.csv">Gaussian Clusters</option>-->
<!--                                    <option value="empty">Upload File</option>-->
                                </select>
                            </td>
<!--                            <td><button type="button" class="button" id="FactRes2" onclick="FactoryReset()" data-toggle="tooltip" data-placement="right" title="Tip: Restart the entire web page/application.">Factory reset</button></td>-->
                        </tr>
                        <tr>
                            <td scope="row"><label for="param-n_cluster_max" data-toggle="tooltip" data-placement="right">n_cluster_max</label></td>
                            <td><input id="param-n_cluster_max" type="range" min="2" max="30" value="10", step="1" ></td>
                            <td><output for="param-n_cluster_max" id="param-n_cluster_max-value">10</output></td>
                        </tr>
                        <tr>
                            <td scope="row"><label for="param-n_cluster_min" data-toggle="tooltip" data-placement="right">n_cluster_min</label></td>
                            <td><input id="param-n_cluster_min" type="range" min="2" max="30" value="2", step="1"></td>
                            <td><output for="param-n_cluster_min" id="param-n_cluster_min-value">2</output></td>
                        </tr>
<!--                        s-->
<!--                        <tr style="margin-top: -4px !important;">-->
<!--                            <td scope="row" colspan="3" >-->
<!--&lt;!&ndash;                                <div id="hider2" title="Tip: wait for line chart to load (overall cost vs. iteration)."></div>&ndash;&gt;-->
<!--                                <div id="container1"></div>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr >-->
<!--                            <td scope="row" style="padding-top: 0.8vh !important">-->
<!--                                <input id="file-input" type="file" name="name" style="display: none;"/>-->
<!--                                <button type="button" class="button" onclick='loadAnalysis();' data-toggle="tooltip" data-placement="right" >Excute cluster</button>-->
<!--                            </td>-->
<!--                            <td style="padding-top: 0.8vh !important"><label data-toggle="tooltip" data-placement="right" title="Tip: if you store distances the file size will be larger but on a loading of this execution it will be processed much quicker than without this option enabled.">-->
<!--                                <input id="downloadDists" checked type="checkbox" >-->
<!--                                Cache distances-->
<!--                            </label>-->
<!--                            </td>-->
<!--                            <td style="padding-top: 0.8vh !important">-->
<!--                                <button type="button" class="button" onclick="SaveAnalysis()" data-toggle="tooltip" data-placement="right" title="Tip: save/store previously executed analysis in .txt format.">Store exec.</button>-->
<!--                            </td>-->
<!--                        </tr>-->
                        <tr>
                            <td scope="row" colspan="3"><button id="ExecuteBut" class="btn btn-primary btn-block" onclick="cluster_analysis();"  value="Execute cluster analysis">Execute cluster analysis</button></td>
<!--                            <td><div id="load_note" style="float:left;width: 200px;display:none;margin-left: 10px;padding-top: 6px">训练中...</div></td>-->
                        </tr>
<!--                        <tr>-->
<!--                            <td scope="row" colspan="3"><div id="load_note" style="float:left;width: 200px;display:none;margin-left: 10px;padding-top: 6px">训练中...</div></td>-->
<!--                        </tr>-->
<!--                        <tr style="margin-top: -4px !important;">-->
<!--                            <td scope="row" colspan="3" >-->
<!--                                &lt;!&ndash;                                <div id="hider2" title="Tip: wait for line chart to load (overall cost vs. iteration)."></div>&ndash;&gt;-->
<!--                                <div id="container1" style="display: none;height: 200px;width: 400px"></div>-->
<!--                            </td>-->
<!--                        </tr>-->
                        </tbody>
                    </table>
                    <div id="load_note" style="float:left;width: 200px;display:none;margin-left: 10px;padding-top: 6px">计算中...</div>
<!--                    <div id="container1" style="display: none;height: 200px;width: 400px"></div>-->
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="panel panel-default med-bottomProv" style="margin-bottom:+1.4vh">
                <div class="panel-heading">
                    <h2 class="panel-title" style="display:inline-block"  data-toggle="tooltip" data-placement="right" >Associasion View</h2>
<!--                    <div id="textToChange" style="display:inline-block">[Sorting:</div>-->
<!--                    <select id="param-SortM-view" name="param-SortM-view" onchange="ReSort(false)">-->
<!--                        <option value="1" selected>Quality Metrics Average (QMA)</option>-->
<!--                        <option value="2">Neighborhood Hit (NH)</option>-->
<!--                        <option value="3">Trustworthiness (T)</option>-->
<!--                        <option value="4">Continuity (C)</option>-->
<!--                        <option value="5">Stress (S)</option>-->
<!--                        <option value="6">Shepard Diagram Correlation (SDC)</option>-->
<!--                    </select>-->
<!--                    ]-->
<!--                    <div style="display:inline-block; float:right">-->
<!--                        <button type="button" class="buttonOptimize" onclick='StartCOCluster3();' style="padding: 5px 5px 5px 5px" data-toggle="tooltip" data-placement="right">Exploration</button>-->
<!--                    </div>-->
                    <div style="display:inline-block; float:right">
                        <button type="button" class="buttonOptimize" onclick='StartCOCluster4();' style="padding: 5px 5px 5px 5px" data-toggle="tooltip" data-placement="right">View</button>
<!--                        <button type="button" class="buttonOptimize" onclick='StartCOCluster2();' style="padding: 5px 5px 5px 5px" data-toggle="tooltip" data-placement="right">View</button>-->
                    </div>
                    <div style="display:inline-block;">
                        <button type="button" class="buttonOptimize" onclick='FileVis();' style="padding: 5px 5px 5px 5px" data-toggle="tooltip" data-placement="left">Time Series</button>
                    </div>
                    <div style="display:inline-block;">
                        <button type="button" class="buttonOptimize" onclick='BatchMse();' style="padding: 5px 5px 5px 5px" data-toggle="tooltip" data-placement="left">Correlation View</button>
                    </div>
                </div>
                <div class="panel-body">
<!--                    <div id="container7_8" style="height: 100%;width: 1000px;margin-top:1px;margin-left: -10px;position: absolute"></div>-->
                    <div id="container7" style="height: 70%;width: 480px;margin-top:1px;margin-left: 10px;position: absolute"></div>
                    <div id="container8" style="height: 70%;width: 500px;margin-top:1px;margin-left: 502px;position: absolute"></div>
                    <div id="container9" style="height: 20px;width: 405px;margin-top:180px;background:rgba(0,168,255,0.2);margin-left: 39px;position: absolute"></div>
                    <div id="container10" style="height: 20px;width: 400px;;margin-top:180px;background:rgba(0,168,255,0.2);margin-left: 540px;position: absolute"></div>
                    <div id="container11" style="height: 80%;width: 500px;margin-top:1px;margin-left: 10px;position: absolute"></div>
                    <div id="container12" style="height: 80%;width: 450px;margin-top:1px;margin-left: 500px;position: absolute"></div>
<!--                    <div id="ProjectionsVisual"></div>-->
                </div>
            </div>
<!--            <div class="panel panel-default med-bottom-neigh">-->
<!--                <div class="panel-heading">-->
<!--                    <h2 class="panel-title" style="display:inline-block"  data-toggle="tooltip" data-placement="right">Free Exploration</h2>-->
<!--&lt;!&ndash;                    [Visualization:&ndash;&gt;-->
<!--&lt;!&ndash;                    <select id="param-NB-view" name="param-NB-view" onchange="LineBar()">&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="1" selected>Bar Chart</option>&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="2">Difference Bar Chart</option>&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="3">Line Plot</option>&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="4">Difference Line Plot</option>&ndash;&gt;-->
<!--&lt;!&ndash;                    </select>&ndash;&gt;-->
<!--&lt;!&ndash;                    ]&ndash;&gt;-->
<!--&lt;!&ndash;                    <div id="knnBarChartDetails"style="display:inline-block; float:right">&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->
<!--                </div>-->
<!--                <div class="panel-body">-->
<!--                    <div id="knnBarChart"></div>-->
<!--                    <div id="hider"></div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <svg id="SvgAnnotator"></svg>-->
<!--            <svg id="modtSNEcanvas_svg"></svg>-->
<!--            <svg id="modtSNEcanvas_svg_Schema"></svg>-->
            <div id="modtSNEDiv">
                <div id = "modtSNEcanvas" >
                    <div id="sa" style="display: none">
                        <div id="left_sa" style="z-index:11;margin-left:320px;margin-top: 70px;display: block;position: absolute">
                            <a onclick="sub1(this)" href="javascript:" style="color: #333" class="btnn btn_minus disabled" role="button" title="减少"></a>
                            <input disabled="disabled" id="num1" class="inputNum" value="1" size="1">
                            <a onclick="add1(this)" href="javascript:" style="color: #333" class="btnn btn_plus" role="button" title="增加"></a>
                        </div>
                        <div id="right_sa" style="z-index:11;margin-left:547px;margin-top: 70px;display: block;position: absolute">
                            <a onclick="sub2(this)" href="javascript:" style="color: #333" class="btnn btn_minus" role="button" title="减少"></a>
                            <input disabled="disabled" id="num2" class="inputNum" value="2" size="2">
                            <a onclick="add2(this)" href="javascript:" style="color: #333" class="btnn btn_plus" role="button" title="增加"></a>
                        </div>
                    </div>
                    <div id="Cluster_right" style="z-index:7;height: 100%;margin-left: 760px;width: 200px;position: absolute"></div>
                    <div id="Cluster_left" style="z-index:7;margin-left: 20px;height: 100%;width: 200px;position: absolute"></div>
                    <div id="xgxtu" style="display:none;border-radius: 10px;border: 2px solid #d1b38a;z-index:10;margin-top:0px;margin-left:380px;height:82px;width: 212px;position: absolute "></div>
                    <div id="tuli" style="display:none;z-index:10;margin-top:0px;margin-left:80px;height:50px;width: 800px;position: absolute "></div>
<!--                    <div id="touy" style="display:none;border-radius: 10px;border: 2px solid #d1b38a;z-index:10;margin-top:20px;margin-left:322px;height:150px;width: 300px;position: absolute "></div>-->
                    <div id="linkss" style="z-index:9;margin-left:330px;height:100%;width: 235px;position: absolute ">
                        <div style="margin-left: -50px;margin-top: 130px;height: 700px;width: 100px;" id='link1'></div>
<!--                        <div style="margin-left: -50px;margin-top: 140px;height: 700px;width: 100px;' id='link2'"></div>-->
                    </div>
                    <div id="linkss1" style="z-index:9;margin-left:219px;height:100%;width: 141px;position: absolute "></div>
                    <div id="linkss2" style="z-index:9;margin-left:510px;height:100%;width: 135px;position: absolute "></div>
                    <div id="linkss3" style="z-index:9;margin-left:370px;height:100%;width: 210px;position: absolute "></div>
                    <div id="linkss4" style="z-index:9;margin-left:610px;height:100%;width: 153px;position: absolute "></div>
                    <div id="b" style="display: none">
                        <div id="showall" onclick="ShowAll()" style="z-index:10;margin-left:30px;height:50px;width: 60px;position: absolute "></div>
                        <div id="show1" onclick="ShowFile1()" style="z-index:10;margin-top:48px;margin-left:90px;height:50px;width: 40px;position: absolute "></div>
                        <div id="b1" style="z-index:0;border-radius: 10px;border: 2px solid #d1b38a;margin-top:48px;margin-left:90px;height:50px;width: 130px;position: absolute "></div>
                        <div id="show2" onclick="ShowFile2()" style="z-index:10;margin-top:103px;margin-left:60px;height:50px;width: 40px;position: absolute "></div>
                        <div id="b2" style="z-index:0;border-radius: 10px;border: 2px solid #d1b38a;margin-top:103px;margin-left:60px;height:50px;width: 160px;position: absolute "></div>
                        <div id="b3" style="z-index:0;border-radius: 10px;border: 2px solid #d1b38a;margin-top:158px;margin-left:40px;height:106px;width: 180px;position: absolute "></div>

                        <div id="show3" onclick="ShowFile3()" style="z-index:10;margin-top:148px;margin-left:40px;height: 60px;width: 40px;position: absolute;"></div>

                        <div style="z-index:0;margin-top:209px;margin-left:42px;width: 175px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>

                        <div id="show4" onclick="ShowFile4()" style="z-index:10;margin-top:210px;margin-left:40px;height: 60px;width: 40px;position: absolute;"></div>
                        <div id="b4" style="z-index:0;border-radius: 10px;border: 2px solid #d1b38a;margin-top:270px;margin-left:45px;height:244px;width: 175px;position: absolute "></div>


                        <div id="show5" onclick="ShowFile5()" style="z-index:10;margin-top:260px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>
                        <div style="z-index:0;margin-top:320px;margin-left:47px;width: 170px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>

                        <div id="show6" onclick="ShowFile6()" style="z-index:10;margin-top:325px;margin-left:45px;height: 80px;width: 40px;position: absolute;"></div>
                        <div style="z-index:0;margin-top:405px;margin-left:47px;width: 170px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>

                        <div id="show7" onclick="ShowFile7()" style="z-index:10;margin-top:400px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>
                        <div style="z-index:0;margin-top:460px;margin-left:47px;width: 170px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>

                        <div id="show8" onclick="ShowFile8()" style="z-index:10;margin-top:460px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>
                        <div id="b5" style="z-index:0;border-radius: 10px;border: 2px solid #d1b38a;margin-top:518px;margin-left:45px;height:215px;width: 175px;position: absolute "></div>

                        <div id="show9" onclick="ShowFile9()" style="z-index:10;margin-top:510px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>
                        <div id="show10" onclick="ShowFile10()" style="z-index:10;margin-top:565px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>
                        <div id="show11" onclick="ShowFile11()" style="z-index:10;margin-top:625px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>
                        <div id="show12" onclick="ShowFile12()" style="z-index:10;margin-top:670px;margin-left:45px;height: 60px;width: 40px;position: absolute;"></div>

                        <div style="z-index:0;margin-top:570px;margin-left:47px;width: 170px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>
                        <div style="z-index:0;margin-top:625px;margin-left:47px;width: 170px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>
                        <div style="z-index:0;margin-top:680px;margin-left:47px;width: 170px;position: absolute; border-bottom: 2px dashed #009BA4;"></div>
                    </div>
                    <div id="a">
                        <div id="a1" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:100px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a2" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:180px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a3" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:260px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a4" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:340px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a5" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:420px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a6" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:500px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a7" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:580px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                        <div id="a8" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:660px;margin-left:380px;height:75px;width: 210px;position: absolute "></div>
                    </div>
<!--                    <div id="bb">-->
<!--                        <div id="bb1" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:260px;margin-left:370px;height:75px;width: 210px;position: absolute "></div>-->
<!--                        <div id="bb2" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:340px;margin-left:370px;height:75px;width: 210px;position: absolute "></div>-->
<!--                        <div id="bb3" style="z-index:10;border-radius: 10px;border: 2px solid #d1b38a;margin-top:420px;margin-left:370px;height:75px;width: 210px;position: absolute "></div>-->
<!--                    </div>-->
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title" data-toggle="tooltip" data-placement="right" >Visual Parameter</h2>
                </div>
                <div class="panel-body" id="commBtn">
                    <table class="table table-borderless" style="border-collapse: separate ;border-spacing: 10px">
                        <tbody>
                        <tr>
<!--                            <td scope="row" colspan="3"><label for="male" data-toggle="tooltip" data-placement="right">Algorithm Selection &nbsp;</label>-->
<!--                                <select id="param-Algorithm" name ="param-Algorithm">-->
<!--                                    <option selected="selected" value="Single analysis">Single analysis</option>-->
<!--                                    <option value="Comparative analysis">Comparative analysis</option>-->
<!--                                </select>-->
<!--                            </td>-->
<!--                            <td rowspan="3"><svg id="legend4"></svg></td>-->
<!--                            <td></td>-->
<!--                            <td rowspan="5"><svg id="legend1"></svg></td>-->
                        <tr>
                            <td scope="row" colspan="3"><label for="male" data-toggle="tooltip" data-placement="right">Style Selection &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                <select id="param-style" name ="param-style" onchange="StartCOCluster4()">
                                    <!--                                    "Rel_Change(this.options[this.options.selectedIndex].value)"-->
                                    <option selected="selected" value="1">Scatter chart</option>
                                    <option value="2">Line chart</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td scope="row" colspan="3"><label for="male" data-toggle="tooltip" data-placement="right">Contrast selection&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                <select id="param-duibi" style="width: 150px" name ="param-Relevance" onchange="StartCOCluster5()">
                                    <!--                                    "Rel_Change(this.options[this.options.selectedIndex].value)"-->
                                    <option selected=true value="1">Single contrast</option>
                                    <option  value="2">Multiple comparisons</option>
                                </select>

<!--                                <input type="button"  id="qiehuan" onclick="qiehuan()" value="状态切换">-->
                                <!--                                <input type="button" id="button2" onclick="plusUV()" value="+">-->
                            </td>
                        </tr>
                        <tr>
                            <td scope="row" colspan="3"><label for="male" data-toggle="tooltip" data-placement="right">Relevance Selection&nbsp;</label>
                                <select id="param-Relevance" name ="param-Relevance" onchange="StartCOCluster4()">
<!--                                    "Rel_Change(this.options[this.options.selectedIndex].value)"-->
                                    <option selected="selected" value="1">Canonical cross-loadings</option>
                                    <option value="2">Canonical loadings</option>
                                    <option value="3">Canonical weights</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td scope="row"><label for="param-size" data-toggle="tooltip" data-placement="right">Sample size</label></td>
                            <td ><input id="param-size"  type="range" min="50" max="1000" value="200", step="50" ></td>
                            <td><output for="param-size" id="param-size-value">200</output></td>
                        </tr>
<!--                        <tr>-->
<!--                            <td scope="row"><label for="param-maxthreshold" data-toggle="tooltip" data-placement="right">Maximum Threshold</label></td>-->
<!--                            <td ><input id="param-maxthreshold"  type="range" min="0" max="1" value="1", step="0.01" ></td>-->
<!--                            <td><output for="param-maxthreshold" id="param-maxthreshold-value">1</output></td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td scope="row"><label for="param-minthreshold" data-toggle="tooltip" data-placement="right">Minimum Threshold</label></td>-->
<!--                            <td ><input id="param-minthreshold"  type="range" min="0" max="1" value="-1", step="0.01" ></td>-->
<!--                            <td><output for="param-minthreshold" id="param-minthreshold-value">-1</output></td>-->
<!--                        </tr>-->
                        <tr>
                            <td scope="row"><label for="param-threshold" data-toggle="tooltip" data-placement="right">Threshold</label></td>
                            <td colspan="2">
                                <div class="container">
                                    <div class="slider">
                                        <div class="track"></div>
                                    </div>
                                    <div class="output o0" style="display:block"> </div>
                                    <div class="thumb t0" onmouseup="mouseUp2()"></div>

                                    <div class="output o1" style="display:block"> </div>
                                    <div class="thumb t1" onmouseup="mouseUp2()"></div>
                                </div>
                            </td>
                        </tr>
<!--                        <tr>-->
<!--                            <td scope="row">-->
<!--                                <label for="param-corr" id="param-corrLabel" data-toggle="tooltip" data-placement="right" title="Tip: percentage of all points taken into account by Dimension Correlation.">Correl. threshold (%)</label>-->
<!--                                <label for="param-corr2" id="param-corrLabel2" data-toggle="tooltip" data-placement="right" style="display: none;">K-value nearest neighbor</label>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <input id="param-corr" type="range" min="0" max="100" value="50", step="1" onchange="CalculateCorrel(true, 1);">-->
<!--                                <input id="param-corr2" type="range" min="1" max="250" value="10", step="1" onchange="CalculateCorrel(true, 2);" style="display: none">-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <output for="param-corr" id="param-corr-value">50</output>-->
<!--                                <output for="param-corr2" id="param-corr-value2" style="display: none">10</output>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td scope="row"><label for="param-lim" data-toggle="tooltip" data-placement="right" title="Tip: x*times the actual radius (increases/decreases points' radius).">Point radius scaling</label></td>-->
<!--                            <td><input id="param-lim" type="range" min="1" max="4" value="3", step="0.5" onchange="setReInitialize(false);"></td>-->
<!--                            <td><output for="param-lim" id="param-lim-value">3</output></td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td scope="row">-->
<!--                                <input id="controls" type="checkbox">-->
<!--                                Disable annotator</input>-->
<!--                            </td>-->
<!--                            <td style="text-align:center;"><button class="btn btn-default" style="padding: 2px 10px 2px 10px !important;" onclick="deleteAnnotations();" ><i class="fas fa-comment-slash fa-lg"></i>Erase</button></td>-->
<!--                            <td colspan="2"><button class="btn btn-default" style="padding: 2px 10px 2px 10px !important;" onclick="BringBackAnnotations();" ><i class="fas fa-eye fa-lg"></i>Reveal</button></td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td scope="row">-->
<!--                                <textarea type="text" id="comment" name="textforAnnotator" placeholder="Write a comment."></textarea>-->
<!--                            </td>-->
<!--                            <td style="text-align:center;"><div id="toggleAnnotator"><button class="btn btn-default" style="padding: 2px 10px 2px 10px !important;" onclick="setAnnotator();" ><i class="fas fa-comment fa-lg"></i>Attach</button></div></td>-->
<!--                            <td colspan="2"><div id="continue"><button class="btn btn-default active" style="padding: 2px 10px 2px 10px !important;" onclick="setContinue();" ><i class="fas fa-chart-line fa-lg"></i>Analysis</button></div></td>-->
<!--                        </tr>-->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3" style="margin-top:-10px">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title" style="display:inline-block" data-toggle="tooltip" data-placement="right">Compare Methods</h2>
<!--                    <div id="datasetDetails" title="Tip: the number of dimensions/features and instances of a data set." style="display:inline-block; float:right"></div>-->
<!--                    <div style="display:inline-block; float:right">-->
<!--                        <button type="button" class="buttonOptimize" onclick='Cluster_View();'  >Cluster View</button>-->
<!--                    </div>-->
                </div>
                <div class="row">
                    <div class="panel-body">
<!--                        <table class="table table-borderless paramTable" style="border-collapse: separate ;border-spacing: 10px">-->
<!--                            <tbody>-->
<!--                            <tr>-->
<!--                                <td scope="row"><label id="select_cluster" for="param-dataset" data-toggle="tooltip" data-placement="right" >&nbsp;&nbsp;Select Cluster</label>-->
<!--                                    &nbsp;-->
<!--                                    <select id="param-cluster" name="param-cluster" style="font-size: 15px; border-radius: 5px;width: 100px" onChange="changeDataset3(this.value);">-->
<!--                                        <option value="KMedoids" selected>KMedoids</option>-->
<!--                                        <option value="KMedoids_DTW" >KMedoids_DTW</option>-->
<!--                                        <option value="KMeans" >KMeans</option>-->
<!--                                        <option value="AgglomerativeCluster" >AgglomerativeCluster</option>-->
<!--                                        <option value="AgglomerativeCluster_DTW" >AgglomerativeCluster_DTW</option>-->
<!--                                        <option value="SpectralCluster" >SpectralCluster</option>-->
<!--                                        <option value="SpectralCluster_DTW" >SpectralCluster_DTW</option>-->
<!--                                        <option value="Birch" >Birch</option>-->
<!--                                        &lt;!&ndash;                                        <option value="empty">Upload File</option>&ndash;&gt;-->
<!--                                    </select>-->
<!--                                    &nbsp;-->
<!--                                    <label for="param-n_cluster_num" data-toggle="tooltip" data-placement="right" >Cluster Num</label>-->
<!--                                    &nbsp;-->
<!--                                    <input id="param-n_cluster_num"  style="font-size: 15px; border-radius: 5px;width: 100px;text-align: center" value="3">-->
<!--                                </td>-->
<!--                            </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
                        <div id="container1" style="display: block;height: 180px;width: 450px"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-lg-offset-6" style="margin-top:-10px" id="figmodel1">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title"  data-toggle="tooltip" data-placement="right">Model Interpretation</h2>
                </div>
                <div class="panel-body" id="resetAllFilters">
                    <div id="container4" style="display: block;height: 180px;width: 450px"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3"  style="margin-top:-10px">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title" style="display:inline-block" data-toggle="tooltip" data-placement="right">Measuring Points Visualization</h2>
                    <!--                    <div id="datasetDetails" title="Tip: the number of dimensions/features and instances of a data set." style="display:inline-block; float:right"></div>-->
                    <div style="display:inline-block; float:right">
                        <h2 class="panel-title" style="display:inline-block" data-toggle="tooltip" data-placement="right">Cluster View</h2>
                        <input type="checkbox" id="cluster_switch" class="switch">
<!--                        <button type="button" class="buttonOptimize" onclick='Cluster_View();'  >Cluster View</button>-->
                    </div>
<!--                    <h2 class="panel-title" data-toggle="tooltip" data-placement="right" style="display:inline-block" >Shepard Heatmap</h2>-->
<!--                    <div style="display:inline-block; float:right">-->
<!--                        [Visualization:-->
<!--                        <select id="param-SH-view" name="param-SH-view" onchange="ShepardHeatMap()">-->
<!--                            <option value="1" selected>Heatmap</option>-->
<!--                            <option value="2">Diagram</option>-->
<!--                        </select>-->
<!--                        ]-->
<!--                    </div>-->
                </div>
                <div class="panel-body">
                    <div id="load_note2" style="float:left;width: 200px;display:none;margin-left: 10px;padding-top: 6px">Calculating...</div>
                    <table class="table table-borderless paramTable" style="border-collapse: separate ;border-spacing: 10px">
                        <tbody>
                        <tr>
                            <td scope="row" colspan="3"><label id="select_cluster" for="param-dataset" data-toggle="tooltip" data-placement="right" >Select Cluster</label>
                                &nbsp;
                                <select id="param-cluster" name="param-cluster" style="font-size: 15px; border-radius: 5px;width: 100px" >
                                    <option value="KMedoids" selected>KMedoids</option>
                                    <option value="KMedoids_DTW" >KMedoids_DTW</option>
                                    <option value="KMeans" >KMeans</option>
                                    <option value="AgglomerativeCluster" >AgglomerativeCluster</option>
                                    <option value="AgglomerativeCluster_DTW" >AgglomerativeCluster_DTW</option>
                                    <option value="SpectralCluster" >SpectralCluster</option>
<!--                                    <option value="SpectralCluster_DTW" >SpectralCluster_DTW</option>-->
                                    <option value="Birch" >Birch</option>
                                    <!--                                        <option value="empty">Upload File</option>-->
                                </select>
                                &nbsp;&nbsp;&nbsp;
                                <label for="param-n_cluster_num" data-toggle="tooltip" data-placement="right" >Cluster Num</label>
                                &nbsp;
                                <input id="param-n_cluster_num"  style="font-size: 15px; border-radius: 5px;width: 70px;text-align: center" value="3">
                            </td>
                        </tr>
<!--                        <tr>-->
<!--                            <td scope="row"><label for="param-interval" data-toggle="tooltip" data-placement="right">Interval</label></td>-->
<!--                            <td colspan="1"><input id="param-interval"  type="range" min="1" max="30" value="1", step="1" ></td>-->
<!--                            <td><output for="param-interval" id="param-interval-value">1</output></td>-->
<!--                        </tr>-->
                        </tbody>
                    </table>
                    <div id="container2" style="display: block;height: 200px;width: 450px"></div>
                    <div id="average" style="display: none">

                        <table class="table table-borderless paramTable" style="display:block;border-collapse: separate ;border-spacing: 10px">
                            <tbody>
                            <tr>
                                <td scope="row"><label for="param-interval" data-toggle="tooltip" data-placement="right">Interval</label></td>
                                <td colspan="1"><input id="param-interval"  type="range" min="1" max="1000" value="1", step="1" ></td>
                                <td><output for="param-interval" id="param-interval-value">1s</output></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="average2" style="display: none">
                        <table class="table table-borderless paramTable" style="display:block;border-collapse: separate ;border-spacing: 10px">
                            <tbody>
                            <tr>
                                <td scope="row"><label for="param-interval" data-toggle="tooltip" data-placement="right">Interval</label></td>
                                <td colspan="1"><input id="param-interval2"  type="range" min="1" max="1000" value="1", step="1" ></td>
                                <td><output for="param-interval2" id="param-interval-value2">1s</output></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="container3" style="display: none;margin-top: -10px;height: 200px;width: 400px"></div>
<!--                    <div class="row">-->
<!--                        <div class="col-lg-6">-->
<!--                            <svg id="sheparheat"></svg>-->
<!--                        </div>-->
<!--                        <div class="col-lg-2">-->
<!--                            <svg id="legend3"></svg>-->
<!--                        </div>-->
<!--                    </div>-->
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-lg-offset-6" style="margin-top:-10px" id="figmodel2">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title" style="display:inline-block" data-toggle="tooltip" data-placement="right">Model Testing And Coefficients</h2>
                    <button type="button" class="buttonOptimize" onclick='Fuwei();' style="float:right;" >Reset</button>
                </div>
                <div class="panel-body">
<!--                    <svg id="correlation"></svg>-->
<!--                    <button style="height: 20px;width: 50px;float:right">Reset</button>-->
                    <div id="container5_2" style="display: block;height: 150px;width:100%"></div>
                    <div id="container5_tuli" style="display: block;height: 20px;width:100%"></div>
                    <div id="container5" style="display: block;height: 80px;width:100%"></div>

                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3">

            <div class="col-lg-3" id="extra-information" style="width: 24.8vw">
                <div class="panel panel-default right-side-hist">
                    <div class="panel-heading">
                        <h2 class="panel-title" style="display:inline-block;" data-toggle="tooltip" data-placement="right" >Fusioned Data</h2>
<!--                        <div class="col-lg-7"></div>-->
<!--                        <div class="col-lg-5">-->
<!--                            <div class="param" style="display:inline-block; float:right; margin-top:-23px; margin-right: -18px">-->
<!--                                <label for="param-costlim" style="display:inline-block; float: right" data-toggle="tooltip" data-placement="right" title="Tip: set the rate of the limiter for the minimum acceptable visible cost at the main visualization view.">Min Cost: #<output for="param-costlim" id="param-costlim-value" title="Tip: minimum visible cost rate (range: 0.1 to 1.0)." style="display:inline-block; float:right">1.0</output></label>-->
<!--                                <input id="param-costlim" type="range" min="0.1" max="1" value="1", step="0.1" style="display:inline-block; float:right" onchange="setReInitialize(false);">-->
<!--                            </div>-->
<!--                        </div>-->
                        <button type="button" class="buttonOptimize" onclick='Data_Fusion();' style="float:right;" >Batch Estimation</button>
                    </div>
                    <div class="panel-body" style="height: 200px; overflow-y:scroll">
                        <table class="table table-borderless paramTable" style="border-collapse: separate ;border-spacing: 10px">
                            <tbody id="history_model">
                            <tr>
                                <td colspan="3" style="width: 150px"><input type="checkbox" name="save_file_chec">&nbsp;高温过热器融合（AgglomerativeCluster_3）<button name="open_button_filter"  id="history_start" >打开</button>&nbsp;<button name="del_button_filter"  id="history_del" >删除</button></td>
<!--                                <td ><button name="open_button_filter"  id="history_start" >打开</button>&nbsp;<button name="del_button_filter"  id="history_del" >删除</button></td>-->
                            </tr>
                            </tbody>
                        </table>
<!--                        <div id="costHist"></div>-->
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-lg-offset-6" id="change1" style="margin-top:-1.5vh">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title" data-toggle="tooltip" data-placement="right">Model Compare</h2>
<!--                    <select id="param-model" name ="param-style" onchange="Switch1()" style="margin-top:-20px;margin-left:10px;float: right">-->
<!--                        &lt;!&ndash;                                    "Rel_Change(this.options[this.options.selectedIndex].value)"&ndash;&gt;-->
<!--                        <option selected="selected" value="1">CCA_Model</option>-->
<!--                        <option value="2">MW_Model</option>-->
<!--                    </select>-->
                    <button type="button" id="change3" onclick='Switch();' style="margin-top:-18px;float: right" >T-SNE</button>
<!--                    <button type="button" id="change4" onclick='Execute()' style="margin-top:-18px;margin-left: 20px;float: right" >Select</button>-->
                </div>
                <div id="fangda" style="display:none;z-index:15;border-radius: 10px;border: 2px solid #d1b38a;margin-top:0px;margin-left:-210px;height:200px;width: 200px;position: absolute "></div>
                <div class="panel-body" id="change2" style="height: 200px; overflow-y:scroll;overflow-x: hidden">
<!--                    <div id="PCP" class="parcoords"></div>-->
                    <div id="m1">
                        <table id="aaa" class="table table-borderless" style="border-collapse: separate ;border-spacing: 0px;table-layout:fixed">
                            <thead>
                                <tr>
    <!--                                <th style="text-align: center"></th>-->
                                    <th colspan='2' style="text-align: center;font-size: 16px">MW_range</th>
                                    <th style="text-align: center;font-size: 16px">CCA_1</th>
                                    <th style="text-align: center;font-size: 16px">CCA_2</th>
                                    <th style="text-align: center;font-size: 16px">CCA_3</th>
                                </tr>
                            </thead>
                            <tbody id="tdData">
                            </tbody>
                        </table>
                    </div>
                    <div id="legend1" style="height: 20px;width: 400px;display: none"></div>
                    <div id="m2" style="height: 350px;width: 400px;display: none"></div>
                    <div id="legend2" style="height: 50px;width: 400px;display: none"></div>
                </div>
                <!-- 画表格 -->
                <div id="CCA_model1" class="panel-heading" style="margin-top:20px;display: none">
                    <h2 class="panel-title" data-toggle="tooltip" data-placement="right">Model Select</h2>
                    <select  id="CCA_model" name ="param-style" onchange="Execute()" style="margin-top: -18px;float: right">
                        <option selected="selected" value="1">CCA_1</option>
                        <option value="2">CCA_2</option>
                        <option value="3">CCA_3</option>
                    </select>
                    <select  id="canshu" name ="param-style" onchange="Execute()" style="margin-top: -18px;float: right">
                        <option selected="selected" value="1">壁温参数</option>
                        <option value="2">影响参数</option>
                    </select>
                </div>
                <div class="panel-body" id="changetable" style="height: 200px;display: none;overflow-y:scroll;overflow-x: hidden">
                    <table id="bbb" class="table table-borderless" style="border-collapse: separate ;border-spacing: 0px;table-layout:fixed;width: 100%;height: 200px">
                        <thead id="mwdata">

                        </thead>
                        <tbody id="tdData1" >

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
<!--    <div class="footer" style="margin-top: -25px">-->
<!--        <hr>-->
<!--        <p class="text-muted credit no-top-margin no-bottom-margin">-->
<!--            &copy; ISOVIS group 2019&ndash;2020-->
<!--        </p>-->
<!--        <p class="text-muted credit no-top-margin no-bottom-margin">-->
<!--            Last updated: June 15, 2020-->
<!--        </p>-->
<!--    </div>-->
</div>

<!-- Load the core visualization script. -->
<script src="{{url_for('static', filename='js/tsne_vis.js')}}"></script>

<script>
    // var width=document.documentElement.clientWidth;
    // var height=document.documentElement.clientHeight;
    // console.log(width)
    // console.log(height)
    // var sacle=width/1920>height/1080?height/1080:width/1920;
    // document.getElementsByTagName('body')[0].style.zoom=sacle;
    function changed(){
        var doma1 = document.getElementById("a1");
        var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
        var doma2 = document.getElementById("a2");
        var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
        var doma3 = document.getElementById("a3");
        var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
        var doma4 = document.getElementById("a4");
        var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
        var doma5 = document.getElementById("a5");
        var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
        var doma6 = document.getElementById("a6");
        var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
        var doma7 = document.getElementById("a7");
        var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
        var doma8 = document.getElementById("a8");
        var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});
        var optiona1 = {
            // title:{
            //     text:123,
            //     left:'center'
            // },
            grid:{
                top:5,
                bottom:5,
                left:5,
                right:5
            },
            xAxis: {
                show: false,
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
            },
            dataZoom:
                {
                    type: 'inside', // 使鼠标在图表中时滚轮可用
                    // xAxisIndex:[0],
                },
            yAxis: {
                show: false,
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
            },
            series: [{
                symbolSize:4,
                itemStyle:{
                    color:'#0780cf'
                },
                data:[],
                type: 'scatter'
            },
                {
                    symbolSize:4,
                    itemStyle:{
                        color:'black'
                    },
                    data:[],
                    type: 'scatter'
                },
            ]
        };

        console.log("want numss",numss)

        // 当所有图例都选中时
        if(numss.length == 0){
            // 设置对应的小方框中的U1 V1散点图
            var num1=$('#num1').val();
            var num2=$('#num2').val();
            for(var k=1;k<=data_U.length && k<9;k++){
                var U_data=[];
                var V_data=[];
                for(var i=0;i<data_U[k-1].length;i++){
                    U_data.push([data_U[k-1][i][num1-1],data_V[k-1][i][num1-1]])
                    V_data.push([data_U[k-1][i][num2-1],data_V[k-1][i][num2-1]])
                }
                console.log(U_data,V_data,k)
                eval('optiona1'+'.series[0].data=U_data')
                eval('optiona1'+'.series[1].data=V_data')
                eval("optiona1.series[0].itemStyle.color=color2(0.9);")
                eval("optiona1.series[1].itemStyle.color=color2(-0.9);")
                eval('myCharta'+k+'.setOption(optiona1,true);')
                console.log(optiona1)
            }
        }else{
            console.log("want numss2",numss)
            // 设置对应的小方框中的U1 V1散点图
            var num1=$('#num1').val();
            var num2=$('#num2').val();
            for(var k=1;k<=data_U.length && k<9 && k<=numss.length;k++){
                var U_data=[];
                var V_data=[];
                for(var i=0;i<data_U[numss[k-1]].length;i++){
                    U_data.push([data_U[numss[k-1]][i][num1-1],data_V[numss[k-1]][i][num1-1]])
                    V_data.push([data_U[numss[k-1]][i][num2-1],data_V[numss[k-1]][i][num2-1]])
                }
                console.log("want to know",U_data,V_data,k)
                eval('optiona1'+'.series[0].data=U_data')
                eval('optiona1'+'.series[1].data=V_data')
                eval("optiona1.series[0].itemStyle.color=color2(0.9);")
                eval("optiona1.series[1].itemStyle.color=color2(-0.9);")
                eval('myCharta'+k+'.setOption(optiona1,true);')
                console.log(optiona1)
            }
        }
    }
    function add1(obj){
        var num=parseInt($('#num1').val())
        // console.log(1,num==1,num,obj)
        if(num==7){
            $(obj).attr('class','btnn btn_plus disabled');
            $('#num1').attr('value',num+1)
        }
        else{
            $('#num1').attr('value',num+1)
        }
        if(num+1>1){
            $('#left_sa .btn_minus').attr('class','btnn btn_minus');
        }
        changed();
    }
    function sub1(obj){
        var num=parseInt($('#num1').val())
        // console.log(1,num==1,num,obj)
        if(num==2){
            $(obj).attr('class','btnn btn_minus disabled');
            $('#num1').attr('value',num-1)
        }
        else{
            $('#num1').attr('value',num-1)
        }
        if(num-1<8){
            $('#left_sa .btn_plus').attr('class','btnn btn_plus');
        }
        changed();
    }
    function add2(obj){
        var num=parseInt($('#num2').val())
        console.log(1,num==1,num,obj)
        if(num==7){
            $(obj).attr('class','btnn btn_plus disabled');
            $('#num2').attr('value',num+1)
        }
        else{
            $('#num2').attr('value',num+1)
        }
        if(num+1>1){
            $('#right_sa .btn_minus').attr('class','btnn btn_minus');
        }
        changed();
    }
    function sub2(obj){
        var num=parseInt($('#num2').val())
        // console.log(1,num==1,num,obj)
        if(num==2){
            $(obj).attr('class','btnn btn_minus disabled');
            $('#num2').attr('value',num-1)
        }
        else{
            $('#num2').attr('value',num-1)
        }
        if(num-1<8){
            $('#right_sa .btn_plus').attr('class','btnn btn_plus');
        }
        changed();
    }
    $.ajax({
        url: '/dataset',
        type: 'GET',
        data: {},
        async: false,
        success: function (args) {
            console.log(args['file'])
            var obj=document.getElementById('param-dataset');
            obj.options.length=0;
            for (var i = 0; i < args['file'].length; i++)
            {
                obj.options.add(new Option(args['file'][i],args['file'][i]));
            }
        },
        complete: function (XMLHttpRequest, status) {
            if (status != 'success') {
                alert("error！")
            }
        }
    });

    var inputsRy = {
        sliderWidth: 200,
        minRange: 0,
        maxRange: 100,
        outputWidth: 30, // output width
        thumbWidth: 18, // thumb width
        thumbBorderWidth: 4,
        trackHeight: 4,
        theValue: [40, 100] // theValue[0] < theValue[1]
    };
    var isDragging0 = false;
    var isDragging1 = false;

    var range = inputsRy.maxRange - inputsRy.minRange;
    var rangeK = inputsRy.sliderWidth / range;
    var container = document.querySelector(".container");
    var thumbRealWidth = inputsRy.thumbWidth + 2 * inputsRy.thumbBorderWidth;
    bcolor=['#0780cf','#765005'];
    // styles
    var slider = document.querySelector(".slider");
    slider.style.height = inputsRy.trackHeight + "px";
    slider.style.width = inputsRy.sliderWidth + "px";
    slider.style.paddingLeft = (inputsRy.theValue[0] - inputsRy.minRange) * rangeK + "px";
    slider.style.paddingRight = inputsRy.sliderWidth - inputsRy.theValue[1] * rangeK + "px";

    var track = document.querySelector(".track");
    track.style.width = inputsRy.theValue[1] * rangeK - inputsRy.theValue[0] * rangeK + "px";

    var thumbs = document.querySelectorAll(".thumb");
    for (var i = 0; i < thumbs.length; i++) {

        thumbs[i].style.width = thumbs[i].style.height = inputsRy.thumbWidth + "px";
        console.log(inputsRy.thumbWidth + "px");
        thumbs[i].style.borderWidth = inputsRy.thumbBorderWidth + "px";
        thumbs[i].style.top = -(inputsRy.thumbWidth / 2 + inputsRy.thumbBorderWidth - inputsRy.trackHeight / 2) + "px";
        thumbs[i].style.left = (inputsRy.theValue[i] - inputsRy.minRange) * rangeK - (thumbRealWidth / 2)+18 + "px";
        thumbs[i].style.backgroundColor=bcolor[i]
    }
    var outputs = document.querySelectorAll(".output");
    for (var i = 0; i < outputs.length; i++) {
        console.log(thumbs[i])
        outputs[i].style.width = outputs[i].style.height = outputs[i].style.lineHeight = outputs[i].style.left = inputsRy.outputWidth-10 + "px";
        outputs[i].style.top = -(Math.sqrt(2 * inputsRy.outputWidth * inputsRy.outputWidth) + inputsRy.thumbWidth / 2 - inputsRy.trackHeight / 2)+45 + "px";
        outputs[i].style.left = (inputsRy.theValue[i] - inputsRy.minRange) * rangeK - inputsRy.outputWidth / 2 +23+ "px";
        var aaa=(inputsRy.theValue[i]/100).toFixed(2)
        outputs[i].innerHTML = "<p>" + inputsRy.theValue[i]/100 + "</p>";
    }
    // outputs[0].style.top = -(Math.sqrt(2 * inputsRy.outputWidth * inputsRy.outputWidth) + inputsRy.thumbWidth / 2 - inputsRy.trackHeight / 2)+75 + "px";

    //events

    thumbs[0].addEventListener("mousedown", function(evt) {
        isDragging0 = true;
    }, false);
    thumbs[1].addEventListener("mousedown", function(evt) {
        isDragging1 = true;
    }, false);
    container.addEventListener("mouseup", function(evt) {
        isDragging0 = false;
        isDragging1 = false;
    }, false);
    container.addEventListener("mouseout", function(evt) {
        isDragging0 = false;
        isDragging1 = false;
    }, false);

    container.addEventListener("mousemove", function(evt) {
        var mousePos = oMousePos(this, evt);
        // console.log("mousePos",mousePos)
        var theValue0 = (isDragging0) ? Math.round(mousePos.x / rangeK) + inputsRy.minRange : inputsRy.theValue[0];
        // console.log(theValue0);
        var theValue1 = (isDragging1) ? Math.round(mousePos.x / rangeK) + inputsRy.minRange : inputsRy.theValue[1];
        // console.log("theValue1",theValue1);
        // console.log(thumbRealWidth)
        if (isDragging0) {

            if (theValue0 < theValue1 - 8 &&
                theValue0 >= inputsRy.minRange) {
                inputsRy.theValue[0] = theValue0;
                thumbs[0].style.left = (theValue0 - inputsRy.minRange) * rangeK - (thumbRealWidth / 2) + "px";
                outputs[0].style.left = 5+(theValue0 - inputsRy.minRange) * rangeK - inputsRy.outputWidth / 2 + "px";
                // var aaa=(inputsRy.theValue[0]/100).toFixed(2)
                outputs[0].innerHTML = "<p>" + theValue0/100 + "</p>";
                slider.style.paddingLeft = (theValue0 - inputsRy.minRange) * rangeK + "px";
                track.style.width = (theValue1 - theValue0) * rangeK + "px";

            }
        } else if (isDragging1) {

            if (theValue1 > theValue0 + 8 &&
                theValue1 <= inputsRy.maxRange) {
                inputsRy.theValue[1] = theValue1;
                thumbs[1].style.left = (theValue1 - inputsRy.minRange) * rangeK - (thumbRealWidth / 2) + "px";
                outputs[1].style.left = 5+(theValue1 - inputsRy.minRange) * rangeK - inputsRy.outputWidth / 2 + "px";
                // var aaa=(inputsRy.theValue[1]/100).toFixed(2)
                outputs[1].innerHTML = "<p>" + theValue1/100 + "</p>";
                slider.style.paddingRight = (inputsRy.maxRange - theValue1) * rangeK + "px";
                track.style.width = (theValue1 - theValue0) * rangeK + "px";

            }
        }

    }, false);

    // // helpers
    // var modt = document.getElementById("modtSNEcanvas");
    // modt.addEventListener('click', event => {
    //     if('inner' !== event.target.className) {
    //         console.log('success1');
    //     }
    //     if('inner' !== event.target) {
    //         console.log('success2');
    //     }
    //     if(event.target.contains('inner') && event.target !== 'inner') {
    //         console.log('success3');
    //     }
    // })

    function oMousePos(elmt, evt) {
        var ClientRect = elmt.getBoundingClientRect();
        return { //objeto
            x: Math.round(evt.clientX - ClientRect.left),
            y: Math.round(evt.clientY - ClientRect.top)
        }
    }

    // 实现根据阈值 多个小饼图的变换
    function repaint(){

        var data_gl = []
        for (var i = 1; i <= qita_column.length; i++) {
            data_gl.push([0, i, qita_column[i - 1]])
        }
        // console.log("save",save_xv,save_yu)
        var max_t = inputsRy.theValue[1]/100;
        var min_t = inputsRy.theValue[0]/100;


        for(var ind=0;ind<index;ind++){
            var dom_0 = document.getElementById("one" + ind);
            var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
            var dom_1 = document.getElementById("two" + ind);
            var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
            var dom_2 = document.getElementById("three" + ind);
            var myChart_2 = echarts.init(dom_2, null, {renderer: 'svg'});
            var data_0 = [], data_0_1 = [];
            var data_1 = [], data_1_1 = [];
            var data_2 = [], data_2_1 = [];
            var bili = [0, 0, 0, 0, 0];
            var bili_1 = [0, 0, 0, 0, 0];
            var bili_2 = [0, 0, 0, 0, 0];
            var bili2 = [2, 2, 4, 9, 8];
            var bili_sum = 0;
            var bili_sum_1 = 0;
            var bili_sum_2 = 0;
            var yu=save_yu[ind];
            var xv=save_xv[ind];
            for (var i = 0; i < qita_column.length; i++) {
                if (Math.abs(yu[i][0]) >= min_t && Math.abs(yu[i][0]) <= max_t) {
                    data_0.push({value: [Math.abs(yu[i][0]), yu[i][0]], name: qita_column[i]})
                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i]})
                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i]})
                } else {
                    data_0.push({
                        value: [0, yu[i][0]],
                        name: qita_column[i],
                        // itemStyle: {color: 'gray', opacity: 0.2}
                    })
                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                }
                // data_0.push({value: [corr_yu[i][0], corr_yu[i][0]], name: qita_column[i]})
                if (Math.abs(yu[i][1]) >= min_t && Math.abs(yu[i][1]) <= max_t) {
                    data_1.push({value: [Math.abs(yu[i][1]), yu[i][1]], name: qita_column[i]})
                } else {
                    data_1.push({
                        value: [0, yu[i][1]],
                        name: qita_column[i],
                        // itemStyle: {color: 'gray', opacity: 0.2}
                    })
                }
                if (Math.abs(yu[i][2]) >= min_t && Math.abs(yu[i][2]) <= max_t) {
                    data_2.push({value: [Math.abs(yu[i][2]), yu[i][2]], name: qita_column[i]})
                } else {
                    data_2.push({
                        value: [0, yu[i][2]],
                        name: qita_column[i],
                        // itemStyle: {color: 'gray', opacity: 0.2}
                    })
                }
            }

            for (var i = 0; i < biwen_column.length; i++) {
                if (Math.abs(xv[i][0]) >= min_t && Math.abs(xv[i][0]) <= max_t) {
                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                        bili[0] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                        bili[1] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                        bili[2] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                        bili[3] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                        bili[4] += Math.abs(xv[i][0])
                    }
                    bili_sum += Math.abs(corr_xv[i][0])
                    // data_0.push({value: [Math.abs(corr_xv[i][0]), corr_xv[i][0]], name: biwen_column[i]})
                } else {
                    // data_0.push({
                    //     value: [0, corr_xv[i][0]],
                    //     name: biwen_column[i],
                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                    // })
                }
                if (Math.abs(xv[i][1]) >= min_t && Math.abs(xv[i][1]) <= max_t) {
                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                        bili_1[0] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                        bili_1[1] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                        bili_1[2] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                        bili_1[3] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                        bili_1[4] += Math.abs(xv[i][0])
                    }
                    bili_sum_1 += Math.abs(corr_xv[i][0])
                    // data_1.push({value: [Math.abs(corr_xv[i][1]), corr_xv[i][1]], name: biwen_column[i]})
                } else {
                    // data_1.push({
                    //     value: [0, corr_xv[i][1]],
                    //     name: biwen_column[i],
                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                    // })
                }
                if (Math.abs(xv[i][2]) >= min_t && Math.abs(xv[i][2]) <= max_t) {
                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                        bili_2[0] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                        bili_2[1] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                        bili_2[2] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                        bili_2[3] += Math.abs(xv[i][0])
                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                        bili_2[4] += Math.abs(xv[i][0])
                    }
                    bili_sum_2 += Math.abs(xv[i][0])
                    // data_2.push({value: [Math.abs(corr_xv[i][2]), corr_xv[i][2]], name: biwen_column[i]})
                } else {
                    // data_2.push({
                    //     value: [0, corr_xv[i][2]],
                    //     name: biwen_column[i],
                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                    // })
                }
            }
            for (var i = 0; i < bili.length; i++) {
                bili[i] = bili[i] / bili_sum
                data_0_1.push({
                    value: bili[i],
                    name: bili_name[i],
                    itemStyle: {color: peise[i]}
                })
                bili_1[i] = bili_1[i] / bili_sum_1
                data_1_1.push({
                    value: bili_1[i],
                    name: bili_name[i],
                    itemStyle: {color: peise[i]},

                })
                if(bili_sum_2!=0){
                    bili_2[i] = bili_2[i] / bili_sum_2
                }
                // bili_2[i] = bili_2[i] / bili_sum_2
                data_2_1.push({
                    value: bili_2[i],
                    name: bili_name[i],
                    itemStyle: {color: peise[i]}
                })
            }
            console.log("bili_2",bili_2,data_2_1,data_1_1,data_0_1)
            var option_0 = {
                tooltip: {
                    trigger: 'item',
                    position: [-20, -30],
                    formatter: function (par) {
                        if (par.componentIndex == 0) {
                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                        } else {
                            return par.data.name + ": " + par.data.value.toFixed(3)
                        }
                        // return par.data.name + ": " + par.data.value[1].toFixed(2)
                    },
                    textStyle: {
                        fontSize: 12
                    }
                },
                visualMap: {
                    seriesIndex: 0,
                    dimension: 0,
                    show: false,
                    max: 1,
                    min: -1,
                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                },
                series: [
                    {
                        name:'one'+index,
                        type: 'pie',
                        radius: ['50%', '100%'],
                        roseType: 'area',
                        avoidLabelOverlap: false,
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: [10, -0.5], name: '搜索引擎'},
                            {value: [10, 0.3], name: '直接访问'},
                            {value: [10, 0.5], name: '邮件营销'},
                            {value: [10, 0.8], name: '联盟广告'},
                            {value: [10, 1], name: '视频广告'}
                        ]
                    },
                    {
                        name: 'one'+index,
                        type: 'pie',
                        // selectedMode: 'single',
                        radius: [0, '40%'],
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: data_0_1
                    },
                ]
            };
            var option_1 = {
                tooltip: {
                    trigger: 'item',
                    position: [-80, -30],
                    formatter: function (par) {
                        if (par.componentIndex == 0) {
                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                        } else {
                            return par.data.name + ": " + par.data.value.toFixed(3)
                        }
                    },
                    textStyle: {
                        fontSize: 12
                    }
                },
                visualMap: {
                    seriesIndex: 0,
                    dimension: 0,
                    show: false,
                    max: 1,
                    min: -1,
                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['50%', '100%'],
                        avoidLabelOverlap: false,
                        roseType: 'area',
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: [10, -0.5], name: '搜索引擎'},
                            {value: [10, 0.3], name: '直接访问'},
                            {value: [10, 0.5], name: '邮件营销'},
                            {value: [10, 0.8], name: '联盟广告'},
                            {value: [10, 1], name: '视频广告'}
                        ]
                    },
                    {
                        name: '比例',
                        type: 'pie',
                        // selectedMode: 'single',
                        radius: [0, '40%'],
                        label: {
                            show: false,
                            position: 'inner',
                            fontSize: 14,
                        },
                        labelLine: {
                            show: false
                        },
                        data: data_1_1
                    },
                ]
            };
            var option_2 = {
                tooltip: {
                    trigger: 'item',
                    position: [-180, -30],
                    formatter: function (par) {
                        if (par.componentIndex == 0) {
                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                        } else {
                            return par.data.name + ": " + par.data.value.toFixed(3)
                        }
                    },
                    textStyle: {
                        fontSize: 12
                    }
                },
                visualMap: {
                    seriesIndex: 0,
                    dimension: 0,
                    show: false,
                    max: 1,
                    min: -1,
                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['50%', '100%'],
                        avoidLabelOverlap: false,
                        roseType: 'area',
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: [10, -0.5], name: '搜索引擎'},
                            {value: [10, 0.3], name: '直接访问'},
                            {value: [10, 0.5], name: '邮件营销'},
                            {value: [10, 0.8], name: '联盟广告'},
                            {value: [10, 1], name: '视频广告'}
                        ]
                    },
                    {
                        name: '比例',
                        type: 'pie',
                        // selectedMode: 'single',
                        radius: [0, '40%'],
                        label: {
                            show: false,
                            position: 'inner',
                            fontSize: 14,
                        },
                        labelLine: {
                            show: false
                        },
                        data: data_2_1
                    },
                ]
            };
            option_0.series[0].data = data_0
            option_1.series[0].data = data_1
            option_2.series[0].data = data_2
            console.log("option_2",option_1,option_2)
            // 生成对应的三个小饼图
            myChart_0.setOption(option_0)
            myChart_1.setOption(option_1)
            myChart_2.setOption(option_2,true)

            // 滑动小饼图联动效果
            myChart_0.on('mouseover', function (params) {
                console.log("myChart_1",params)
                var dom22 = document.getElementById("output_cluster");
                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                var option22 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: qita_column.length,
                    },
                    series: [
                        {
                            name: 'output_cluster',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 15,
                            data: data_gl,
                            type: 'scatter',
                            itemStyle: {
                                color:'#5470c6',
                                opacity: 1
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                },
                                color:'black'
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                if(params.componentIndex==1){
                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                }
                else{
                    list_save2.length = 0;
                    list_save2.push(params.name)
                    option22.series[0].itemStyle = {
                        color: function (param) {
                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                return 'black'
                            } else {
                                return '#5470c6'
                            }
                        },
                        opacity:1
                    }
                    myChart22.setOption(option22);
                }
            })
            myChart_0.on('mouseout', function (params) {
                var dom22 = document.getElementById("output_cluster");
                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                var option22 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: qita_column.length,
                    },
                    series: [
                        {
                            name: 'output_cluster',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 15,
                            data: data_gl,
                            type: 'scatter',
                            itemStyle: {
                                color:'#5470c6',
                                opacity: 1
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                },
                                color:'black'
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                if(params.componentIndex==1) {
                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                }
                else{
                    list_save2.length = 0;
                    myChart22.setOption(option22);
                }
            })
            myChart_1.on('mouseover', function (params) {
                var dom22 = document.getElementById("output_cluster");
                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                var option22 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: qita_column.length,
                    },
                    series: [
                        {
                            name: 'output_cluster',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 15,
                            data: data_gl,
                            type: 'scatter',
                            itemStyle: {
                                color:'#5470c6',
                                opacity: 1
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                },
                                color:'black'
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                if(params.componentIndex==1){
                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                }
                else{
                    list_save2.length = 0;
                    list_save2.push(params.name)
                    option22.series[0].itemStyle = {
                        color: function (param) {
                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                return 'black'
                            } else {
                                return '#5470c6'
                            }
                        },
                        opacity:1
                    }
                    myChart22.setOption(option22);
                }
            })
            myChart_1.on('mouseout', function (params) {
                var dom22 = document.getElementById("output_cluster");
                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                var option22 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: qita_column.length,
                    },
                    series: [
                        {
                            name: 'output_cluster',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 15,
                            data: data_gl,
                            type: 'scatter',
                            itemStyle: {
                                color:'#5470c6',
                                opacity: 1
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                },
                                color:'black'
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                if(params.componentIndex==1) {
                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                }
                else{
                    list_save2.length = 0;
                    myChart22.setOption(option22);
                }
            })
            myChart_2.on('mouseover', function (params) {
                var dom22 = document.getElementById("output_cluster");
                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                var option22 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: qita_column.length,
                    },
                    series: [
                        {
                            name: 'output_cluster',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 15,
                            data: data_gl,
                            type: 'scatter',
                            itemStyle: {
                                color:'#5470c6',
                                opacity: 1
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                },
                                color:'black'
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                if(params.componentIndex==1){
                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                }
                else{
                    list_save2.length = 0;
                    list_save2.push(params.name)
                    option22.series[0].itemStyle = {
                        color: function (param) {
                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                return 'black'
                            } else {
                                return '#5470c6'
                            }
                        },
                        opacity:1
                    }
                    myChart22.setOption(option22);
                }
            })
            myChart_2.on('mouseout', function (params) {
                var dom22 = document.getElementById("output_cluster");
                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                var option22 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: qita_column.length,
                    },
                    series: [
                        {
                            name: 'output_cluster',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 15,
                            data: data_gl,
                            type: 'scatter',
                            itemStyle: {
                                color:'#5470c6',
                                opacity: 1
                            },
                            label: {
                                show: true,
                                position: 'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                },
                                color:'black'
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                if(params.componentIndex==1) {
                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                }
                else{
                    list_save2.length = 0;
                    myChart22.setOption(option22);
                }
            })
        }
    }

    // 阈值鼠标抬起事件
    function mouseUp2(){
        repaint();
        var duiflag = $('#param-duibi option:selected').val()
        if(duiflag==2){
            var max_t = inputsRy.theValue[1]/100;
            var min_t = inputsRy.theValue[0]/100;
            console.log("max_t",max_t)
            console.log("min_t",min_t)

            var checknum_new = []
            var lent = tongji.length
            for (var i=0 ; i<lent;i++){
                var isChecked = $('#mw'+i).is(":checked");
                if(isChecked == true){
                    checknum_new.push(i)
                }
            }

            // 先清空表单数据
            $("#tdData1").html("")
            $("#mwdata").html("")

            // 动态写表头
            var tableData = "<tr>"
            tableData += '<th>'+'N/MW'+'</th>'
            for(var i = 0; i < checknum_new.length; i++){
                tableData += "<th>"+ tongji[checknum_new[i]] +"</th>"
            }
            tableData += "</tr>"
            $('#mwdata').append(tableData)

            console.log("save checknum_new",checknum_new)

            var ccamodel = $("#CCA_model option:selected").val()
            console.log("ccamodel",ccamodel)
            var canshu = $("#canshu option:selected").val()
            console.log("canshu",canshu)


            var cca_flag;

            if(ccamodel == 1){
                cca_flag = 0
            }
            if(ccamodel == 2){
                cca_flag = 1
            }
            if(ccamodel == 3){
                cca_flag = 2
            }

            console.log("cca_flag",cca_flag)

            // 当状态是壁温参数时
            if(canshu == 1){
                var strr = ""
                for(var i = 0; i < biwen_column.length; i++){
                    strr += "<tr>"
                    strr += "<td>" + bi_name2[i] + "</td>"
                    // strr += "<td>" + save_xv[checknum[0]][i][0].toFixed(2) +"</td>"
                    // strr += "<td>" + save_xv[checknum[1]][i][0].toFixed(2) +"</td>"
                    for(var j = 0;j < checknum_new.length; j++){
                        var value = save_xv[checknum_new[j]][i][cca_flag]

                        if(Math.abs(value) >= min_t && Math.abs(value)<= max_t){
                            strr += "<td>" + value.toFixed(2) +"</td>"
                        }else{
                            strr += "<td>" + "—" + "</td>"
                        }
                    }
                    strr += "</tr>"
                }
            }
            // 当状态是影响参数时
            if(canshu == 2){
                var strr = ""
                for(var i = 0; i < qita_column.length; i++){
                    strr += "<tr>"
                    strr += "<td>" + qita_name2[i] + "</td>"
                    // strr += "<td>" + save_xv[checknum[0]][i][0].toFixed(2) +"</td>"
                    // strr += "<td>" + save_xv[checknum[1]][i][0].toFixed(2) +"</td>"
                    for(var j = 0;j < checknum_new.length; j++){
                        var value2 = save_yu[checknum_new[j]][i][cca_flag]

                        if(Math.abs(value2) >= min_t && Math.abs(value2)<= max_t){
                            strr += "<td>" + value2.toFixed(2) +"</td>"
                        }else{
                            strr += "<td>" + "—" + "</td>"
                        }
                    }
                    strr += "</tr>"
                }
            }


            $("#tdData1").append(strr);

            var xinline1=[]
            for (var i=0;i<left_line.length;i++){
                var newline=left_line[i]
                for (var j=0;j<newline.length;j++) {
                    if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[i] && jilu_tuli.indexOf(newline[j].new)==-1) {
                        newline[j].target.y=150 + 78 * i
                        newline[j].color2=peise[i]
                        xinline1.push(newline[j])
                    }
                }
            }
            var xinline2=[]
            for (var i=0;i<right_line.length;i++){
                var newline=right_line[i]
                for (var j=0;j<newline.length;j++) {
                    if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[i] && jilu_tuli.indexOf(newline[j].new)==-1) {
                        newline[j].source.y=150 + 78 * i
                        newline[j].color2=peise[i]
                        xinline2.push(newline[j])
                    }
                }
            }
            console.log("xinline1",xinline1,xinline2)
            d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
            lineGraph1
                // .append("g")
                .selectAll('path')
                .data(xinline1)
                .enter()
                .append("path")
                .attr("d", function (d, i) {
                    // console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke", function (d) {
                    return d.color2;
                })
                .attr("fill", 'none')
                // .attr("stroke-width",5)
                .attr("stroke-width", function (d) {
                    return linear2(Math.abs(d.value));
                })
                .style("opacity", 1)
                .on("mouseover", overed2)
                .on("mouseout", outed2)
            d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
            lineGraph3
                // .append("g")
                .selectAll('path')
                .data(xinline2)
                .enter()
                .append("path")
                .attr("d", function (d, i) {
                    // console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")86
                // .attr("stroke-width",2)
                .attr("stroke", function (d) {
                    return d.color2;
                })
                .attr("fill", 'none')
                .attr("stroke-width", function (d) {
                    return linear2(Math.abs(d.value));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 1)
                .on("mouseover", overed3)
                .on("mouseout", outed3)
        }
        else {
            var max_t = inputsRy.theValue[1] / 100;
            var min_t = inputsRy.theValue[0] / 100;
            var sel = $('#param-Relevance  option:selected').val();
            if (cunchu[0] == 0) {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t && all_lines1[i].start == cunchu[1]) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        console.log(d, i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else if (cunchu[0] == 1) {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t && all_lines1[i].end == cunchu[1]) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t && all_lines3[i].start == cunchu[1]) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else if (cunchu[0] == 2) {
                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t && all_lines3[i].end == cunchu[1]) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else if (cunchu[0] == 3) {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t && all_lines1[i].start == cunchu[1]) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t && all_lines3[i].end == cunchu[2]) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else if (cunchu[0] == 4) {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t && all_lines1[i].start == cunchu[2]) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t && all_lines3[i].end == cunchu[1]) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else if (cunchu[0] == 5) {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t && all_lines1[i].start == cunchu[1]) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t && all_lines3[i].start == cunchu[2]) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else if (cunchu[0] == 6) {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t && all_lines1[i].start == cunchu[1]) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t && all_lines3[i].start == cunchu[2]) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            } else {
                var all_lines1 = all_link1;
                var lines1 = [];
                for (var i = 0; i < all_lines1.length; i++) {
                    // console.log(all_lines1[i])
                    if (Math.abs(all_lines1[i].value) <= max_t && Math.abs(all_lines1[i].value) >= min_t) {
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                console.log("lines1", lines1)
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        console.log(d, i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)

                var all_lines3 = all_link3;
                var lines3 = [];
                for (var i = 0; i < all_lines3.length; i++) {
                    if (Math.abs(all_lines3[i].value) <= max_t && Math.abs(all_lines3[i].value) >= min_t) {
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        console.log(d, i)
                        return createLink(d)
                    })
                    .attr("stroke", function (d) {
                        return color2(d.value);
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            }
            var bi_index = [], qita_index = [];
            var all_lines1_1 = all_link1;
            var one_b = [], two_b = [], three_b = [];
            var one_q = [], two_q = [], three_q = [];
            for (var i = 0; i < all_lines1_1.length; i++) {
                if (Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                    if (all_lines1_1[i].end == 0 && Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                        one_b.push(all_lines1_1[i].start)
                    }
                    if (all_lines1_1[i].end == 1 && Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                        two_b.push(all_lines1_1[i].start)
                    }
                    if (all_lines1_1[i].end == 2 && Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                        three_b.push(all_lines1_1[i].start)
                    }
                }
            }
            bi_index.push(one_b)
            bi_index.push(two_b)
            bi_index.push(three_b)

            var all_lines1_3 = all_link3;
            for (var i = 0; i < all_lines1_3.length; i++) {
                if (Math.abs(all_lines1_3[i].value) <= max_t && Math.abs(all_lines1_3[i].value) >= min_t) {
                    if (all_lines1_3[i].start == 0) {
                        one_q.push(all_lines1_3[i].end)
                    }
                    if (all_lines1_3[i].start == 1) {
                        two_q.push(all_lines1_3[i].end)
                    }
                    if (all_lines1_3[i].start == 2) {
                        three_q.push(all_lines1_3[i].end)
                    }
                }
            }
            qita_index.push(one_q);
            qita_index.push(two_q);
            qita_index.push(three_q);
            console.log("qita_index", qita_index)
            var wenjian = $('#param-dataset  option:selected').val();
            var indexx = jiluu.indexOf(wenjian)
            var dom_0 = document.getElementById("one" + indexx);
            var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
            var dom_1 = document.getElementById("two" + indexx);
            var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
            var dom_2 = document.getElementById("three" + indexx);
            var myChart_2 = echarts.init(dom_2, null, {renderer: 'svg'});
            var data_0 = [],data_0_1 = [];
            var data_1 = [],data_1_1 = [];
            var data_2 = [],data_2_1 = [];
            var bili=[0,0,0,0,0];
            var bili_1=[0,0,0,0,0];
            var bili_2=[0,0,0,0,0];
            var bili2=[2,2,4,9,8];
            var bili_sum=0;
            var bili_sum_1=0;
            var bili_sum_2=0;
            var bili_name=['高温过热器','后墙隔墙','低温过热器','垂直水冷壁','螺旋水冷壁'];

            for (var i = 0; i < qita_column.length; i++) {
                if (qita_index[0].indexOf(i) > -1) {
                    data_0.push({value: [Math.abs(corr_yu[i][0]), corr_yu[i][0]], name: qita_column[i]})
                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i]})
                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i]})
                } else {
                    data_0.push({
                        value: [0, corr_yu[i][0]],
                        name: qita_column[i],
                        // itemStyle: {color: 'gray', opacity: 0.2}
                    })
                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                }
                if (qita_index[1].indexOf(i) > -1) {
                    data_1.push({value: [Math.abs(corr_yu[i][1]), corr_yu[i][1]], name: qita_column[i]})
                } else {
                    data_1.push({
                        value: [0, corr_yu[i][1]],
                        name: qita_column[i],
                        // itemStyle: {color: 'gray', opacity: 0.2}
                    })
                }
                if (qita_index[2].indexOf(i) > -1) {
                    data_2.push({value: [Math.abs(corr_yu[i][2]), corr_yu[i][2]], name: qita_column[i]})
                } else {
                    data_2.push({
                        value: [0, corr_yu[i][2]],
                        name: qita_column[i],
                        // itemStyle: {color: 'gray', opacity: 0.2}
                    })
                }
            }

            for (var i = 0; i < biwen_column.length; i++) {
                if (bi_index[0].indexOf(i) > -1) {
                    if(biwen_column[i].indexOf('高温过热器')!=-1){
                        bili[0]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('后墙隔墙')!=-1){
                        bili[1]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('低温过热器')!=-1){
                        bili[2]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('水冷')!=-1 && biwen_column[i].indexOf('垂')!=-1){
                        bili[3]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('水冷')!=-1 && biwen_column[i].indexOf('螺')!=-1){
                        bili[4]+=Math.abs(corr_xv[i][0])
                    }
                    bili_sum+=Math.abs(corr_xv[i][0])
                    // data_0.push({value: [Math.abs(corr_xv[i][0]), corr_xv[i][0]], name: biwen_column[i]})
                    // data_1.push({value: [1,corr_xv[i][1]], name: biwen_column[i]})
                    // data_2.push({value: [1,corr_xv[i][2]], name: biwen_column[i]})
                } else {
                    // data_0.push({
                    //     value: [0, corr_xv[i][0]],
                    //     name: biwen_column[i],
                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                    // })
                    // data_1.push({value: [1,corr_xv[i][1]], name: biwen_column[i],itemStyle:{color:'gray',opacity:0.2}})
                    // data_2.push({value: [1,corr_xv[i][2]], name: biwen_column[i],itemStyle:{color:'gray',opacity:0.2}})
                }
                if (bi_index[1].indexOf(i) > -1) {
                    if(biwen_column[i].indexOf('高温过热器')!=-1){
                        bili_1[0]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('后墙隔墙')!=-1){
                        bili_1[1]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('低温过热器')!=-1){
                        bili_1[2]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('水冷')!=-1 && biwen_column[i].indexOf('垂')!=-1){
                        bili_1[3]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('水冷')!=-1 && biwen_column[i].indexOf('螺')!=-1){
                        bili_1[4]+=Math.abs(corr_xv[i][0])
                    }
                    bili_sum_1+=Math.abs(corr_xv[i][0])
                    // data_1.push({value: [Math.abs(corr_xv[i][1]), corr_xv[i][1]], name: biwen_column[i]})
                } else {
                    // data_1.push({
                    //     value: [0, corr_xv[i][1]],
                    //     name: biwen_column[i],
                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                    // })
                }
                if (bi_index[2].indexOf(i) > -1) {
                    if(biwen_column[i].indexOf('高温过热器')!=-1){
                        bili_2[0]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('后墙隔墙')!=-1){
                        bili_2[1]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('低温过热器')!=-1){
                        bili_2[2]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('水冷')!=-1 && biwen_column[i].indexOf('垂')!=-1){
                        bili_2[3]+=Math.abs(corr_xv[i][0])
                    }
                    else if(biwen_column[i].indexOf('水冷')!=-1 && biwen_column[i].indexOf('螺')!=-1){
                        bili_2[4]+=Math.abs(corr_xv[i][0])
                    }
                    bili_sum_2+=Math.abs(corr_xv[i][0])
                    // data_2.push({value: [Math.abs(corr_xv[i][2]), corr_xv[i][2]], name: biwen_column[i]})
                } else {
                    // data_2.push({
                    //     value: [0, corr_xv[i][2]],
                    //     name: biwen_column[i],
                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                    // })
                }
            }
            for (var i=0;i<bili.length;i++){
                bili[i]=bili[i]/bili_sum
                data_0_1.push({
                    value: bili[i],
                    name: bili_name[i],
                    itemStyle: {color: peise[i]}
                })
                bili_1[i]=bili_1[i]/bili_sum_1
                data_1_1.push({
                    value: bili_1[i],
                    name: bili_name[i],
                    itemStyle: {color: peise[i]}
                })
                bili_2[i]=bili_2[i]/bili_sum_2
                data_2_1.push({
                    value: bili_2[i],
                    name: bili_name[i],
                    itemStyle: {color: peise[i]}
                })
            }
            var option_0 = {
                tooltip: {
                    trigger: 'item',
                    position: [-20, -30],
                    formatter: function (par) {
                        if(par.componentIndex==0){
                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                        }
                        else{
                            return par.data.name + ": " + par.data.value.toFixed(3)
                        }
                        // return par.data.name + ": " + par.data.value[1].toFixed(2)
                    },
                    textStyle: {
                        fontSize: 12
                    }
                },
                visualMap: {
                    seriesIndex:0,
                    dimension: 0,
                    show: false,
                    max: 1,
                    min: -1,
                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['50%', '100%'],
                        roseType: 'area',
                        avoidLabelOverlap: false,
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: [10, -0.5], name: '搜索引擎'},
                            {value: [10, 0.3], name: '直接访问'},
                            {value: [10, 0.5], name: '邮件营销'},
                            {value: [10, 0.8], name: '联盟广告'},
                            {value: [10, 1], name: '视频广告'}
                        ]
                    },
                    {
                        name: '比例',
                        type: 'pie',
                        // selectedMode: 'single',
                        radius: [0, '40%'],
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: data_0_1
                    },
                ]
            };
            var option_1 = {
                tooltip: {
                    trigger: 'item',
                    position: [-80, -30],
                    formatter: function (par) {
                        if(par.componentIndex==0){
                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                        }
                        else{
                            return par.data.name + ": " + par.data.value.toFixed(3)
                        }
                    },
                    textStyle: {
                        fontSize: 12
                    }
                },
                visualMap: {
                    seriesIndex:0,
                    dimension: 0,
                    show: false,
                    max: 1,
                    min: -1,
                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['50%', '100%'],
                        avoidLabelOverlap: false,
                        roseType: 'area',
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: [10, -0.5], name: '搜索引擎'},
                            {value: [10, 0.3], name: '直接访问'},
                            {value: [10, 0.5], name: '邮件营销'},
                            {value: [10, 0.8], name: '联盟广告'},
                            {value: [10, 1], name: '视频广告'}
                        ]
                    },
                    {
                        name: '比例',
                        type: 'pie',
                        // selectedMode: 'single',
                        radius: [0, '40%'],
                        label: {
                            show:false,
                            position: 'inner',
                            fontSize: 14,
                        },
                        labelLine: {
                            show: false
                        },
                        data: data_1_1
                    },
                ]
            };
            var option_2 = {
                tooltip: {
                    trigger: 'item',
                    position: [-180, -30],
                    formatter: function (par) {
                        if(par.componentIndex==0){
                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                        }
                        else{
                            return par.data.name + ": " + par.data.value.toFixed(3)
                        }
                    },
                    textStyle: {
                        fontSize: 12
                    }
                },
                visualMap: {
                    seriesIndex:0,
                    dimension: 0,
                    show: false,
                    max: 1,
                    min: -1,
                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['50%', '100%'],
                        avoidLabelOverlap: false,
                        roseType: 'area',
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: false,
                                fontSize: '40',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: [10, -0.5], name: '搜索引擎'},
                            {value: [10, 0.3], name: '直接访问'},
                            {value: [10, 0.5], name: '邮件营销'},
                            {value: [10, 0.8], name: '联盟广告'},
                            {value: [10, 1], name: '视频广告'}
                        ]
                    },
                    {
                        name: '比例',
                        type: 'pie',
                        // selectedMode: 'single',
                        radius: [0, '40%'],
                        label: {
                            show:false,
                            position: 'inner',
                            fontSize: 14,
                        },
                        labelLine: {
                            show: false
                        },
                        data: data_2_1
                    },
                ]
            };
            option_0.series[0].data = data_0
            option_1.series[0].data = data_1
            option_2.series[0].data = data_2
            myChart_0.setOption(option_0, true)
            myChart_1.setOption(option_1, true)
            myChart_2.setOption(option_2, true)
        }
    }
    function render() {
        myResponsiveComponent({
            width: document.body.clientWidth,
            height: document.body.clientHeight,
        });
    }

    render();

    window.addEventListener('resize', render);

    // Tooltip
    $(document).ready(function(){
        $("[rel='tooltip']").tooltip();
        $("#cluster_switch").on('click', function(){
            // alert('计算中')
            // $('#load_note').show()
            Cluster_View()
        });
    });

    // $(document).ready(function(){
    //     $("#ExecuteBut").click(function(){
    //         var mode = document.getElementById('param-EX-view').value
    //         mode = parseInt(mode)
    //
    //         if (mode == 1) {
    //             $("#myModal").modal('show');
    //             $('.modal-backdrop').removeClass("modal-backdrop");
    //         }
    //     });
    // });

    function closeModalFun () {
        $('#myModal').modal('hide');
    }

    // $("#cost").html('(Ov. Cost: ?)');
    // $("#datasetDetails").html('(Num. of Dim. and Ins.: ?)');
    $("#CategoryName").html('No labels');
    $("#knnBarChartDetails").html('(Num. of Selected Points: 0/0)');
    /* This script is used in order to give functionalities to the different buttons provide through the front-end. */
    $('#param-lim').bind('input', function () { $('#param-lim-value').text($('#param-lim').val()); });
    $('#param-corr').bind('input', function () { $('#param-corr-value').text($('#param-corr').val()); });
    $('#param-corr2').bind('input', function () { $('#param-corr-value2').text($('#param-corr2').val()); });
    $('#param-corlim').bind('input', function () { $('#param-corlim-value').text($('#param-corlim').val()); });
    $('#param-costlim').bind('input', function () { $('#param-costlim-value').text($('#param-costlim').val()); });
    $('#param-n_cluster_max').bind('input', function () { $('#param-n_cluster_max-value').text($('#param-n_cluster_max').val()); });
    $('#param-earlyexag').bind('input', function () { $('#param-earlyexag-value').text($('#param-earlyexag').val()); });
    $('#param-n_cluster_min').bind('input', function () { $('#param-n_cluster_min-value').text($('#param-n_cluster_min').val()); });
    $('#param-interval').bind('input', function () { $('#param-interval-value').text($('#param-interval').val()+'s'); });
    $('#param-interval2').bind('input', function () { $('#param-interval-value2').text($('#param-interval2').val()+'s'); });
    $('#param-maxthreshold').bind('input', function () { $('#param-maxthreshold-value').text($('#param-maxthreshold').val()); });
    $('#param-minthreshold').bind('input', function () { $('#param-minthreshold-value').text($('#param-minthreshold').val()); });
    $('#param-maxiter').bind('input', function () { $('#param-maxiter-value').text($('#param-maxiter').val()); });
    $('#param-size').bind('input', function () { $('#param-size-value').text($('#param-size').val()); });

    // Get the container element
    var btnContainer = document.getElementById("commBtn"); //Add a new comment button

    // Get all buttons with class="btn" inside the container
    var btns = btnContainer.getElementsByClassName("btn");
    for (var i = 0; i < btns.length; i++) {
        btns[i].addEventListener("click", function() {
            let current = document.getElementById("commBtn").getElementsByClassName("active");
            current[0].className = current[0].className.replace("btn btn-default active", "btn btn-default");
            this.className += " active";
        });
    }

    // Get the container element
    var btnContainer2 = document.getElementById("resetAllFilters"); //resetAllFilters button

    // Get all buttons with class="btn" inside the container
    var btns2 = btnContainer2.getElementsByClassName("btn");

    for (var i = 0; i < btns2.length; i++) {
        btns2[i].addEventListener("click", function() {
            let current = document.getElementsByClassName("active");
            current[1].className = current[1].className.replace("btn btn-info active", "btn btn-info");
            this.className += " active";
        });
    }

    /* On resize refresh the shepardHeatmap */
    window.onresize = function(event) {
        if ( document.getElementById('cost').hasChildNodes() ) {

            // Clear legend for the shepardHeatmap
            //var svgLegend = d3.select("#legend3");
            //svgLegend.selectAll("*").remove();

            // Clear the SheapHeardmap before refreshing
            //var svg = d3.select("#sheparheat");
            //svg.selectAll("*").remove();

            // Call the ShepardHeatmap again to be redrawn
            //ShepardHeatMap();
            MainVisual();

        }
    }

    /* When the user clicks on the button,
    toggle between hiding and showing the dropdown content */
    function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
    }

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
        if (!event.target.matches('.dropbtn')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }
    var domxgx = document.getElementById("xgxtu");
    var myChartxgx = echarts.init(domxgx, null, {renderer: 'svg'});
    var domtuli = document.getElementById("tuli");
    var myCharttuli = echarts.init(domtuli, null, {renderer: 'svg'});
    var dom1 = document.getElementById("container1");
    var myChart1 = echarts.init(dom1, null, {renderer: 'svg'});
    var dom2 = document.getElementById("container2");
    var myChart2 = echarts.init(dom2, null, {renderer: 'svg'});
    var dom3 = document.getElementById("container3");
    var myChart3 = echarts.init(dom3, null, {renderer: 'svg'});
    var dom4 = document.getElementById("container4");
    var myChart4 = echarts.init(dom4, null, {renderer: 'svg'});
    var dom5 = document.getElementById("container5");
    var myChart5 = echarts.init(dom5, null, {renderer: 'svg'});
    var dom5_tu = document.getElementById("container5_tuli");
    var myChart5_tu = echarts.init(dom5_tu, null, {renderer: 'svg'});
    var dom5_2 = document.getElementById("container5_2");
    var myChart5_2 = echarts.init(dom5_2, null, {renderer: 'svg'});
    var dom_m2 = document.getElementById("m2");
    var myChart_m2 = echarts.init(dom_m2, null, {renderer: 'svg'});
    var dom7 = document.getElementById("container7");
    var myChart7 = echarts.init(dom7, null, {renderer: 'svg'});
    // var dom7_8 = document.getElementById("container7_8");
    // var myChart7_8 = echarts.init(dom7_8, null, {renderer: 'svg'});
    var dom8 = document.getElementById("container8");
    var myChart8 = echarts.init(dom8, null, {renderer: 'svg'});
    var dom9 = document.getElementById("container9");
    var myChart9 = echarts.init(dom9, null, {renderer: 'svg'});
    var dom10 = document.getElementById("container10");
    var myChart10 = echarts.init(dom10, null, {renderer: 'svg'});
    var dom11 = document.getElementById("container11");
    var myChart11 = echarts.init(dom11, null, {renderer: 'svg'});
    var dom12 = document.getElementById("container12");
    var myChart12 = echarts.init(dom12, null, {renderer: 'svg'});
    var domlegend1 = document.getElementById("legend1");
    var mylegend1= echarts.init(domlegend1, null, {renderer: 'svg'});
    var domlegend2 = document.getElementById("legend2");
    var mylegend2= echarts.init(domlegend2, null, {renderer: 'svg'});


    var option1 = {
        tooltip: {
            trigger: 'axis',
            backgroundColor: 'rgba(255, 255, 255, 0.8)',
            position: function (pos, params, el, elRect, size) {
                var obj = {top: 10};
                obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;
                return obj;
            },
            extraCssText: 'width: 170px',
            formatter:function (params){
                // console.log(params)
                function sortId(a,b){
                    return b.value[1]-a.value[1]
                }
                params.sort(sortId);
                var relVal='Cluster_'+params[0].axisValue
                for (var i = 0, l = params.length; i < l; i++) {
                    relVal += '<br/>' + params[i].marker + params[i].seriesName + ' : ' + params[i].data[1]
                }
                return relVal
            }
        },
        legend: {
            right:'10%',
            // data: []
        },
        grid: {
            left: '3%',
            right: '3%',
            bottom: '3%',
            // width:'100%',
            // height:'100%',
            containLabel: true
        },
        // toolbox: {
        //     feature: {
        //         saveAsImage: {}
        //     }
        // },
        xAxis: {
            type: 'value',
            max:10,
            min:2,
            interval:1,
            // boundaryGap: false,
            // data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
        },
        yAxis: {
            type: 'value'
        },
        series: []
    };
    var option2 = {
        title:{
            text:"HTS",
            x:"center",
            // y:"3px",
            textStyle:{
                fontSize:13
            }
        },
        toolbox: {
            top:0,
            left:0,
            orient:'vertical'
        },
        brush: {
            toolbox:['rect', 'clear'],
            brushLink: 'all',
            xAxisIndex: [0],
            yAxisIndex: [0],
            throttleType:'debounce',
            throttleDelay:2000,
            inBrush: {
                colorAlpha: 1,
                opacity:1
            },
            brushStyle:{
                borderWidth: 1,
                color: 'rgba(120,140,180,0.3)',
                borderColor: 'rgba(120,140,180,0.8)'
            },
            outOfBrush: {
                // colorAlpha: 0.1,
                opacity:0.3
            }
        },
        grid:{
            left: '18%',
            right: '8%',
            // bottom: '5%',
            top:'18%',
            // width:'100%',
            height:'72%',
            containLabel: false
        },
        yAxis:{
            splitNumber: 3,
            // position: 'right',
            type: 'category',
            gridIndex: 0,
            scale: true,
            //给图片添加网格线
            splitLine:{
                show:true
            }
        },
        xAxis:{
            // max:65,
            // min:0,
            // splitNumber: 3,
            // position: 'top',
            type: 'category',
            gridIndex: 0,
            scale: true,
            splitLine:{
                show:true
            }
        },
        tooltip: {
            backgroundColor: 'rgba(255, 255, 255, 0.8)',
            position: function (pos, params, el, elRect, size) {
                var obj = {top: 10};
                obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;
                return obj;
            },
            formatter: function(param) {
                // console.log("s",param)
                return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 12px;padding-bottom: 2px;margin-bottom: 2px;"> ' + param.data[2] +
                        '</div>';
            }
        },

        visualMap: {
            show: true,
            min: -0.009,
            max: 0.012,
            type:'continuous',
            itemWidth:10,
            itemHeight:40,
            dimension: 3,
            calculable: true,
            realtime: true,
            left:0,
            align:'top',
            inRange: {
                color: ['#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                // color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
            },
            textStyle:{
                fontSize:10
            },
            seriesIndex:[0]
        },

        series: [
            {
                type: 'scatter',
                symbolSize: 8,
                xAxisIndex: 0,
                yAxisIndex: 0,
                data: [],
                symbol:'rect',
                itemStyle:{
                    normal : {
                        color: function(params) {
                            var colorList = [
                                '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
                                '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
                                '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
                            ];
                            return colorList[1]
                        }
                    },
                    emphasis:{
                        itemStyle: {
                            // 高亮时点的颜色
                            color: 'red'
                        },
                    }
                }
            }
        ]
    };
    var option3 = {
        title:{
            text:"",
            x:"center",
            // y:"3px",
            textStyle:{
                fontSize:12
            }
        },
        grid:{
            left: '4%',
            right: '4%',
            bottom: '3%',
            top:'15%',
            // width:'100%',
            // height:'100%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: []
        },
        dataZoom:[
                {
                    type: 'inside', // 使鼠标在图表中时滚轮可用
                    xAxisIndex:[0],
                },
        ],
        tooltip:{
            formatter:function (params){
                // console.log(params)
                return [
                    // '类别名称: ' + param.seriesName,
                    '时间: ' + params.name,
                    '数值: ' + params.data.toFixed(2),
                ].join('<br/>')
            }
        },
        yAxis: {
            type: 'value',
            axisLine:{
                show:true
            },
            max: function (value) {
                return parseInt(value.max+1);
            },
            min: function (value) {
                return parseInt(value.min-1);
            }
        },
        series: [{
            data: [],
            type: 'line'
        }]
    };
    var option4 = {
        tooltip: {
            show: true,
            trigger: 'axis',
            axisPointer: {
                type: 'shadow',
            },
        },
        legend: {
            left: 'center',
            bottom: 0,
            itemWidth: 15,
            itemHeight: 11,
            itemGap: 20,
            borderRadius: 4,
            textStyle: {
                color: '#262C41',
                fontSize: 14,
            },
            // data: legendData,
        },
        grid: [
            {
                left: '5%',
                width: '40%',
                containLabel: true,
                bottom:30,
                top:10
            },
            {
                left: '52%',
                width: '0%',
                bottom: 30 + 16,
                top:10
            },
            {
                right: '5%',
                width: '40%',
                containLabel: true,
                bottom:30,
                top:10
            },
        ],
        xAxis: [
            {
                type: 'value',
                inverse: true,
                max:1,
                axisLabel: {
                    show: true,
                },
                axisLine: {
                    show: false,
                },
                axisTick: {
                    show: false,
                },
                splitLine: {
                    show: true,
                },
                axisLabel: {
                    color: '#949AA8',
                    margin: 0,
                },
                splitLine: {
                    lineStyle: {
                        color: '#E0E0E0',
                        type: 'dashed',
                    },
                },
            },
            {
                gridIndex: 1,
                show: true,
                max:1,
                axisLabel: {
                    color: '#949AA8',
                    margin: 0,
                },
                splitLine: {
                    lineStyle: {
                        color: '#E0E0E0',
                        type: 'dashed',
                    },
                },
            },
            {
                gridIndex: 2,
                type: 'value',
                max:1,
                axisLabel: {
                    show: true,
                },
                axisLine: {
                    show: false,
                },
                axisTick: {
                    show: false,
                },
                splitLine: {
                    show: true,
                },
                axisLabel: {
                    color: '#949AA8',
                    margin: 0,
                },
                splitLine: {
                    lineStyle: {
                        color: '#E0E0E0',
                        type: 'dashed',
                    },
                },
            },
        ],
        yAxis: [
            {
                type: 'category',
                inverse: false,
                axisLine: {
                    lineStyle: {
                        color: '#E0E0E0',
                    },
                },
                axisTick: {
                    show: false,
                },
                data: [1,2,3,4],
                position: 'right',
                axisLabel: {
                    show: false,
                },
                axisLine: {
                    show: true,
                },
            },
            {
                type: 'category',
                inverse: false,
                axisLine: {
                    lineStyle: {
                        color: '#E0E0E0',
                    },
                },
                axisTick: {
                    show: false,
                },
                data: [1,2,3,4],
                gridIndex: 1,
                position: 'center',
                axisLabel: {
                    align: 'center',
                    padding: [8, 0, 0, 0],
                    fontSize: 10,
                    color: `#262C41`,
                },
                axisLine: {
                    show: false,
                },
            },
            {
                type: 'category',
                inverse: false,
                axisLine: {
                    lineStyle: {
                        color: '#E0E0E0',
                    },
                },
                axisTick: {
                    show: false,
                },
                data: [1,2,3,4],
                gridIndex: 2,
                position: 'left',
                axisLabel: {
                    show: false,
                },
                axisLine: {
                    show: true,
                },
            },
        ],
        series: [
            {
                type: 'bar',
                barWidth: 11,
                stack: '总量1',
                name:'U-x',
                label: {
                    show:false,
                    position: 'left',
                },
                itemStyle: {
                    color: '#45a776',
                    barBorderRadius: [4, 0, 0, 4],
                },
                data: [1,2,3,4],
            },
            {
                type: 'bar',
                barWidth: 11,
                stack: '总量1',
                name: 'V-x',
                label: {
                    show:false,
                    position: 'left',
                },
                itemStyle: {
                    color: '#009db2',
                    barBorderRadius: [4, 0, 0, 4],
                },
                data:[1,2,3,4],
            },
            {
                type: 'bar',
                barWidth: 11,
                xAxisIndex: 2,
                yAxisIndex: 2,
                name: 'U-y',
                stack: '总量2',
                label: {
                    show:false,
                    position: 'right',
                },
                itemStyle: {
                    color: '#45a776',
                    barBorderRadius: [0, 4, 4, 0],
                },
                data: [1,2,3,4],
            },
            {
                type: 'bar',
                barWidth: 11,
                xAxisIndex: 2,
                yAxisIndex: 2,
                name: 'V-y',
                stack: '总量2',
                label: {
                    show:false,
                    position: 'right',
                },
                itemStyle: {
                    color: '#009db2',
                    barBorderRadius: [0, 4, 4, 0],
                },
                data: [1,2,3,4],
            },
        ],
    };

    var peise2=['#0780cf','#765005','#fa6d1d','#0e2c82','#b6b51f','#da1f18','#701866','#f47a75'];
    var option5_tu = {
        tooltip: {
            trigger: 'axis'
        },
        legend: [
            {
                // top:'middle',
                // x:'center',
                // textStyle:{
                //     fontSize:13
                // },
                // icon:'roundRect',
                itemWidth: 10,
                itemHeight: 13,
                data:['UV1','UV2','UV3','UV4','UV5','UV6','UV7','UV8'],
                selected:{
                    'UV1':true,
                    'UV2':true,
                    'UV3':false,
                    'UV4':false,
                    'UV5':false,
                    'UV6':false,
                    'UV7':false,
                    'UV8':false,
                }
            },
            // {
            //     x:'center',
            //     top:'20',
            //     textStyle:{
            //         fontSize:13
            //     },
            //     data:[],
            //     icon:'roundRect',
            //     itemWidth: 18,
            //     itemHeight: 13,
            // }
        ],
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            show:false,
            type: 'category',
            boundaryGap: false,
            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
        },
        yAxis: {
            show:false,
            type: 'value'
        },
        series: [
            {
                name: 'UV1',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[0]
                }
            },
            {
                name: 'UV2',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[1]
                }
            },
            {
                name: 'UV3',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[2]
                }
            },
            {
                name: 'UV4',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[3]
                }
            },
            {
                name: 'UV5',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[4]
                }
            },
            {
                name: 'UV6',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[5]
                }
            },
            {
                name: 'UV7',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[6]
                }
            },
            {
                name: 'UV8',
                type: 'scatter',
                data: [],
                itemStyle:{
                    color:peise2[7]
                }
            },
        ]
    };

    var option5 = {
        backgroundColor: "#fff",
        tooltip: {
            trigger: 'axis',
            show: false,
        },
        dataZoom:[
            {
                type: 'inside',
            }
        ],
        tooltip: {
            formatter: function(param) {
                // console.log("param",param)
                return 'Correlation：'+param.data[1].toFixed(3)+'<br>'+'Var(u)：'+param.data[3].toFixed(2)+'<br>'+'Mean(u)：'+param.data[5].toFixed(2)+'<br>'+'Var(v)：'+param.data[4].toFixed(2)+'<br>'+'Mean(v)：'+param.data[6].toFixed(2)
            }
        },
        legend: {
            show: false,
            icon: 'circle',
            top: 0,
            textStyle: {
                fontSize: 13,
                // color: 'blc'
            },
            selected:{},
        },
        grid: {
            left: '5%',
            right: '5%',
            top: '20%',
            bottom: '6%',
            containLabel: true
        },
        xAxis: {
            type:'category',
            position:'bottom',
            axisLine: {
                onZero: false
            },
            // axisTick: {
            //     show: false
            // },
            // // axisLabel: {
            // //     precision:0
            // //     // interval: 0,
            // // },
            // splitLine:{
            //     show:false
            // }
            // data: ['A', 'B', 'C', 'D', 'E', 'F', 'G']
        },
        yAxis: {
            type:'value',
            max:1,
            min:-1,
            splitNumber:2,
            axisLine: {
                show: true,
            },
            axisTick: {
                show: true
            },
            splitLine:{
                show:true
            }
        },
        series: []
    };
    var option5_2 = {
        legend:{
            top: 10,
        },
        title:{
            text:'',
            left:'center',
            top:-5,
            textStyle:{
                fontSize:12
            }
        },
        grid: {
            left: '3%',
            right: '0%',
            top: '20%',
            bottom: '5%',
            containLabel: true
        },
        tooltip: {
                formatter: function(param) {
                    return param.name+'<br>'+param.data[1].toFixed(2)
                }
        },
        dataZoom:[
            {
                type: 'inside',
            }
        ],
        xAxis: {
            type: 'category',
            data:[],
            axisLine: {
                onZero: false
            },
            // axisLabel:{
            //     show:false
            // },
            // axisLine: {
            //     show: true,
            // },
            // axisTick: {
            //     show: true
            // },
            // splitLine:{
            //     show:true
            // }
        },
        yAxis: [
            {
            type: 'value',
            axisLine: {
                show: true,
            },
            axisTick: {
                show: true
            },
            splitLine:{
                show:true
            },
            max: function (value) {
                return parseInt(value.max+5);
                },
            min: function (value) {
                return parseInt(value.min-5);
                },
            },
            {
                type: 'value',
                splitLine:{
                    show:false
                },
                max: function (value) {
                    return parseInt(value.max+1);
                },
                min: function (value) {
                    return parseInt(value.min-1);
                },
            },
        ],
        series: [
            {
                name:'MW',
                data: [150, 230, 224, 218, 135, 147, 260],
                type: 'line',
                itemStyle:{
                    color:'#3366ff'
                }
            },
            {
                // name:'mw',
                data: [],
                type: 'line',
                itemStyle:{
                    color:'#e30039'
                }

            },
            {
                name:'U',
                data: [],
                type: 'line',
                yAxisIndex: 1,
                itemStyle:{
                    color:'#45a776'
                }
            },
            {
                name:'V',
                data: [],
                type: 'line',
                yAxisIndex: 1,
                itemStyle:{
                    color:'#009db2'
                }
            },
            {
                // name:'u',
                data: [],
                type: 'line',
                yAxisIndex: 1,
                itemStyle:{
                    color:'#e30039'
                }
            },
            {
                // name:'v',
                data: [],
                type: 'line',
                yAxisIndex: 1,
                itemStyle:{
                    color:'#e30039'
                }
            },
        ]
    };
    // var option5 = {
    //     tooltip: {
    //         formatter: function(param) {
    //             console.log("s",param)
    //             if (param.componentSubType=='line'){
    //                 // var value = param.value;
    //                 return [
    //                     // '类别名称: ' + param.seriesName,
    //                     param.seriesName,
    //                     param.name,
    //                     '系数: ' + param.data.toFixed(2),
    //                 ].join('<br/>')
    //                 // return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 16px;padding-bottom: 7px;margin-bottom: 7px;"> ' + value[2] +
    //                 //     '</div>';
    //             }
    //             else if (param.componentSubType=="radar"){
    //                 // var value = param.value;
    //                 return [
    //                     // '类别名称: ' + param.seriesName,
    //                     param.data.name+'相关性: ' + param.value[0].toFixed(2),
    //                     '卡方计算值: ' + param.value[1].toFixed(2),
    //                     '卡方临界: ' + param.value[2].toFixed(2),
    //                 ].join('<br/>')
    //             }
    //         }
    //     },
    //     legend: {
    //         left: 'left',
    //         top: '0%',
    //         itemWidth: 15,
    //         itemHeight: 11,
    //         itemGap: 20,
    //         borderRadius: 4,
    //         textStyle: {
    //             color: '#262C41',
    //             fontSize: 14,
    //         },
    //         // data: legendData,
    //     },
    //     grid:[
    //         {
    //             bottom: '30%',
    //             height:'20%',
    //             width:'90%'
    //         },
    //         {
    //             bottom:'5%',
    //             height:'20%',
    //             width:'90%'
    //         },
    //     ],
    //     xAxis: [
    //         {
    //             type: 'category',
    //             data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
    //             gridIndex:0,
    //             axisLabel:{
    //                 show:false
    //             },
    //             axisTick:{
    //                 show:false
    //             }
    //
    //         },
    //         {
    //             type: 'category',
    //             data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
    //             gridIndex:1,
    //             axisLabel:{
    //                 show:false
    //             },
    //             axisTick:{
    //                 show:false
    //             }
    //         },
    //     ],
    //     yAxis: [
    //         {
    //             type: 'value',
    //             gridIndex:0,
    //             splitNumber:2
    //         },
    //         {
    //             type: 'value',
    //             gridIndex:1,
    //             splitNumber:2
    //         },
    //     ],
    //     radar: {
    //         center: ['50%', '30%'],
    //         radius: 50,
    //         // shape: 'circle',
    //         indicator: [
    //             { name: 'uv相关性', },
    //             { name: '卡方计算值', },
    //             { name: '卡方临界值', },
    //         ],
    //         name: {
    //             textStyle: {
    //                 padding: [-10, -12]  // 控制文字padding
    //             }
    //         }
    //     },
    //     series: [
    //         {
    //             data: [150, 230, 224, 218, 135, 147, 260],
    //             type: 'line',
    //             name: '第1组',
    //             xAxisIndex:0,
    //             yAxisIndex:0
    //         },
    //         {
    //             data: [150, 230, 224, 218, 135, 147, 260],
    //             type: 'line',
    //             name: '第2组',
    //             xAxisIndex:1,
    //             yAxisIndex:1
    //         },
    //         {
    //             name: '预算 vs 开销（Budget vs spending）',
    //             type: 'radar',
    //             data: [
    //                 {
    //                     value: [4200, 3000, 20000],
    //                     name: '第1组'
    //                 },
    //                 {
    //                     value: [5000, 14000, 28000],
    //                     name: '第2组'
    //                 }
    //             ],
    //         },
    //     ]
    // };

    var option6 = {
        grid:{
            // height:40px,
            width:'100%',
        },
        yAxis: {
            type: 'category',
            axisLabel: {
                show: false,
            },
            axisLine: {
                show: false,
            },
            axisTick: {
                show: false,
            },
            splitLine: {
                show: false,
            },
        },
        xAxis: {
            type: 'value',
            axisLabel: {
                show: false,
            },
            axisLine: {
                show: false,
            },
            axisTick: {
                show: false,
            },
            splitLine: {
                show: false,
            },
            max:1
        },
        series: [
        {
            data: [0.5],
            type: 'bar',
            itemStyle:{
                // color:'gray'
            },
            barWidth:10
        },
        {
            data: [0.5],
            type: 'bar',
            itemStyle:{
                // color:'red'
            },
            barWidth:10
        }
        ]
    };
    // var option6_2 = {
    //     tooltip:{
    //         formatter:function (params){
    //             // console.log("1",params)
    //             return params.data[1]
    //         }
    //     },
    //     //singleAxis 是 ECharts 中的单轴。它可以被应用到散点图中展现一维数据
    //     singleAxis:{
    //         show:false,
    //         axisLabel:{
    //             show:false
    //         },
    //         axisLine:{
    //             show:false
    //         },
    //         axisTick:{
    //             show:false
    //         },
    //         // left: 10,
    //         type: 'category',
    //         data:new Array(8).fill(i++),
    //         boundaryGap: false,
    //         // top: (0 * 100 / 7 + 5) + '%',
    //         // height: (100 / 7 - 10) + '%',
    //     },
    //     series: [
    //         {
    //             name:'output_cluster',
    //             singleAxisIndex: 0,
    //             coordinateSystem: 'singleAxis',
    //             symbolSize: 5,
    //             data: new Array(8).fill(i++),
    //             type: 'scatter',
    //             itemStyle:{
    //                 // color:'gray',
    //                 opacity:1
    //             },
    //             emphasis:{
    //                 scale:true,
    //                 itemStyle:{
    //                     color: 'red',
    //                     borderWidth:100
    //                 }
    //             },
    //         },
    //     ]
    // };
    // var option6_3 = {
    //     tooltip:{
    //         formatter:function (params){
    //             // console.log("1",params)
    //             return params.data[1]
    //         }
    //     },
    //     //singleAxis 是 ECharts 中的单轴。它可以被应用到散点图中展现一维数据
    //     singleAxis:{
    //         show:false,
    //         axisLabel:{
    //             show:false
    //         },
    //         axisLine:{
    //             show:false
    //         },
    //         axisTick:{
    //             show:false
    //         },
    //         // left: 10,
    //         type: 'category',
    //         data:new Array(34).fill(i++),
    //         boundaryGap: false,
    //         // top: (0 * 100 / 7 + 5) + '%',
    //         // height: (100 / 7 - 10) + '%',
    //     },
    //     series: [
    //         {
    //             name:'output_cluster',
    //             singleAxisIndex: 0,
    //             coordinateSystem: 'singleAxis',
    //             symbolSize: 5,
    //             data: new Array(34).fill(i++),
    //             type: 'scatter',
    //             symbol:'rect',
    //             itemStyle:{
    //                 // color:'gray',
    //                 opacity:1
    //             },
    //             emphasis:{
    //                 scale:true,
    //                 itemStyle:{
    //                     color: 'red',
    //                     borderWidth:100
    //                 }
    //             },
    //         },
    //     ]
    // };
    var option6_2 = {
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                name: 'Wall_Tem',
                type: 'pie',
                radius: ['70%', '100%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    color:'gray',
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2,
                    opacity:0.2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '40',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: [
                    {value: 1, name: '搜索引擎',itemStyle:{color:'red',opacity:0.8}},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '视频广告',itemStyle:{color:'red',opacity:0.8}},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '视频广告'},
                ]
            },
        ]
    };
    var option6_3 = {
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                name: 'Factors',
                type: 'pie',
                radius: ['70%', '100%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    color:'gray',
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2,
                    opacity:0.2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '40',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: [
                    {value: 1, name: '搜索引擎',itemStyle:{color:'red',opacity:0.8}},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告',itemStyle:{color:'red',opacity:0.8}},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告',itemStyle:{color:'red',opacity:0.8}},
                    {value: 1, name: '直接访问'},
                    {value: 1, name: '邮件营销'},
                    {value: 1, name: '联盟广告'},
                    {value: 1, name: '视频广告'},
                ]
            },
        ]
    };
    // myChart6.setOption(option6)
    // myChart6_1.setOption(option6)
    // myChart6_2.setOption(option6_2)
    // myChart6_3.setOption(option6_3)
    let jj=0;
    var data7=new Array(25).fill(jj++);
    var option7 = {
        grid:{
            top:5,
            left:30,
            right:47,
            height:'90%',
            // width:'90%',
            // containLabel: true ,
        },
        xAxis: {
            type: 'category',
            // data:data7,
            // data: ['1', '2', '3', '4', '5', '6', '7', '7'],
            axisLabel:{
                show:false
            },
            axisTick:{
                show:false
            },
            // axisLine:{
            //     show:false
            // }
        },
        yAxis: {
            type: 'value',
            max:1
            // splitLine:{
            //     show:false
            // },
            // axisLine:{
            //     show:false
            // },
            // axisTick:{
            //     show:false
            // },
        },
        tooltip:{
            formatter:function (params){
                // console.log("1",params)
                return 'Corr：' + params.data.toFixed(2)
            }
        },

        series: [
        {
            data:new Array(25).fill().map((v, i) => {
                return (Math.random())
            }),
            // data: [
            // 120,
            // {
            //     value: 200,
            //     itemStyle: {
            //         color: '#a90000'
            //     }
            // }, 150, 80, 70, 110, 130, 130,150,100, 150,150, 80, 70, 110, 130, 130,150,100, 150, 80, 70, 110, 130, 130,150],
            type: 'bar'
        }]
    };
    // let jj=0;
    var data8=new Array(22).fill(jj++);
    var option8 = {
        tooltip:{
            formatter:function (params){
                // console.log("1",params)
                return 'Corr：' + params.data.toFixed(2)
            }
        },
        grid:{
            top:5,
            left:40,
            right:64,
            height:'90%',
            // width:'85%',
            // containLabel: true ,
        },
        xAxis: {
            type: 'category',
            // data: data8,
            axisLabel:{
                show:false
            },
            axisTick:{
                show:false
            },
            splitLine:{
                show:false
            },
        },
        yAxis: {
            type: 'value',
            max:1
            // axisLine:{
            //     show:true
            // },
        },
        // tooltip:{
        //     formatter:function (params){
        //         // console.log("1",params)
        //         return params.data
        //     }
        // },
        series: [
            {
                data:new Array(22).fill().map((v, i) => {
                    return (Math.random())
                }),
                // data: [
                //     120,
                //     {
                //         value: 200,
                //         itemStyle: {
                //             color: '#a90000'
                //         }
                //     }, 150, 80, 70, 110, 130, 150, 80, 70, 110, 130, 150, 80, 70, 110, 130, 150, 80, 70, 110, 130, 150, 80, 70, 110, 130, 150, 80, 70, 110, 130,120,220],
                type: 'bar',
                // barCategoryGap : 2,
            }]
    };

    data9=new Array(25).fill(Math.random());
    data10=new Array(22).fill(Math.random());
    // 对应的是壁温参数的小圆点
    var option9 = {
        tooltip:{
            formatter:function (params){
                console.log("1",params)
                return params.data[1]
            }
        },
        //singleAxis 是 ECharts 中的单轴。它可以被应用到散点图中展现一维数据
        singleAxis:{
            show:false,
            axisLabel:{
                show:false
            },
            axisLine:{
                show:false
            },
            axisTick:{
                show:false
            },
            left: 9,
            right: 9,
            type: 'category',
            data:data9,
            boundaryGap: false,
            // top: (0 * 100 / 7 + 5) + '%',
            // height: (100 / 7 - 10) + '%',
        },
        series: [
            {
                name:'output_cluster',
                singleAxisIndex: 0,
                coordinateSystem: 'singleAxis',
                symbolSize: 5,
                data: data9,
                type: 'scatter',
                itemStyle:{
                    // color:'gray',
                    opacity:1
                },
                emphasis:{
                    scale:true,
                    itemStyle:{
                        color: 'red',
                        borderWidth:100
                    }
                },
            },
        ]
    };
    // 对应影响壁温参数的小圆点
    var option10 = {
        tooltip:{
            formatter:function (params){
                console.log("1",params)
                return params.data[1]
            }
        },
        singleAxis:{
            show:false,
            axisLabel:{
                show:false
            },
            axisLine:{
                show:false
            },
            axisTick:{
                show:false
            },
            left: 11,
            right: 11,
            type: 'category',
            data:data10,
            boundaryGap: false,
            // top: (0 * 100 / 7 + 5) + '%',
            // height: (100 / 7 - 10) + '%',
        },
        series: [
            {
                name:'output_cluster',
                singleAxisIndex: 0,
                coordinateSystem: 'singleAxis',
                symbolSize: 5,
                data: data10,
                type: 'scatter',
                itemStyle:{
                    // color:'gray',
                    opacity:1
                },
                emphasis:{
                    scale:true,
                    itemStyle:{
                        color: 'red',
                        borderWidth:100
                    }
                },
            },
        ]
    };
    myChart4.setOption(option4);
    // myChart5.setOption(option5);
    myChart7.setOption(option7);
    // myChart7_8.setOption(option7_8);
    myChart8.setOption(option8);
    myChart9.setOption(option9);
    myChart10.setOption(option10);

    var lineData=[{"x":1,   "y":5},  {"x":20,  "y":20},
        {"x":40,  "y":10},{"x":60,  "y":40},
        {"x":80,  "y":5},  {"x":100,"y":60}];
    var da=[{"source":{"x":0,"y":25},"target":{"x":235,"y":115}},{"source":{"x":10,"y":50},"target":{"x":200,"y":160}}]
    // console.log(da.source.x)
    //线生成器
    var cluster_left_list;
    var cluster_right_list;
    var lineFunction = d3v3.svg.line()
        .x(function(d){return d.x;})
        .y(function(d){return d.y;})
        .interpolate("linear");
    var linear=d3v3.scale.linear()
        .domain([0,1.3])
        .range([0,5]);
    var linear2=d3v3.scale.linear()
        .domain([0,1])
        .range([1,5]);
    var color2 = d3.scaleLinear()
        .domain([-1,0,1])
        .range(['#0d59b7','#ffffbf','#d73027']);
    var color_tu = d3.scaleLinear()
        .domain([300, 660])
        .range(['#f46d43','#0c84c6','#ffa510','#0d59b7','#ffbd66','#f74d4d',]);
    var color = d3.scaleLinear()
        .domain([0, 0.5,0.6,0.7,0.8,0.9,1])
        .range(['#ffffbf','#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']);
    var linear3=d3v3.scale.linear()
        .domain([0,5])
        .range([8,15]);
    var peise=['#f46d43','#0c84c6','#ffa510','#0d59b7','#ffbd66','#f74d4d','#2455a4','#41b7ac','#50c48f']
    // var color2 = d3.scaleLinear()
    //     .domain([0,1])
    //     .range(['#ffffbf','#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']);
    // color=function color(){
    //     let [min, max] = d3.extent(data, d => d.usage);
    //     if (min < 0) {
    //     max = Math.max(-min, max);
    //     return d3.scaleDiverging([-max, 0, max], t => d3.interpolateRdBu(1 - t));
    //     }
    //     return d3.scaleSequential([0, max], d3.interpolateReds);
    // }

    // //svg容器
    // var X = $('#Cluster_right').position().top;
    // var Y = $('#Cluster_right').position().left;
    // console.log(X,Y)
    var svgContainer = d3v3.select("#links").append("svg")
        .attr("width",'100%')
        .attr("height",'100%');
    var svgContainer1 = d3v3.select("#linkss1").append("svg")
        .attr("width",'100%')
        .attr("height",'100%');
    var svgContainer2 = d3v3.select("#linkss3").append("svg")
        .attr("width",'100%')
        .attr("height",'100%');
    var svgContainer3 = d3v3.select("#linkss4").append("svg")
        .attr("width",'100%')
        .attr("height",'100%');
    var tooltips = d3v3.select("#modtSNEDiv")
        .append("div")
        .attr("id","tooltips")
        .style("opacity", 0)
        .attr("class", "tooltip")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("border-radius", "5px")
        .style("padding", "5px")
    var lineGraph = svgContainer.append("g")
    var lineGraph1 = svgContainer1.append("g")
    var lineGraph2 = svgContainer2.append("g")
    var lineGraph3 = svgContainer3.append("g")
    function createLink(d) {
        return "M" + d.source.x + "," + d.source.y
            + "C" + (d.source.x + d.target.x) / 2 + "," + d.source.y
            + " " + (d.source.x + d.target.x) / 2 + "," + d.target.y
            + " " + d.target.x + "," + d.target.y;
    }

    function BatchMse(){
        $("#container8").show()
        $("#container10").show()
        $("#container7").show()
        $("#container9").show()

        $("#container11").hide()
        $("#container12").hide()
    }

    // 将文件展示和融合评价的功能卸载一个函数里 即执行两个Ajax
    function FileVis(){
        $("#container8").hide()
        $("#container10").hide()
        $("#container7").hide()
        $("#container9").hide()

        // 获取所选取的ID文件
        var dataset = document.getElementsByName('save_file_chec');
        // 表示读取的总的文件集 即:所选取测功率文件夹文件
        var wenjian = $('#param-dataset  option:selected').val();
        var position = $('#param-position  option:selected').val();
        var value = new Array();
        // 将选择的文件集添加到 value列表中
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked){
                value.push(dataset[i].value);
            }
        }
        console.log("filename",value)

        $.ajax({
            type:"POST",
            url : "FileVis",
            dataType:"json",
            async:false,
            data:{"filelist":JSON.stringify(value),"wenjian":wenjian},
            success:function (data) {
                var series_file = []
                var yAxis = []
                var legend = []
                console.log("know data",data)
                console.log(data['shuju'].length)
                console.log(data['shuju'][0])
                // 添加图例
                legend.push({
                    data : data['allname'],
                    // right: '15%',
                    // orient: 'vertical',  //垂直显示
                    // y: 'center',         //延Y轴居中
                    // x: 'right',          //居右显示
                    // textStyle:{
                    //     fontSize : 10
                    // }

                })

                for(var i = 0; i < data['shuju'].length; i++){

                    // 动态添加series数据
                    // if(data['allname'][i].indexOf('平均')==-1){
                    //     if(i == 0){
                    //         series_file.push({
                    //             data : data['shuju'][i],
                    //             type : 'line',
                    //             name : data['allname'][i],
                    //             yAxisIndex : 0       // 表示双Y轴展示数据
                    //         })
                    //     }else {
                    //         series_file.push({
                    //             data : data['shuju'][i],
                    //             type : 'line',
                    //             name : data['allname'][i],
                    //             yAxisIndex : i
                    //         })
                    //         // 设置功率的颜色为蓝色
                    //         if(i == data['shuju'].length-1){
                    //             series_file.push({
                    //                 data : data['shuju'][i],
                    //                 type : 'line',
                    //                 name : data['allname'][i],
                    //                 yAxisIndex : i,
                    //                 itemStyle:{
                    //                     color:"#3366ff"
                    //                 }
                    //             })
                    //         }
                    //     }
                    // }
                    if(i == 0){
                        series_file.push({
                            data : data['shuju'][i],
                            type : 'line',
                            name : data['allname'][i],
                            yAxisIndex : 0       // 表示双Y轴展示数据
                        })
                    }else {
                        series_file.push({
                            data : data['shuju'][i],
                            type : 'line',
                            name : data['allname'][i],
                            yAxisIndex : i
                        })
                        // 设置功率的颜色为蓝色
                        if(i == data['shuju'].length-1){
                            series_file.push({
                                data : data['shuju'][i],
                                type : 'line',
                                name : data['allname'][i],
                                yAxisIndex : i,
                                itemStyle:{
                                    color:"#3366ff"
                                }
                            })
                        }
                    }

                    // 动态添加y轴数据
                    if(i == 0){
                        yAxis.push({
                            type: 'value',
                            // axisLine:{
                            //     show:true
                            // },
                            max: function (value) {
                                return parseInt(value.max+1);
                            },
                            min: function (value) {
                                return parseInt(value.min-1);
                            },
                            // splitLine:{
                            //     show:false
                            // },
                        })
                    }else{
                        yAxis.push({
                            type: 'value',
                            // axisLine:{
                            //     show:true
                            // },
                            max: function (value) {
                                return parseInt(value.max+1);
                            },
                            min: function (value) {
                                return parseInt(value.min-1);
                            },
                            show : false,
                        })
                    }
                }

                var option = {
                    grid:{
                        left: '12%',
                        right: '10%',
                        bottom: '20%',
                        // top:'30%',
                        // width:'100%',
                        height:'60%',
                        containLabel: false
                    },
                    xAxis: {
                        type: 'category',
                        data: data['time']
                    },
                    dataZoom:[
                        {
                            type: 'inside', // 使鼠标在图表中时滚轮可用
                            xAxisIndex:[0],
                        },
                    ],
                    legend : legend,
                    tooltip:{
                        formatter:function (params){
                            console.log(params)
                            return [
                                // '类别名称: ' + param.seriesName,
                                'time: ' + params.name,
                                'value: ' + params.data.toFixed(2),
                                'ID:'   + params.seriesName
                            ].join('<br/>')
                        }
                    },
                    yAxis:yAxis,

                    series:series_file
                };
                // for (var i = 0; i < data['shuju'].length; i++) {
                //     option7.series[i].data = data['shuju'][i]
                // }
                console.log("option", option)
                myChart11.setOption(option,true)
            }
        })

        $.ajax({
            type:"POST",
            url :'BatchMse',
            dataType:"json",
            async:false,
            data:{"filelist":JSON.stringify(value),"wenjian":wenjian},
            success:function (data){
                var list = []
                var series = []
                console.log("batchmse option",data)
                // for (var i = 0; i < data['datamselist'].length; i++){
                //     var j = i + 1
                //     list.push("融合"+ j)
                // }
                allname = data['allname']
                series.push({
                    name: 'RMSE',
                    type: 'bar',
                    // stack: 'total',
                    // label: {
                    //     show: true
                    // },
                    emphasis: {
                        focus: 'series'
                    },
                    data: data['datarmselist'],
                    color : '#27727B'
                })
                series.push({
                    name: 'MAE',
                    type: 'bar',
                    // stack: 'total',
                    // label: {
                    //     show: true
                    // },
                    emphasis: {
                        focus: 'series'
                    },
                    data: data['datamaelist'],
                    color : '#60C0DD'
                })
                series.push({
                    name: 'MAPE',
                    type: 'bar',
                    // stack: 'total',
                    // label: {
                    //     show: true
                    // },
                    emphasis: {
                        focus: 'series'
                    },
                    data: data['datamapelist'],
                    color : '#4BC0C0'
                })
                option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {            // Use axis to trigger tooltip
                            type: 'shadow'        // 'shadow' as default; can also be 'line' or 'shadow'
                        }
                    },
                    legend: {
                        data: ['RMSE', 'MAE', 'MAPE'],
                        orient: 'horizontal',
                        // y: 'center',         //延Y轴居中
                        left: '30%',          //居左显示
                    },
                    grid:{
                        left: '12%',
                        right: '10%',
                        bottom: '20%',
                        // top:'30%',
                        // width:'100%',
                        height:'60%',
                        containLabel: false
                    },
                    yAxis: {
                        type: 'value',
                        axisLine: {
                            show: true,
                        },
                        axisTick: {
                            show: true
                        },
                        splitLine:{
                            show:true
                        }
                    },
                    xAxis: {
                        type: 'category',
                        data: allname,
                        axisLabel:{
                            interval:0,
                            // rotate:20,
                            textStyle:{
                                fontSize:11
                            }
                        },
                    },
                    series: series

                };
                console.log("option12",option)
                myChart12.setOption(option)
            }
        })

        $("#container11").show(500)
        $("#container12").show()
    }

    var wenjian = $('#param-dataset  option:selected').val();
    var cluster_max=$('#param-n_cluster_max').val();
    var cluster_min=$('#param-n_cluster_min').val();
    var position=$('#param-position  option:selected').val();
    // 每次刷新页面 执行ajax进行壁温测点和轮廓系数的展示
    $.ajax({
        type:"POST",
        url:"shuaxin",
        dataType:"json",
        data: {"wenjian": wenjian,"cluster_max": cluster_max,"cluster_min": cluster_min,"position":position},
        // async: false,
        success:function (data){
            console.log(data);
            if(data['max'] == 1){
                myChart1.clear()
                myChart2.clear()
            }else{
                // option1 对应聚类轮廓系数视图
                option1.series=ser(data['all_score'],data['cluster_name']);
                // option1.legend=data['cluster_name'];
                option1.xAxis.min=parseInt(cluster_min);
                option1.xAxis.max=cluster_max-1;
                console.log(option1)
                myChart1.setOption(option1)

                // option2 对应二维壁温图
                option2['series'][0]["data"]  = data['erced'];
                option2["visualMap"]["max"]=data["max"];
                option2["visualMap"]["min"]=data["min"];
                myChart2.setOption(option2);
            }
        },
        complete: function (XMLHttpRequest, status) {
            $("#load_note").hide()
            $('#container1').show()
            if (status != 'success') {
                alert("error！")
            }
        }
    });



    function cluster_analysis(){
        $('#load_note').show()
        var wenjian = $('#param-dataset  option:selected').val();
        var cluster_max=$('#param-n_cluster_max').val();
        var cluster_min=$('#param-n_cluster_min').val();
        var position=$('#param-position  option:selected').val();
        $.ajax({
            type:"POST",
            url:"Cluster_Compare",
            dataType:"json",
            data: {"wenjian": wenjian,"cluster_max": cluster_max,"cluster_min": cluster_min,"position":position},
            // async: false,
            success:function (data){
                console.log(data);
                // option1 对应聚类轮廓系数视图
                option1.series=ser(data['all_score'],data['cluster_name']);
                // option1.legend=data['cluster_name'];
                option1.xAxis.min=parseInt(cluster_min);
                option1.xAxis.max=cluster_max-1;
                console.log(option1)
                myChart1.setOption(option1)

                // option2 对应二维壁温图
                option2['series'][0]["data"]  = data['erced'];
                option2["visualMap"]["max"]=data["max"];
                option2["visualMap"]["min"]=data["min"];
                myChart2.setOption(option2);
            },
            complete: function (XMLHttpRequest, status) {
                $("#load_note").hide()
                $('#container1').show()
                if (status != 'success') {
                    alert("error！")
                }
            }
        });
    }
    function ser(data,column){
        var parallel = [];
        for (var i = 0; i < column.length; i++) {
            parallel.push({name:column[i],type:'line',data:data[i]});
        }
        // console.log(parallel);
        return parallel;
    };
    var jishu=0;
    var maa,mii;
    var pre_cluster_name='x',pre_cluster_num=0;
    var indexKuang;
    function Cluster_View(){
        // $('#load_note2').show()
        // document.getElementById('load_note2').style.display="block";
        // myChart2.showLoading({
        //     text: 'loading',
        //     color: '#c23531',
        //     textColor: '#000',
        //     maskColor: 'rgba(255, 255, 255, 0.2)',
        //     zlevel: 0,
        // });
        var cluster_name  = $('#param-cluster  option:selected').val();
        var cluster_num=$('#param-n_cluster_num').val();
        var wenjian = $('#param-dataset  option:selected').val();
        var position=$('#param-position  option:selected').val();
        if(pre_cluster_name!=cluster_name||pre_cluster_num!=cluster_num){
            jishu=0;
            pre_cluster_name=cluster_name;
            pre_cluster_num=cluster_num;
        }
        if(jishu==0){
            alert('Calculating...')
            $.ajax({
                type: "POST",
                url: "Clustering",
                dataType: "json",
                data: {
                    "cluster_name": cluster_name,
                    "cluster_num": cluster_num,
                    "wenjian": wenjian,
                    "position": position,
                    "is_Fusion":0
                },
                async: false,
                success: function (data) {
                    console.log(data);

                    option2['series'][0]["data"] = data['erced'];
                    maa = data["max"];
                    mii = data["min"];
                    // myChart2.setOption(option2);
                    // $('#load_note').hide()
                    // $('#container1').show()
                },
                complete: function (XMLHttpRequest, status) {
                    if (status != 'success') {
                        alert("error！")
                    }
                    // $('#load_note2').hide()
                }
            });
            jishu=1;
        }
        // myChart2.hideLoading();
        if ($("#cluster_switch").is(':checked')) {
            // console.log("在ON的状态下");
            var cate=[]
            for(var i=0;i<cluster_num;i++){
                j = i + 1
                cate.push({value:i,label:'class'+j.toString(),color:peise[i]})
            }
            // console.log(cate)
            // 执行聚类的映射方式 type:'piecewise'
            option2.visualMap={
                type:'piecewise',
                // categories: cate,
                pieces:cate,
                itemWidth:10,
                itemHeight:10,
                itemGap:4,
                dimension: 5,
                // min:0,
                // max:3,
                inRange: {
                    color: ['#0780cf', '#b6b51f', '#fa6d1d','#0e2c82']
                },
                // range:[570,614],
                calculable: true,
                realtime: true,
                textStyle: {
                    fontSize: 10
                },
                seriesIndex: [0],
            };
            console.log(option2)
            myChart2.setOption(option2,true);
        } else {
            // console.log("在OFF的状态下");
            // option2["visualMap"]["dimension"]=[4]
            option2.visualMap={
                type:'continuous',
                itemWidth:10,
                itemHeight:40,
                dimension: 3,
                min:mii,
                max:maa,
                inRange: {
                    color: ['#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                    // color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                },
                // range:[570,614],
                calculable: true,
                realtime: true,
                textStyle: {
                    fontSize: 10
                },
                seriesIndex: [0],
            };
            myChart2.setOption(option2,true);
        }
        console.log(option2)
        // document.getElementById('load_note2').style.display="none";
        // $('#load_note2').hide()
    }
    var jilu_num=[['高温过热器_AC_2', 324, 185],['后墙隔墙_AC_2', 10, 11],['低温过热器下部屏_Birch_2', 17, 3],['低温过热器上部屏_SC_2', 22, 22]];
    function Data_Fusion(){
        alert("开始融合...")
        var cluster_name  = $('#param-cluster  option:selected').val();
        var cluster_num=$('#param-n_cluster_num').val();
        var wenjian = $('#param-dataset  option:selected').val();
        var position=$('#param-position  option:selected').val();
        $.ajax({
            type: "POST",
            url: "Clustering",
            dataType: "json",
            data: {
                "cluster_name": cluster_name,
                "cluster_num": cluster_num,
                "wenjian": wenjian,
                "position": position,
                "is_Fusion":1
            },
            async: false,
            success: function (data) {
                console.log(data);
                jilu=data['jilu'];
                jilu_num.push(jilu)
                console.log("jilu_num",jilu_num)
                // option2['series'][0]["data"] = data['erced'];
                // maa = data["max"];
                // mii = data["min"];
                // myChart2.setOption(option2);
                // $('#load_note').hide()
                // $('#container1').show()
            },
            complete: function (XMLHttpRequest, status) {
                if (status != 'success') {
                    alert("error！")
                }
                table_history_model();
                // $('#load_note2').hide()
            }
        });

    }
    table_history_model()
    // 当文件下拉框改变时 执行该程序
    function table_history_model() {
        var wenjian = $('#param-dataset  option:selected').val();
        $("#history_model").html("")
        $.ajax({
            url: '/history_model',
            type: "POST",
            data: {"wenjian": wenjian},
            success: function (args) {
                console.log(args)
                for(var i=0;i<args.file.length;i++)
                    $('#history_model').append('<tr><td colspan="1" ><input type="checkbox" name="save_file_chec" value="'+args.file[i]+'">&nbsp;'+args.file2[i]+'</td><td class="form-inline"><button name="open_button_filter" _file_name='+args.file[i]+' id="history_start'+i+'" class="form-control btn-sm">打开</button>&nbsp;&nbsp;<button name="del_button_filter" _file_name = '+args.file[i]+' id="history_del'+i+'" class="form-control btn-sm">删除</button></td></tr>')
                for(var i=0;i<args.file.length;i++)
                {
                    $("#history_start" + i).on("click", {key: i}, function(event) {
                        var button_key = event.data.key
                        var file_name = $("#history_start"+button_key).attr("_file_name")
                        open_file(file_name)
                    });
                    $("#history_del" + i).on("click", {key: i}, function(event) {
                        var button_key = event.data.key
                        var file_name = $("#history_del"+button_key).attr("_file_name")
                        del_file(file_name)
                    });
                }
            },
            complete: function (XMLHttpRequest, status) {
                if (status != 'success') {
                    alert("error！")
                }
            }
        });

        $.ajax({
            type:"POST",
            url:"shuaxin",
            dataType:"json",
            data: {"wenjian": wenjian,"cluster_max": cluster_max,"cluster_min": cluster_min,"position":position},
            // async: false,
            success:function (data){
                console.log(data);
                // 当没有数据时 清空画布
                if(data["max"] == 1){
                    myChart1.clear()
                    myChart2.clear()
                }
                else{
                    // option1 对应聚类轮廓系数视图
                    option1.series=ser(data['all_score'],data['cluster_name']);
                    // option1.legend=data['cluster_name'];
                    option1.xAxis.min=parseInt(cluster_min);
                    option1.xAxis.max=cluster_max-1;
                    console.log(option1)
                    myChart1.setOption(option1)

                    // option2 对应二维壁温图
                    option2['series'][0]["data"]  = data['erced'];
                    option2["visualMap"]["max"]=data["max"];
                    option2["visualMap"]["min"]=data["min"];
                    myChart2.setOption(option2);
                }

            },
            complete: function (XMLHttpRequest, status) {
                $("#load_note").hide()
                $('#container1').show()
                if (status != 'success') {
                    alert("error！")
                }
            }
    });

    }
    function del_file(file_name) {
        var wenjian = $('#param-dataset  option:selected').val();
        $.ajax({
            url: '/del_history_model',
            type: 'POST',
            data: {
                "wenjian": wenjian,
                "file_name": file_name
            },
            success: function (args) {
                alert("已删除")
                table_history_model()
            }
        });
    };

    var open_count=0;
    var cluster_count=1;
    var isChange='s';
    var num;
    var suoyou_links;
    var cluster_xgx;
    var cluster_pj;

    function open_file(file_name,lightnum) {
        console.log("222",file_name)
        changekuang(file_name)

        if (isChange==file_name){
            open_count=0;
        }
        else {
            open_count=1;
            isChange=file_name;
        }
        if (open_count==1) {
            var wenjian = $('#param-dataset  option:selected').val();
            $.ajax({
                url: '/open_history_model',
                type: 'GET',
                data: {
                    "wenjian": wenjian,
                    file_name: file_name
                },
                async: false,
                success: function (data) {
                    // console.log(data);
                    var tit;
                    if(file_name=='低温过热器上部屏_SC_2'){
                        tit='LTS(Upper)'
                    }
                    else if(file_name=='低温过热器下部屏_Birch_2'){
                        tit='LTS(Lower)'
                    }
                    else if(file_name=='后墙隔墙_AC_2'){
                        tit='Rear Wall'
                    }
                    else if(file_name=='水冷前垂_AC_2'){
                        tit='VWW(Front)'
                    }
                    else if(file_name=='水冷前螺_AC_2'){
                        tit='SWW(Front)'
                    }
                    else if(file_name=='水冷右垂_SC_2'){
                        tit='VWW(Right)'
                    }
                    else if(file_name=='水冷右螺_AC_2'){
                        tit='SWW(Right)'
                    }
                    else if(file_name=='水冷后垂_AC_3'){
                        tit='VWW(Rear)'
                    }
                    else if(file_name=='水冷后螺_SC_2'){
                        tit='SWW(Rear)'
                    }
                    else if(file_name=='水冷左垂_AC_2'){
                        tit='VWW(Left)'
                    }
                    else if(file_name=='水冷左螺_AC_2'){
                        tit='SWW(Left)'
                    }
                    else if(file_name=='高温过热器_AC_2'){
                        tit='HTS'
                    }
                    option2['title']['text'] = tit
                    option2['series'][0]["data"] = data['erced'];
                    maa = data["max"];
                    mii = data["min"];
                    num = data['cluster_num'];
                },
                complete: function (XMLHttpRequest, status) {
                    if (status != 'success') {
                        alert("error！")
                    }
                }
            });
        }
        console.log(cluster_count,num)
        // 聚类视图下
        if (cluster_count==0) {
            // console.log("在ON的状态下");
            var cate=[]
            console.log("lightnum",lightnum)
            console.log(typeof(lightnum) == "undefined")
            if(typeof(lightnum) == "undefined"){
                for(var i=0;i<num;i++){
                    j = i + 1
                    cate.push({value:i,label:'class'+j.toString(),color:peise[i]})
                }
            }else{
                for(var i=0;i<num;i++){
                    // alert("执行了")
                    j = i + 1
                    if(i != lightnum-1){
                        cate.push({value:i,label:'class'+j.toString(),color:"#DCDCDC"})
                    }else{
                        cate.push({value:i,label:'class'+j.toString(),color:peise[i]})
                    }
                }
            }

            console.log(cate)
            option2.visualMap={
                type:'piecewise',
                // categories: cate,
                pieces:cate,
                itemWidth:10,
                itemHeight:10,
                dimension: 4,
                itemGap:4,
                // min:0,
                // max:3,
                inRange: {
                    color: ['#0780cf', '#b6b51f', '#fa6d1d','#0e2c82']
                },
                // range:[570,614],
                calculable: true,
                realtime: true,
                textStyle: {
                    fontSize: 10
                },
                seriesIndex: [0],
            };
            console.log(option2)
            myChart2.setOption(option2);
            cluster_count=1;
        }
        // 普通视图下
        else {
            // console.log("在OFF的状态下");
            // option2["visualMap"]["dimension"]=[4]
            option2.visualMap={
                type:'continuous',
                itemWidth:10,
                itemHeight:40,
                dimension: 3,
                min:mii,
                max:maa,
                inRange: {
                    color: ['#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                    // color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                },
                // range:[570,614],
                calculable: true,
                realtime: true,
                textStyle: {
                    fontSize: 10
                },
                seriesIndex: [0],
            };
            myChart2.setOption(option2);
            cluster_count=0;
        }
    };

    // 打开聚类试图
    function open_file1(file_name,lightnum) {
        console.log("222",file_name)


        if (isChange==file_name){
            open_count=0;
        }
        else {
            open_count=1;
            isChange=file_name;
        }
        if (open_count==1) {
            var wenjian = $('#param-dataset  option:selected').val();
            $.ajax({
                url: '/open_history_model',
                type: 'GET',
                data: {
                    "wenjian": wenjian,
                    file_name: file_name
                },
                async: false,
                success: function (data) {
                    console.log(data);
                    var tit;
                    if(file_name=='低温过热器上部屏_SC_2'){
                        tit='LTS(Upper)'
                    }
                    else if(file_name=='低温过热器下部屏_Birch_2'){
                        tit='LTS(Lower)'
                    }
                    else if(file_name=='后墙隔墙_AC_2'){
                        tit='Rear Wall'
                    }
                    else if(file_name=='水冷前垂_AC_2'){
                        tit='VWW(Front)'
                    }
                    else if(file_name=='水冷前螺_AC_2'){
                        tit='SWW(Front)'
                    }
                    else if(file_name=='水冷右垂_SC_2'){
                        tit='VWW(Right)'
                    }
                    else if(file_name=='水冷右螺_AC_2'){
                        tit='SWW(Right)'
                    }
                    else if(file_name=='水冷后垂_AC_3'){
                        tit='VWW(Rear)'
                    }
                    else if(file_name=='水冷后螺_SC_2'){
                        tit='SWW(Rear)'
                    }
                    else if(file_name=='水冷左垂_AC_2'){
                        tit='VWW(Left)'
                    }
                    else if(file_name=='水冷左螺_AC_2'){
                        tit='SWW(Left)'
                    }
                    else if(file_name=='高温过热器_AC_2'){
                        tit='HTS'
                    }
                    option2['title']['text'] = tit
                    option2['series'][0]["data"] = data['erced'];
                    maa = data["max"];
                    mii = data["min"];
                    num = data['cluster_num'];
                },
                complete: function (XMLHttpRequest, status) {
                    if (status != 'success') {
                        alert("error！")
                    }
                }
            });
        }
        console.log(cluster_count,num)

        // 聚类视图下
        var cate=[]
        console.log("lightnum",lightnum)
        console.log(typeof(lightnum) == "undefined")
        if(typeof(lightnum) == "undefined"){
            for(var i=0;i<num;i++){
                j = i + 1
                cate.push({value:i,label:'class'+j.toString(),color:peise[i]})
            }
        }else{
            for(var i=0;i<num;i++){
                // alert("执行了")
                j = i + 1
                if(i != lightnum-1){
                    cate.push({value:i,label:'class'+j.toString(),color:"#DCDCDC"})
                }else{
                    cate.push({value:i,label:'class'+j.toString(),color:peise[i]})
                }
            }
        }

        console.log(cate)
        option2.visualMap={
            type:'piecewise',
            // categories: cate,
            pieces:cate,
            itemWidth:10,
            itemHeight:10,
            dimension: 4,
            itemGap:4,
            // min:0,
            // max:3,
            inRange: {
                color: ['#0780cf', '#b6b51f', '#fa6d1d','#0e2c82']
            },
            // range:[570,614],
            calculable: true,
            realtime: true,
            textStyle: {
                fontSize: 10
            },
            seriesIndex: [0],
        };
        console.log(option2)
        myChart2.setOption(option2);
    };

    // 打开原始视图
    function open_file2(file_name,lightnum) {
        console.log("222",file_name)


        if (isChange==file_name){
            open_count=0;
        }
        else {
            open_count=1;
            isChange=file_name;
        }
        if (open_count==1) {
            var wenjian = $('#param-dataset  option:selected').val();
            $.ajax({
                url: '/open_history_model',
                type: 'GET',
                data: {
                    "wenjian": wenjian,
                    file_name: file_name
                },
                async: false,
                success: function (data) {
                    console.log(data);

                    option2['title']['text'] = file_name
                    option2['series'][0]["data"] = data['erced'];
                    maa = data["max"];
                    mii = data["min"];
                    num = data['cluster_num'];
                },
                complete: function (XMLHttpRequest, status) {
                    if (status != 'success') {
                        alert("error！")
                    }
                }
            });
        }
        console.log(cluster_count,num)

        // 普通视图下
        option2.visualMap={
            type:'continuous',
            itemWidth:10,
            itemHeight:40,
            dimension: 3,
            min:mii,
            max:maa,
            inRange: {
                color: ['#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                // color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
            },
            // range:[570,614],
            calculable: true,
            realtime: true,
            textStyle: {
                fontSize: 10
            },
            seriesIndex: [0],
        };
        myChart2.setOption(option2);
    }

    var zuhe1;
    var zuhe2;

    // 该函数执行 exploration 按钮
    function StartCOCluster3(){
        var dataset = document.getElementsByName('save_file_chec');
        var Row_Cluster_num = 1;
        var Col_Cluster_num = 2;
        var Relevance_sel  = $('#param-Relevance  option:selected').val();
        console.log(dataset)

        var value = new Array();
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked)
                value.push(dataset[i].value);
        }
        console.log(value,Row_Cluster_num,Col_Cluster_num)

        var div_height = $("#Cluster_left").height();
        console.log("div_height",div_height)
        var data_lenn,biwen_columnn,qita_columnn;
        $.ajax({
            type: "POST",
            url: "CoCluster3",
            dataType: "json",
            async: false,
            data: {"listt": JSON.stringify(listt),"listt_1":JSON.stringify(listt_1),"listt2": JSON.stringify(listt2),"listt2_1":JSON.stringify(listt2_1),"value": JSON.stringify(value), "Row_Cluster_num": Row_Cluster_num, "Col_Cluster_num": Col_Cluster_num},    // 传递列表
            success: function (data) {
                console.log(data)
                var cluster1=data['cluster1'];
                var cluster2=data['cluster2'];
                zuhe1 = cluster1;
                zuhe2 = cluster2;
                cluster_xgx = data['cluster_xgx'];
                cluster_pj = data['cluster_pj'];
                var data_len = data['data_len'];
                cluster_left_list = data['name1'];
                cluster_right_list = data['name2'];
                var biwen_column = data['biwen_column'];
                var qita_column = data['qita_column'];
                biwen_columnn = biwen_column;
                qita_columnn = qita_column;
                var link1=[];
                var link2=[];
                fangda1 = new Array(data_len[0]).fill(0);
                fangda2 = new Array(data_len[1]).fill(0);
                var all_links=[];
                data_lenn=data['data_len']
                // console.log(cluster1.length);
                // empty 删除所有子节点和内容
                $('#Cluster_left').empty();
                $('#Cluster_right').empty();

                // cluster1.length表示左边壁温参数列表的长度
                for(var i =0;i < cluster1.length;i++){
                    var data1=[];
                    var data2=[];
                    var xdata=[];
                    var data_jilu=[];
                    // ata_len[0] 表示左边壁温参数列表的长度
                    for(var j=0;j<data_len[0];j++){
                        // divheight=90/data_len[0]*i
                        xdata.push(j)
                        if(cluster1[i].indexOf(j)>-1){
                            // var shuzii=parseInt(biwen_column[j].substr(biwen_column[j].length-1,1));
                            // for(var k=0;k<jilu_num.length;k++){
                            //     if(biwen_column[j].indexOf(jilu_num[k][0])!=-1){
                            //         data1.push([j,biwen_column[j],jilu_num[k][shuzii]])
                            //         data_jilu.push(jilu_num[k][shuzii])
                            //     }
                            //
                            // }
                            data1.push([j,biwen_column[j]])
                        }
                        else {
                            data2.push([j,biwen_column[j]])
                        }
                    };
                    // console.log(data1,data2)
                    divheight=((div_height-cluster1.length*10)/(cluster1.length+1))
                    // console.log(divheight)
                    link1.push([0,(divheight+10)*i+divheight+5])
                    $('#Cluster_left').append("<div onclick='jizhong(this)' onmouseover='over1(this)' onmouseout='out1(this)' style='margin-top:"+divheight+"px;border-radius: 10px;border: 2px solid #d1b38a;height: 10px;width: 100%;' id='input_cluster" + i + "'></div>")
                    var dom = document.getElementById("input_cluster" + i);
                    var myChart = echarts.init(dom, null, {renderer: 'svg'});
                    var option = {
                        tooltip:{
                            formatter:function (params){
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        // visualMap:{
                        //     type:'continuous',
                        //     min:Math.min.apply(null,data_jilu),
                        //     max:Math.max.apply(null,data_jilu),
                        //     inRange: {
                        //         color: ['#74add1', '#4575b4','#313695']
                        //     },
                        //     dimensions:2,
                        //     show:false
                        //
                        // },
                        singleAxis:{
                            show:false,
                            axisLabel:{
                                show:false
                            },
                            axisLine:{
                                show:false
                            },
                            axisTick:{
                                show:false
                            },
                            // left: 10,
                            type: 'category',
                            data:xdata,
                            boundaryGap: false,
                            // top: (0 * 100 / 7 + 5) + '%',
                            // height: (100 / 7 - 10) + '%',
                        },
                        series: [
                            {
                                name:'input_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data1,
                                type: 'scatter',
                                itemStyle:{
                                    // color:'gray',
                                    opacity:1
                                },
                                emphasis:{
                                    scale:true,
                                    itemStyle:{
                                        color: 'red',
                                        borderWidth:100
                                    }
                                },
                            },
                            {
                                name:'input_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data2,
                                type: 'scatter',
                                itemStyle:{
                                    color:'gray',
                                    opacity:0.2
                                }
                            }
                        ]
                    };
                    // 生成option图
                    console.log("option",option)
                    myChart.setOption(option);

                    // 触发点击单个聚类点 执行的事件
                    myChart.on('click',function (params){
                        console.log("click666",params)
                        dianji1(params.seriesName,params.data[1])

                    });
                };
                // 遍历右边的参数列表
                for(var i =0;i < cluster2.length;i++){
                    var data1=[];
                    var data2=[];
                    var xdata=[]
                    for(var j=0;j<data_len[1];j++){
                        // divheight=90/data_len[0]*i
                        xdata.push(j)
                        if(cluster2[i].indexOf(j)>-1){
                            data1.push([j,qita_column[j]])
                        }
                        else {
                            data2.push([j,qita_column[j]])
                        }
                    };
                    // console.log(data1,data2)
                    divheight=((div_height-cluster2.length*10)/(cluster2.length+1))
                    // console.log(divheight)
                    link2.push([235,(divheight+10)*i+divheight+5])
                    $('#Cluster_right').append("<div onclick='jizhong(this)' onmouseover='over1(this)' onmouseout='out1(this)' style='margin-top:"+divheight+"px;border-radius: 10px;border: 2px solid #d1b38a;height: 10px;width: 100%;' id='output_cluster" + i + "'></div>")
                    var dom = document.getElementById("output_cluster" + i);
                    var myChart = echarts.init(dom, null, {renderer: 'svg'});
                    var option = {
                        tooltip:{
                            formatter:function (params){
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        singleAxis:{
                            show:false,
                            axisLabel:{
                                show:false
                            },
                            axisLine:{
                                show:false
                            },
                            axisTick:{
                                show:false
                            },
                            // left: 10,
                            type: 'category',
                            data:xdata,
                            boundaryGap: false,
                            // top: (0 * 100 / 7 + 5) + '%',
                            // height: (100 / 7 - 10) + '%',
                        },
                        series: [
                            {
                                name:'output_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data1,
                                type: 'scatter',
                                itemStyle:{
                                    // color:'gray',
                                    opacity:1
                                },
                                emphasis:{
                                    scale:true,
                                    itemStyle:{
                                        color: 'red',
                                        borderWidth:100
                                    }
                                },
                            },
                            {
                                name:'output_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data2,
                                type: 'scatter',
                                itemStyle:{
                                    color:'gray',
                                    opacity:0.2
                                }
                            }
                        ]
                    };
                    myChart.setOption(option);
                    myChart.on('click',function (params){
                        console.log(params)
                        dianji1(params.seriesName,params.data[1])
                    });
                };
                console.log(link1,link2)

                for(var i=0;i<link1.length;i++){
                    for(var j=0;j<link2.length;j++){
                        all_links.push({
                            "source":{"x":link1[i][0],"y":link1[i][1]},
                            "target":{"x":link2[j][0],"y":link2[j][1]},
                            "value":cluster_xgx[i][j],
                            "value2":cluster_pj[i][j],
                            "start":i,
                            "end":j
                        })
                    }
                }
                suoyou_links=all_links;
                console.log("all_links",all_links)
                // var max=d3.max(all_links,function (d){return d.value})
                // var min=d3.min(all_links,function (d){return d.value})
                // console.log("max",max,min)
                // color.domain([min,max])
                d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
                lineGraph
                    // .append("g")
                    .selectAll('path')
                    .data(all_links)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        // console.log(d,i)
                        return createLink(d)
                    })
                    // .attr("stroke","#ccc")
                    // .attr("stroke-width",2)
                    .attr("stroke",function (d){
                        return color(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear(Math.abs(d.value));
                    })
                    // .attr("fill",function (d){
                    //     return color(d.value);
                    // })
                    .style("opacity", 0.7)
                    .on("mouseover",overed)
                    .on("mouseout",outed)
                    .on("click",clicked)
                // .on("mousemove", mousemove);
            }
        });
    }
    function ser2(data){
        var parallel = [];
        // console.log(column.length)
        // console.log(data[0])
        for (var i = 0; i < data.length; i++) {
            // console.log("lllll",peise2[i])
            parallel.push({name:i+1,type:'line',data:data[i],
                symbolSize:(rawValue, params) => {
                    // console.log(rawValue,params)
                    return linear3(Math.abs(params.data[3]+params.data[4]))
                },
                symbol: 'circle',
                itemStyle:{
                    // color:'red',
                    normal : {
                        color: peise2[i]
                    }
                }
            });
        }
        // console.log(parallel);
        return parallel;
    };
    var qita_name_jilu,biwen_name_jilu;
    var zongti_xgx;
    var duo_xgx;
    // 执行 view 函数
    // var cluster11,cluster22;
    var all_link1=[],all_link2=[],all_link3=[],jianyan_corr
    var index=0;
    var jiluu=[]
    var corr_xv, corr_yu;
    var MW,MW2,qita2,biwen2;
    var times;
    var sample
    var hebing_data;
    var save_hebingdata = [];
    // var qita_index=[],bi_index=[];
    function Fuwei(){
        // option5_2.series[0].data=MW;
        StartCOCluster4();
        // option5_2.series[1].data=[]
        // // option5_2.series[2].data=biwen2;
        // option5_2.series[4].data=[]
        // // option5_2.series[3].data=qita2;
        // option5_2.series[5].data=[]
        // // option5_2.xAxis.data=times;
        // // option5_2.title.text=times[0]+'——'+times[times.length-1];
        // myChart5_2.setOption(option5_2,true);
    };


    var checknum = []
    var biwen_column=[]
    var qita_column=[]
    function Execute(){

        var ttable = document.getElementById("changetable")
        ttable.style.display = 'block'

        var cca_model1 = document.getElementById("CCA_model1")
        cca_model1.style.display = 'block'

        var max_t = inputsRy.theValue[1]/100;
        var min_t = inputsRy.theValue[0]/100;

        console.log("save_yu",save_yu)
        console.log("save_xv",save_xv)
        // console.log("save_vx0",save_xv[1][0])
        console.log("max_t",max_t)
        console.log("min_t",min_t)

        var checknum_new = []
        var lent = tongji.length
        for (var i=0 ; i<lent;i++){
            var isChecked = $('#mw'+i).is(":checked");
            if(isChecked == true){
                checknum_new.push(i)
            }
        }

        // 先清空表单数据
        $("#tdData1").html("")
        $("#mwdata").html("")

        // 动态写表头
        var tableData = "<tr>"
        tableData += '<th>'+'N/MW'+'</th>'
        for(var i = 0; i < checknum_new.length; i++){
            tableData += "<th>"+ tongji[checknum_new[i]] +"</th>"
        }
        tableData += "</tr>"
        $('#mwdata').append(tableData)

        console.log("save checknum_new",checknum_new)

        var ccamodel = $("#CCA_model option:selected").val()
        console.log("ccamodel",ccamodel)
        var canshu = $("#canshu option:selected").val()
        console.log("canshu",canshu)


        var cca_flag;

        if(ccamodel == 1){
            cca_flag = 0
        }
        if(ccamodel == 2){
            cca_flag = 1
        }
        if(ccamodel == 3){
            cca_flag = 2
        }

        console.log("cca_flag",cca_flag)

        // 当状态是壁温参数时
        if(canshu == 1){
            var strr = ""
            for(var i = 0; i < biwen_column.length; i++){
                strr += "<tr>"
                strr += "<td>" + bi_name2[i].replace('_AC_2','').replace('_SC_2','').replace('_AC_3','').replace('_Birch_2','') + "</td>"
                // strr += "<td>" + save_xv[checknum[0]][i][0].toFixed(2) +"</td>"
                // strr += "<td>" + save_xv[checknum[1]][i][0].toFixed(2) +"</td>"
                for(var j = 0;j < checknum_new.length; j++){
                    var value = save_xv[checknum_new[j]][i][cca_flag]

                    if(Math.abs(value) >= min_t && Math.abs(value)<= max_t){
                        strr += "<td>" + value.toFixed(2) +"</td>"
                    }else{
                        strr += "<td>" + "—" + "</td>"
                    }
                }
                strr += "</tr>"
            }
        }
        // 当状态是影响参数时
        if(canshu == 2){
            var strr = ""
            for(var i = 0; i < qita_column.length; i++){
                strr += "<tr>"
                strr += "<td>" + qita_name2[i] + "</td>"
                // strr += "<td>" + save_xv[checknum[0]][i][0].toFixed(2) +"</td>"
                // strr += "<td>" + save_xv[checknum[1]][i][0].toFixed(2) +"</td>"
                for(var j = 0;j < checknum_new.length; j++){
                    var value2 = save_yu[checknum_new[j]][i][cca_flag]

                    if(Math.abs(value2) >= min_t && Math.abs(value2)<= max_t){
                        strr += "<td>" + value2.toFixed(2) +"</td>"
                    }else{
                        strr += "<td>" + "—" + "</td>"
                    }
                }
                strr += "</tr>"
            }
        }


        $("#tdData1").append(strr);

        // StartCOCluster5()
    }


    // 对应的T-SNE降维后的散点图
    var option_m2 = {
        xAxis: {

            // axisLabel:{
            //     show:false
            // },
            axisLine: {
                onZero: false
            },
            max: 500.23,
            min:-500.23
        },
        yAxis: {
            axisLine: {
                onZero: false
            },
            axisLabel:{
                show:true
            },
            max: 500.23,
            min:-500.23
        },
        legend:{},
        dataZoom:[
            {
                type: 'inside', // 使鼠标在图表中时滚轮可用
            },
        ],
        tooltip:{
            formatter:function (par){
                return par.data[2]+'<br>'+'x: '+par.data[0].toFixed(2)+'<br>'+'y: '+par.data[1].toFixed(2)
            }
        },
        grid: {
            left: '2%',
            right: '2%',
            top: '5%',
            bottom: '5%',
            containLabel:true
        },
        series: [
            {
                // name:'UV1',
                symbolSize: 16,
                symbol:"circle",
                data: [],
                type: 'scatter',
                emphasis: {
                    focus: 'self',
                },
                itemStyle:{
                    color:function(par){
                        // console.log("par",par)
                        // console.log("asd legend",legendmw)
                        // console.log(parseInt(par.data[2].substring(0,4)))
                        // console.log(color_tu(parseInt(par.data[2].substring(0,4))))
                        if(legendmw.indexOf(par.data[2]) != -1){
                            return "white"
                        }else{
                            return peise[par.dataIndex]
                            // return color_tu(parseInt(par.data[2].substring(0,4)))
                        }
                    }
                }
            },
            {
                // name:'UV2',
                symbolSize: 16,
                symbol:"triangle",
                data: [],
                type: 'scatter',
                emphasis: {
                    focus: 'self',
                },
                itemStyle:{
                    // color:'#765005'
                    color:function(par){
                        if(legendmw.indexOf(par.data[2]) != -1){
                            return "white"
                        }else{
                            return peise[par.dataIndex]
                            // return color_tu(parseInt(par.data[2].substring(0,4)))
                        }
                    }
                }
            },
            {
                // name:'UV3',
                symbolSize: 16,
                symbol:"roundRect",
                data: [],
                type: 'scatter',
                emphasis: {
                    focus: 'self',
                },
                itemStyle:{
                    // color:'#fa6d1d'
                    color:function(par){
                        if(legendmw.indexOf(par.data[2]) != -1){
                            return "white"
                        }else{
                            return peise[par.dataIndex]
                            // return color_tu(parseInt(par.data[2].substring(0,4)))
                        }
                    }
                }
            }
        ]
    };

    var sw=0;
    // 记录model框是否需要隐藏
    var flagmodel = 0
    var legendmw = []
    function Switch(){
        if(flagmodel == 0){
            var mychar3 = document.getElementById("change3")
            mychar3.innerHTML = "Graph"
            flagmodel = 1
            // $('param-model').show()
        }else {
            var mychar3 = document.getElementById("change3")
            mychar3.innerHTML = "T-SNE"
            flagmodel = 0
            // $('param-model').hide()
        }

        if(sw==0){
            $("#m1").hide();
            $("#m2").show();
            $("#legend1").show()
            $("#legend2").show()
            sw=1;
        }
        else{
            $("#m2").hide();
            $("#legend1").hide()
            $("#legend2").hide()
            $("#m1").show();
            sw=0;
        }

        console.log("duibi1",duibi1)
        console.log("duibi2",duibi2)
        console.log("duibi3",duibi3)
        console.log("mingzi",mingzi)


        $.ajax({
            type: "POST",
            url: "Switch",
            dataType: "json",
            async: false,
            data: {
                "duibi1": JSON.stringify(duibi1),
                "duibi2": JSON.stringify(duibi2),
                "duibi3": JSON.stringify(duibi3),
                "mingzi": JSON.stringify(mingzi),
            },
            success: function (data) {
                    // option_m2对应的是 t-sne降维的数据散点图
                    option_m2.series[0].data=data['d1'];
                    option_m2.series[1].data=data['d2'];
                    option_m2.series[2].data=data['d3'];
                    max1 = data['maxdata']
                    min1 = 0
                    option_m2.xAxis.max = max1
                    option_m2.xAxis.min = min1

                    option_m2.yAxis.max = max1
                    option_m2.yAxis.min = min1

                    myChart_m2.setOption(option_m2,true);
                    myChart_m2.on('mouseover', function (params) {
                        console.log("params",params)
                        $("#a"+(tongji.indexOf(params.data[2])+1)).css("border-color","red");
                    })
                    myChart_m2.on('mouseout', function (params) {
                        $("#a"+(tongji.indexOf(params.data[2])+1)).css("border-color","#d1b38a");
                    })
                    myChart_m2.on('click', function (params) {
                        dianji4(params.data[2])
                    })
                    console.log("111",option_m2)

                    // 设置legend1对应的图例 控制形状 (UV1,UV2...)
                    var option_l1 = {
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: [
                            {
                                // top:'middle',
                                x:'center',
                                textStyle:{
                                    fontSize:13
                                },
                                // icon:'roundRect',
                                itemWidth: 18,
                                itemHeight: 13,
                                data:['UV1','UV2','UV3'],
                            },
                            {
                                x:'center',
                                top:'20',
                                textStyle:{
                                    fontSize:13
                                },
                                data:[],
                                // icon:'roundRect',
                                itemWidth: 18,
                                itemHeight: 13,
                            }],
                            grid: {
                                left: '3%',
                                right: '4%',
                                bottom: '3%',
                                containLabel: true
                            },
                            xAxis: {
                                show:false,
                                type: 'category',
                                boundaryGap: false,
                                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                            },
                            yAxis: {
                                show:false,
                                type: 'value'
                            },
                            series: [
                                {
                                    name: 'UV1',
                                    symbol:"circle",
                                    type: 'scatter',
                                    data: [],
                                    itemStyle:{
                                        color:'DarkGray'
                                    }
                                },
                                {
                                    name: 'UV2',
                                    symbol:"triangle",
                                    type: 'scatter',
                                    data: [],
                                    itemStyle:{
                                        color:'DarkGray'
                                    }
                                },
                                {
                                    name: 'UV3',
                                    symbol:"roundRect",
                                    type: 'scatter',
                                    data: [],
                                    itemStyle:{
                                        color:'DarkGray'
                                    }
                                }
                            ]
                        };
                    mylegend1.setOption(option_l1,true)
                    console.log("option_l1",option_l1)

                    // CCA图例筛选事件
                    mylegend1.on('legendselectchanged', function(obj){
                        legendmodel = []
                        var selected = obj.selected
                        console.log("selected model",selected)
                        datamodel = ['UV1','UV2','UV3']
                        var option_m22 = {
                            xAxis: {

                                // axisLabel:{
                                //     show:false
                                // },
                                axisLine: {
                                    onZero: false
                                },
                                max: 500.23,
                                min:-500.23
                            },
                            yAxis: {
                                axisLine: {
                                    onZero: false
                                },
                                axisLabel:{
                                    show:true
                                },
                                max: 500.23,
                                min:-500.23
                            },
                            legend:{},
                            dataZoom:[
                                {
                                    type: 'inside', // 使鼠标在图表中时滚轮可用
                                },
                            ],
                            tooltip:{
                                formatter:function (par){
                                    return par.data[2]+'<br>'+'x: '+par.data[0].toFixed(2)+'<br>'+'y: '+par.data[1].toFixed(2)
                                }
                            },
                            grid: {
                                left: '2%',
                                right: '2%',
                                top: '5%',
                                bottom: '5%',
                                containLabel:true
                            },
                            series: [
                                {
                                    // name:'UV1',
                                    symbolSize: 16,
                                    symbol:"circle",
                                    data: [],
                                    type: 'scatter',
                                    emphasis: {
                                        focus: 'self',
                                    },
                                    itemStyle:{
                                        color:function(par){
                                            console.log("par",par)
                                            console.log("asd legend",legendmw)
                                            console.log(parseInt(par.data[2].substring(0,4)))
                                            console.log(color_tu(parseInt(par.data[2].substring(0,4))))
                                            if(legendmw.indexOf(par.data[2]) != -1){
                                                return "white"
                                            }else{
                                                return peise[par.dataIndex]
                                                // return color_tu(parseInt(par.data[2].substring(0,4)))
                                            }
                                        }
                                    }
                                },
                                {
                                    // name:'UV2',
                                    symbolSize: 16,
                                    symbol:"triangle",
                                    data: [],
                                    type: 'scatter',
                                    emphasis: {
                                        focus: 'self',
                                    },
                                    itemStyle:{
                                        // color:'#765005'
                                        color:function(par){
                                            if(legendmw.indexOf(par.data[2]) != -1){
                                                return "white"
                                            }else{
                                                return peise[par.dataIndex]
                                                // return color_tu(parseInt(par.data[2].substring(0,4)))
                                            }
                                        }
                                    }
                                },
                                {
                                    // name:'UV3',
                                    symbolSize: 16,
                                    symbol:"roundRect",
                                    data: [],
                                    type: 'scatter',
                                    emphasis: {
                                        focus: 'self',
                                    },
                                    itemStyle:{
                                        // color:'#fa6d1d'
                                        color:function(par){
                                            if(legendmw.indexOf(par.data[2]) != -1){
                                                return "white"
                                            }else{
                                                return peise[par.dataIndex]
                                                // return color_tu(parseInt(par.data[2].substring(0,4)))
                                            }
                                        }
                                    }
                                }
                            ]
                        };
                        for(var i=0; i < datamodel.length; i++){
                            if(selected[datamodel[i]] == true){
                                aa = 'd'+(i+1)
                                console.log(aa)
                                option_m22.series[i].data = data[aa]
                            }
                        }
                        max1 = data['maxdata']
                        min1 = 0
                        option_m22.xAxis.max = max1
                        option_m22.xAxis.min = min1

                        option_m22.yAxis.max = max1
                        option_m22.yAxis.min = min1

                        myChart_m2.setOption(option_m22,true);
                        console.log("333",option_m22)
                    })

                    // 设置legend2对应的功率图例
                    var option_l2 = {
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: [
                            {
                                // top:'middle',
                                x:'center',
                                textStyle:{
                                    fontSize:13
                                },
                                icon:'roundRect',
                                itemWidth: 18,
                                itemHeight: 13,
                                data:[],
                            },
                            {
                                x:'center',
                                top:'20',
                                textStyle:{
                                    fontSize:13
                                },
                                data:[],
                                icon:'roundRect',
                                itemWidth: 18,
                                itemHeight: 13,
                            }
                        ],
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '3%',
                            containLabel: true
                        },
                        xAxis: {
                            show:false,
                            type: 'category',
                            boundaryGap: false,
                            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                        },
                        yAxis: {
                            show:false,
                            type: 'value'
                        },
                        series: [
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                    color : peise[0]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                    color:peise[1]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                    color:peise[2]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                   color:peise[3]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                    color:peise[4]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                    color:peise[5]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [""],
                                itemStyle:{
                                    color:peise[6]
                                }
                            },
                            {
                                name: '',
                                type: 'line',
                                data: [],
                                itemStyle:{
                                    color:peise[7]
                                }
                            },
                        ]
                    };
                    var datatu2 = []
                    for(var i=0; i < tongji.length; i++){
                        datatu2.push(tongji[i])
                        option_l2.series[i].name = tongji[i]
                    }
                    console.log("datatu2",datatu2)
                    option_l2.legend[0].data = datatu2
                    option_l2.series = serr2(datatu2)
                    mylegend2.setOption(option_l2,true)
                    console.log("option_l2",option_l2)


                    // 功率图例筛选事件
                    mylegend2.on('legendselectchanged', function(obj) {
                        legendmw = []
                        var selected = obj.selected;
                        console.log("selected mw",selected)
                        for(var i=0; i<tongji.length;i++){
                            if(selected[tongji[i]] == false){
                                legendmw.push(tongji[i])
                            }
                        }
                        // 重新执行一边 t-sne散点图的赋值
                        option_m2.series[0].data=data['d1'];
                        option_m2.series[1].data=data['d2'];
                        option_m2.series[2].data=data['d3'];

                        max1 = data['maxdata']
                        min1 = 0
                        option_m2.xAxis.max = max1
                        option_m2.xAxis.min = min1

                        option_m2.yAxis.max = max1
                        option_m2.yAxis.min = min1

                        myChart_m2.setOption(option_m2,true);
                        console.log("222",option_m2)
                    })
                    console.log("legendmw",legendmw)
                }
        })

    };

    var duibi1=[],duibi2=[],duibi3=[],mingzi=[];
    var corr_uv;
    var tongji=[];
    var left_line=[],right_line=[];
    var list_save=[];
    var list_save2=[];
    var list_save3=[];
    var list_save4=[];
    var peise2=['#0780cf','#765005','#fa6d1d','#0e2c82','#b6b51f','#da1f18','#701866','#f47a75'];
    var tu_save=[];
    var biwen_id=['b1','b2','b3','b4','b5'];
    var bili_name = ['高温过热器', '后墙隔墙', '低温过热器', '垂直水冷壁', '螺旋水冷壁'];
    var save_yu=[],save_xv=[]
    var state=[1,1,0,0,0,0,0,0];
    var data_U=[],data_V=[];
    var bi_name2,qita_name2;
    function StartCOCluster4(){
        $("#sa").hide()
        // 获取当前的是 多组对比还是单一对比状态
        var duiflag = $('#param-duibi option:selected').val()
        // 获取当前的是 散点图还是折线图
        var style1 = $('#param-style option:selected').val()

        // 若是多组对比状态 直接跳到qiehuan函数并执行
        if (duiflag==2){
            qiehuan()
        }
        else {

            for(var i=0; i<8; i++){
                $("#a"+(i+1)).show()
            }

            $("#tuli").hide()
            $("#param-duibi").val('1');
            var qita_index = [], bi_index = [];
            var max_t = inputsRy.theValue[1] / 100;
            var min_t = inputsRy.theValue[0] / 100;
            all_link1 = [], all_link2 = [], all_link3 = []
            cunchu = [-1, -1, -1]
            $("#container11").hide()
            $("#container12").hide()
            $("#container7").show()
            $("#container8").show()
            $("#container9").show()
            $("#container10").show()

            var dataset = document.getElementsByName('save_file_chec');
            var Row_Cluster_num = 1;
            var Col_Cluster_num = 2;
            var style = $('#param-style option:selected').val();
            var Relevance_sel = $('#param-Relevance  option:selected').val();
            // var Algorithm  = $('#param-Algorithm  option:selected').val();
            var Algorithm = 'Single analysis';
            var wenjian = $('#param-dataset  option:selected').val();
            sample = $('#param-size').val();
            if (Algorithm == 'Comparative analysis') {

            } else {
                var tucol = ['#63b2ee', '#76da91', '#f8cb7f', '#f89588', '#7cd6cf', '#9192ab', '#7898e1', '#efa666'];
                $("#b").show()
                var value = new Array();
                for (var i = 0; i < dataset.length; i++) {
                    if (dataset[i].checked)
                        value.push(dataset[i].value);
                }
                console.log(value, Row_Cluster_num, Col_Cluster_num)
                var div_height = $("#Cluster_left").height();
                console.log(div_height)
                var data_lenn, biwen_columnn, qita_columnn;
                // var corr_xv, corr_yu
                // var corr_uv
                $.ajax({
                    type: "POST",
                    url: "CoCluster4",
                    dataType: "json",
                    async: false,
                    data: {
                        "listt": JSON.stringify(listt),
                        "listt2": JSON.stringify(listt2),
                        "value": JSON.stringify(value),
                        "Row_Cluster_num": Row_Cluster_num,
                        "Col_Cluster_num": Col_Cluster_num,
                        "wenjian": wenjian,
                        "Relevance_sel": Relevance_sel,
                        "sample": sample
                    },    // 传递列表
                    success: function (data) {
                        // var bi_index=data['bi_index'];
                        // var qita_index=data['qita_index'];
                        console.log("data", data)
                        MW = data['MW'];
                        MW2 = data['MW2'];
                        qita2 = data['qita'];
                        biwen2 = data['biwen'];
                        U1 = data['biwen']
                        V1 = data['qita']
                        times = data['times'];
                        bi_name2=data['biwen_column2'];
                        qita_name2=data['qita_column2'];
                        jianyan_corr = data['jianyan_corr'];
                        hebing_data = data['hebing_data'];
                        option5.series = ser2(jianyan_corr);
                        option5.legend.selected = {
                            '3': false,
                            '4': false,
                            '5': false,
                            '6': false,
                            '7': false,
                            '8': false
                        }
                        console.log("000000",option5)
                        myChart5.setOption(option5, true);
                        myChart5_tu.setOption(option5_tu);
                        myChart5_tu.on('legendselectchanged', function(obj) {
                            var selected = obj.selected;
                            console.log(selected)
                            for (var i = 1; i < 9; i++) {
                                if (selected['UV'+i] == false) {
                                    state[i-1]=0
                                } else {
                                    state[i-1]=1
                                }
                            }
                            option5.legend.selected = {
                                1: state[0],
                                2: state[1],
                                3: state[2],
                                4: state[3],
                                5: state[4],
                                6: state[5],
                                7: state[6],
                                8: state[7],
                            }
                            myChart5.setOption(option5);
                        })
                        myChart5.on('click', function (params) {
                            console.log("params",params)
                            var ss = String(params.componentIndex) + '_' + String(params.data[0])
                            list_save.length = 0;
                            list_save.push(ss)
                            // if(list_save.indexOf(ss)!=-1)
                            // {
                            //     index=list_save.indexOf(ss)
                            //     list_save.splice(index, 1)
                            // }
                            // else {
                            //     list_save.push(ss)
                            // }
                            option5.legend.selected = {
                                1: state[0],
                                2: state[1],
                                3: state[2],
                                4: state[3],
                                5: state[4],
                                6: state[5],
                                7: state[6],
                                8: state[7],
                            }
                            option5.series[params.componentIndex].itemStyle = {
                                color: function (param) {
                                    var ss = String(param.componentIndex) + '_' + String(param.data[0])
                                    if ($.inArray(ss, list_save) >= 0) {
                                        // console.log("111")
                                        return 'black'
                                    } else {
                                        return peise2[params.componentIndex]
                                    }
                                }
                            }
                            // console.log(option5.series[params.componentIndex])
                            myChart5.setOption(option5);
                            // console.log("option5",option5)
                            // console.log(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample))
                            option5_2.series[2].data = biwen2[params.componentIndex];
                            option5_2.series[3].data = qita2[params.componentIndex];
                            option5_2.series[1].data = MW2.slice(sample * params.dataIndex, sample * params.dataIndex + parseInt(sample));
                            option5_2.series[4].data = biwen2[params.componentIndex].slice(sample * params.dataIndex, sample * params.dataIndex + parseInt(sample));
                            option5_2.series[5].data = qita2[params.componentIndex].slice(sample * params.dataIndex, sample * params.dataIndex + parseInt(sample));
                            // option5_2.xAxis.data=times.slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample));
                            option5_2.title.text = times.slice(sample * params.dataIndex, sample * params.dataIndex + parseInt(sample))[0] + '——' + times.slice(sample * params.dataIndex, sample * params.dataIndex + parseInt(sample)).slice(-1);
                            // console.log("option5_2", option5_2)
                            myChart5_2.setOption(option5_2);
                        });

                        option5_2.series[0].data = data['MW2'];
                        option5_2.series[1].data = [];
                        option5_2.series[4].data = [];
                        option5_2.series[5].data = [];
                        option5_2.series[2].data = data['biwen'][0];
                        option5_2.series[3].data = data['qita'][0];
                        option5_2.xAxis.data = data['time'];
                        option5_2.title.text = times[0] + '——' + times[times.length - 1];
                        console.log("option5_2",option5_2)
                        myChart5_2.setOption(option5_2,true);
                        $("#xgxtu").show()
                        var tu = data["tu"];
                        var jieshi = data['jieshi'];
                        var ydata = [];
                        var nn = data['nn'];
                        corr_uv = data['dcoef1'];
                        for (var j = 1; j < jieshi[0].length + 1; j++) {
                            ydata.push(j)
                        }
                        for (var i = 0; i < jieshi.length; i++) {
                            option4.series[i].data = jieshi[i]
                        }
                        option4.yAxis[0].data = ydata;
                        option4.yAxis[1].data = ydata
                        option4.yAxis[2].data = ydata
                        myChart4.setOption(option4, true)

                        var doma1 = document.getElementById("a1");
                        var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
                        var doma2 = document.getElementById("a2");
                        var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
                        var doma3 = document.getElementById("a3");
                        var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
                        var doma4 = document.getElementById("a4");
                        var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
                        var doma5 = document.getElementById("a5");
                        var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
                        var doma6 = document.getElementById("a6");
                        var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
                        var doma7 = document.getElementById("a7");
                        var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
                        var doma8 = document.getElementById("a8");
                        var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});

                        //动态添加数据
                        console.log("know wenjian", tongji)
                        // if(tongji.indexOf(wenjian)==-1){
                        //     allU1.push(U1)
                        //     allV1.push(V1)
                        //     alltu.push(tu)
                        //     allTime.push(times)
                        //     allcorruv.push(corr_uv)
                        //     tongji.push(wenjian)
                        // }


                        console.log("allU1", allU1)
                        console.log("allV1", allV1)
                        console.log("alltu", alltu)
                        console.log("allTime", allTime)
                        console.log("allCorruv", allcorruv)

                        // 当选择的模式为散点图时
                        if (style == 1) {
                            var optiona1 = {
                                title: {
                                    text: 123,
                                    left: 'center'
                                },
                                dataZoom:
                                    {
                                        type: 'inside', // 使鼠标在图表中时滚轮可用
                                        // xAxisIndex:[0],
                                    },
                                grid: {
                                    top: 5,
                                    bottom: 5,
                                    left: 5,
                                    right: 5
                                },
                                xAxis: {
                                    show: false,
                                    axisLine: {
                                        show: false
                                    },
                                    axisTick: {
                                        show: false
                                    },
                                },
                                yAxis: {
                                    show: false,
                                    axisLine: {
                                        show: false
                                    },
                                    axisTick: {
                                        show: false
                                    },
                                },
                                series: [{
                                    symbolSize: 4,
                                    itemStyle: {
                                        color: '#0780cf'
                                    },
                                    data: [],
                                    type: 'scatter',
                                    itemStyle:{
                                        opacity:1
                                    }
                                },
                                    {
                                        symbolSize: 4,
                                        itemStyle: {
                                            color: 'black'
                                        },
                                        data: [],
                                        type: 'scatter'
                                    },
                                ]
                            };

                            var sample1 = sample / 10;
                            // 触发点击事件 进行联动
                            myChart5.on('click', function (params) {
                                console.log("params", params)
                                // 设置对应的小方框中的U1 V1散点图
                                console.log("tu", tu)
                                console.log("tu[0]", tu[0])
                                // 获取下标
                                dataindex = params.dataIndex
                                // sum = daindex
                                console.log("sample1", sample1)

                                // 需要重新给散点图赋值 否则会被最后一个图的值覆盖

                                //对应 U1 和 V1
                                optiona1.series[0].data = tu[0]
                                optiona1.series[0].itemStyle.opacity=0.1
                                optiona1.series[0].itemStyle.color = color2(corr_uv[0]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[0]);
                                optiona1.series[1].data = tu[0].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[0];
                                myCharta1.setOption(optiona1, true);

                                //对应 U2 和 V2
                                optiona1.series[0].data = tu[1]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[1]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[1]);
                                optiona1.series[1].data = tu[1].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[1];
                                myCharta2.setOption(optiona1, true);

                                optiona1.series[0].data = tu[2]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[2]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[2]);
                                optiona1.series[1].data = tu[2].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[2];
                                myCharta3.setOption(optiona1, true);

                                optiona1.series[0].data = tu[3]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[3]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[3]);
                                optiona1.series[1].data = tu[3].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[3];
                                myCharta4.setOption(optiona1, true);

                                optiona1.series[0].data = tu[4]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[4]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[4]);
                                optiona1.series[1].data = tu[4].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[4];
                                myCharta5.setOption(optiona1, true);

                                optiona1.series[0].data = tu[5]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[5]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[5]);
                                optiona1.series[1].data = tu[5].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[5];
                                myCharta6.setOption(optiona1, true);

                                optiona1.series[0].data = tu[6]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[6]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[6]);
                                optiona1.series[1].data = tu[6].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[6];
                                myCharta7.setOption(optiona1, true);

                                optiona1.series[0].data = tu[7]
                                optiona1.series[0].itemStyle.color = color2(corr_uv[7]);
                                optiona1.series[1].itemStyle.color = color2(corr_uv[7]);
                                optiona1.series[1].data = tu[7].slice(sample1 * params.dataIndex, sample1 * params.dataIndex + parseInt(sample1));
                                optiona1.title.text = corr_uv[7];
                                myCharta8.setOption(optiona1, true);

                            })

                            // 设置对应的小方框中的U1 V1散点图
                            optiona1.series[0].data = tu[0];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[0]);
                            optiona1.title.text = corr_uv[0];
                            myCharta1.setOption(optiona1, true);

                            optiona1.series[0].data = tu[1];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[1]);
                            optiona1.title.text = corr_uv[1];
                            myCharta2.setOption(optiona1, true);

                            optiona1.series[0].data = tu[2];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[2]);
                            optiona1.title.text = corr_uv[2];
                            myCharta3.setOption(optiona1, true);

                            optiona1.series[0].data = tu[3];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[3]);
                            optiona1.title.text = corr_uv[3];
                            myCharta4.setOption(optiona1, true);

                            optiona1.series[0].data = tu[4];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[4]);
                            optiona1.title.text = corr_uv[4];
                            myCharta5.setOption(optiona1, true);

                            optiona1.series[0].data = tu[5];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[5]);
                            optiona1.title.text = corr_uv[5];
                            myCharta6.setOption(optiona1, true);

                            optiona1.series[0].data = tu[6];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[6]);
                            optiona1.title.text = corr_uv[6];
                            myCharta7.setOption(optiona1, true);

                            optiona1.series[0].data = tu[7];
                            optiona1.series[0].itemStyle.color = color2(corr_uv[7]);
                            optiona1.title.text = corr_uv[7];
                            myCharta8.setOption(optiona1, true);
                        }


                        // 当选择的样式为折线图时
                        if (style == 2) {

                            // 对应所有的 U1 V1 数据 生成折线图
                            numu1 = U1[0]
                            numv1 = V1[0]

                            numu2 = U1[1]
                            numv2 = V1[1]

                            numu3 = U1[2]
                            numv3 = V1[2]

                            numu4 = U1[3]
                            numv4 = V1[3]

                            numu5 = U1[4]
                            numv5 = V1[4]

                            numu6 = U1[5]
                            numv6 = V1[5]

                            numu7 = U1[6]
                            numv7 = V1[6]

                            numu8 = U1[7]
                            numv8 = V1[7]


                            var optiona1 = {
                                title: {
                                    text: '折线图',
                                    left: 'center'
                                },
                                dataZoom: [
                                    {
                                        type: 'inside', // 使鼠标在图表中时滚轮可用
                                        xAxisIndex: [0],
                                    },
                                ],
                                tooltip: {
                                    trigger: 'axis'
                                },

                                grid: {
                                    top: 5,
                                    bottom: 5,
                                    left: 5,
                                    right: 5
                                },
                                xAxis: {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: times,
                                    splitLine: false,
                                },
                                yAxis: {
                                    type: 'value',
                                    splitLine: false
                                },
                                series: [
                                    {
                                        name: 'U1',
                                        type: 'line',
                                        data: [],
                                        itemStyle: {
                                            color: '#e30039'
                                        }
                                    },
                                    {
                                        name: 'V1',
                                        type: 'line',
                                        data: [],
                                        itemStyle: {
                                            color: '#99cc00'
                                        }
                                    },
                                    {
                                        name: 'u1',
                                        type: 'line',
                                        data: [],
                                        itemStyle: {
                                            color: '#00a8e1'
                                        }
                                    },
                                    {
                                        name: 'v1',
                                        type: 'line',
                                        data: [],
                                        itemStyle: {
                                            color: '#800080'
                                        }
                                    },
                                ]
                            };

                            // 触发点击事件 进行折线图联动
                            myChart5.on('click', function (params) {
                                // if(style == 2){
                                console.log("params", params)

                                // 获取下标
                                dataindex = params.dataIndex
                                // sum = daindex
                                // console.log("sample1",sample1)

                                numu11 = []
                                numv11 = []

                                numu22 = []
                                numv22 = []

                                numu33 = []
                                numv33 = []

                                numu44 = []
                                numv44 = []

                                numu55 = []
                                numv55 = []

                                numu66 = []
                                numv66 = []

                                numu77 = []
                                numv77 = []

                                numu88 = []
                                numv88 = []

                                indexnum = params.dataIndex
                                console.log("indexnum", indexnum)
                                //对应 U1 和 V1

                                // 获取数组对应的起始值
                                a1 = sample * params.dataIndex
                                a2 = sample * params.dataIndex + parseInt(sample)

                                numu11 = numu1.slice(a1, a2)
                                numv11 = numv1.slice(a1, a2)
                                console.log("numu11", numu11)
                                console.log("numv11", numv11)
                                optiona1.series[0].data = numu1;
                                optiona1.series[1].data = numv1;
                                optiona1.series[2].data = numu11
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv11
                                optiona1.title.text = corr_uv[0];
                                myCharta1.setOption(optiona1, true);
                                console.log("know optiona1", optiona1)

                                numu22 = numu2.slice(a1, a2)
                                numv22 = numv2.slice(a1, a2)
                                optiona1.series[0].data = numu2;
                                optiona1.series[1].data = numv2;
                                optiona1.series[2].data = numu22
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv22
                                optiona1.title.text = corr_uv[1];
                                myCharta2.setOption(optiona1, true);

                                numu33 = numu3.slice(a1, a2)
                                numv33 = numv3.slice(a1, a2)
                                optiona1.series[0].data = numu3;
                                optiona1.series[1].data = numv3;
                                optiona1.series[2].data = numu33
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv33
                                optiona1.title.text = corr_uv[2];
                                myCharta3.setOption(optiona1, true);

                                numu44 = numu4.slice(a1, a2)
                                numv44 = numv4.slice(a1, a2)
                                optiona1.series[0].data = numu4;
                                optiona1.series[1].data = numv4;
                                optiona1.series[2].data = numu44
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv44
                                optiona1.title.text = corr_uv[3];
                                myCharta4.setOption(optiona1, true);

                                numu55 = numu5.slice(a1, a2)
                                numv55 = numv5.slice(a1, a2)
                                optiona1.series[0].data = numu5;
                                optiona1.series[1].data = numv5;
                                optiona1.series[2].data = numu55
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv55
                                optiona1.title.text = corr_uv[4];
                                myCharta5.setOption(optiona1, true);

                                numu66 = numu6.slice(a1, a2)
                                numv66 = numv6.slice(a1, a2)
                                optiona1.series[0].data = numu6;
                                optiona1.series[1].data = numv6;
                                optiona1.series[2].data = numu66
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv66
                                optiona1.title.text = corr_uv[5];
                                myCharta6.setOption(optiona1, true);

                                numu77 = numu7.slice(a1, a2)
                                numv77 = numv7.slice(a1, a2)
                                optiona1.series[0].data = numu7;
                                optiona1.series[1].data = numv7;
                                optiona1.series[2].data = numu77
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv77
                                optiona1.title.text = corr_uv[6];
                                myCharta7.setOption(optiona1, true);

                                numu88 = numu8.slice(a1, a2)
                                numv88 = numv8.slice(a1, a2)
                                optiona1.series[0].data = numu8;
                                optiona1.series[1].data = numv8;
                                optiona1.series[2].data = numu88
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data = numv88
                                optiona1.title.text = corr_uv[7];
                                myCharta8.setOption(optiona1, true);
                                // }
                            })

                            // 设置对应的小方框中的U1 V1散点图
                            optiona1.series[0].data = numu1;
                            optiona1.series[1].data = numv1;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                            optiona1.title.text = corr_uv[0];
                            console.log("optiona1",optiona1)
                            myCharta1.setOption(optiona1, true);

                            optiona1.series[0].data = numu2;
                            optiona1.series[1].data = numv2;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                            optiona1.title.text = corr_uv[1];
                            myCharta2.setOption(optiona1, true);

                            optiona1.series[0].data = numu3;
                            optiona1.series[1].data = numv3;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[2]);
                            optiona1.title.text = corr_uv[2];
                            myCharta3.setOption(optiona1, true);

                            optiona1.series[0].data = numu4;
                            optiona1.series[1].data = numv4;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[3]);
                            optiona1.title.text = corr_uv[3];
                            myCharta4.setOption(optiona1, true);

                            optiona1.series[0].data = numu5;
                            optiona1.series[1].data = numv5;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[4]);
                            optiona1.title.text = corr_uv[4];
                            myCharta5.setOption(optiona1, true);

                            optiona1.series[0].data = numu6;
                            optiona1.series[1].data = numv6;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[5]);
                            optiona1.title.text = corr_uv[5];
                            myCharta6.setOption(optiona1, true);

                            optiona1.series[0].data = numu7;
                            optiona1.series[1].data = numv7;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[6]);
                            optiona1.title.text = corr_uv[6];
                            myCharta7.setOption(optiona1, true);

                            optiona1.series[0].data = numu8;
                            optiona1.series[1].data = numv8;
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[7]);
                            optiona1.title.text = corr_uv[7];
                            myCharta8.setOption(optiona1, true);
                        }

                        biwen_column = data['biwen_column'];
                        qita_column = data['qita_column'];
                        biwen_columnn = biwen_column
                        qita_columnn = qita_column
                        corr_xv = data['corr_xv'];
                        corr_yu = data['corr_yu'];
                        // duibi1.push(data['corr_xv2'][0].concat(data['corr_yu2'][0]))
                        // duibi2.push(data['corr_xv2'][1].concat(data['corr_yu2'][1]))
                        // duibi3.push(data['corr_xv2'][2].concat(data['corr_yu2'][2]))
                        // mingzi
                        console.log("duibi1", duibi1, duibi2, duibi3)
                        // 存储的是皮尔逊相关性系数
                        zongti_xgx = data['corr'];
                        fangda1 = new Array(biwen_column.length).fill(0);
                        fangda2 = new Array(qita_column.length).fill(0);
                        var corr_xgx = data['Similarity_ma'];
                        var data_xgx = []
                        for (var i = 0; i < corr_xgx[0].length; i++) {
                            for (var j = 0; j < corr_xgx.length; j++) {
                                data_xgx.push([i, j, corr_xgx[j][i], biwen_column[j], qita_column[i]])
                            }
                        }
                        var option_xgx = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log(params)   //打印结果
                                    return params.data[3] + '、' + params.data[4] + ' : ' + params.data[2]     //根据需要拼接
                                },
                            },
                            grid: {
                                top: "3px",
                                left: "0px",
                                right: "5px",
                                bottom: "8px"
                            },
                            xAxis: {
                                show: false,
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                type: 'category'
                            },
                            yAxis: {
                                show: false,
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                type: 'category'
                            },
                            visualMap: {
                                min: -1,
                                max: 1,
                                calculable: true,
                                orient: 'horizontal',
                                dimension: 2,
                                show: false,
                                color: ['#d73027', '#ffffbf', '#0d59b7']
                            },
                            series: [{
                                symbolSize: 10,
                                symbol: 'roundRect',
                                data: data_xgx,
                                label: {
                                    show: true
                                },
                                type: 'scatter',
                                emphasis: {
                                    itemStyle: {
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                }
                            }]
                        };
                        myChartxgx.setOption(option_xgx)
                        myChartxgx.on('click', function (params) {
                            // console.log(params)
                            dianji3(params.data[0], params.data[1])
                        });

                        var data_bi = [], data_link1 = [], data_link2 = []
                        var link1 = [], link2 = [], link3 = [], link4 = [], link5 = [], link6 = []
                        for (var i = 1; i <= biwen_column.length; i++) {
                            console.log(i,data_bi)
                            data_bi.push([0.5, i, biwen_column[i - 1],bi_name2[i-1]])
                            // data_link1.push([0.5,i,'u'+i])
                            // data_link2.push([0.5,i,'v'+i])
                            link1.push([0, 27.5 * (i - 1) + 60])
                            // link1.push([0,94*(i-1)+60])
                            // link2.push([130,210+53*(i-1)])
                            // link3.push([0,210+53*(i-1)])
                            // link4.push([230,210+53*(i-1)])
                            // link5.push([0,210+53*(i-1)])
                        }
                        // data_bi.push([0.5,26])
                        // console.log("data_bi",data_bi)
                        for (var i = 1; i <= nn; i++) {
                            data_link1.push([0.5, i, 'u' + i, corr_uv[i]])
                            data_link2.push([0.5, i, 'v' + i, corr_uv[i]])
                            link2.push([140, 140 + 80 * (i - 1)])
                            link3.push([0, 140 + 80 * (i - 1)])
                            link4.push([230, 140 + 80 * (i - 1)])
                            link5.push([1, 140 + 80 * (i - 1)])
                            // link5.push([0,210+53*(i-1)])
                        }
                        for (var i = 0; i < link1.length; i++) {
                            for (var j = 0; j < link2.length; j++) {
                                // if(corr_xv[i][j]>=min_t && corr_xv[i][j]<=max_t){
                                //     all_link1.push({
                                //         "source": {"x": link1[i][0], "y": link1[i][1]},
                                //         "target": {"x": link2[j][0], "y": link2[j][1]},
                                //         "value": corr_xv[i][j],
                                //         // "value2":cluster_pj[i][j],
                                //         "start": i,
                                //         "end": j
                                //     })
                                // }
                                all_link1.push({
                                    "source": {"x": link1[i][0], "y": link1[i][1]},
                                    "target": {"x": link2[j][0], "y": link2[j][1]},
                                    "value": corr_xv[i][j],
                                    // "value2":cluster_pj[i][j],
                                    "start": i,
                                    "end": j
                                })
                            }
                        }
                        var all_lines1_1 = all_link1;
                        var lines1 = [];
                        var one_b = [], two_b = [], three_b = [];
                        var one_q = [], two_q = [], three_q = [];
                        for (var i = 0; i < all_lines1_1.length; i++) {
                            if (Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                                lines1.push(all_lines1_1[i])
                                if (all_lines1_1[i].end == 0 && Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                                    one_b.push(all_lines1_1[i].start)
                                }
                                if (all_lines1_1[i].end == 1 && Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                                    two_b.push(all_lines1_1[i].start)
                                }
                                if (all_lines1_1[i].end == 2 && Math.abs(all_lines1_1[i].value) <= max_t && Math.abs(all_lines1_1[i].value) >= min_t) {
                                    three_b.push(all_lines1_1[i].start)
                                }
                            }
                        }
                        bi_index.push(one_b)
                        bi_index.push(two_b)
                        bi_index.push(three_b)
                        console.log("bi_index", bi_index)
                        d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                        lineGraph1
                            // .append("g")
                            .selectAll('path')
                            .data(lines1)
                            .enter()
                            .append("path")
                            .attr("d", function (d, i) {
                                // console.log(d,i)
                                return createLink(d)
                            })
                            // .attr("stroke","#ccc")
                            // .attr("stroke-width",2)
                            .attr("stroke", function (d) {
                                return color2(d.value);
                            })
                            .attr("fill", 'none')
                            // .attr("stroke-width",5)
                            .attr("stroke-width", function (d) {
                                return linear2(Math.abs(d.value));
                            })
                            .style("opacity", 1)
                            .on("mouseenter", overed2)
                            .on("mouseout", outed2)
                        // .on("click",clicked)
                        // .on("mousemove", mousemove);
                        var data_gl = []
                        for (var i = 1; i <= qita_column.length; i++) {
                            data_gl.push([0, i, qita_column[i - 1],qita_name2[i - 1]])
                            // link6.push([98,23.5*(i-1)+60])
                            link6.push([153, 31.3 * (i - 1) + 60])
                        }
                        console.log("data_gl", data_gl)
                        // for (var i = 0; i < link3.length; i++) {
                        //     all_link2.push({
                        //         "source": {"x": link3[i][0], "y": link3[i][1]},
                        //         "target": {"x": link4[i][0], "y": link4[i][1]},
                        //         "value": corr_uv[i],
                        //         // "value2":cluster_pj[i][j],
                        //         "start": i,
                        //         "end": i
                        //     })
                        // }
                        for (var i = 0; i < link5.length; i++) {
                            for (var j = 0; j < link6.length; j++) {
                                // if(corr_yu[j][i]>0.3){
                                //     all_link3.push({
                                //         "source":{"x":link5[i][0],"y":link5[i][1]},
                                //         "target":{"x":link6[j][0],"y":link6[j][1]},
                                //         "value":corr_yu[j][i],
                                //         // "value2":cluster_pj[i][j],
                                //         "start":i,
                                //         "end":j
                                //     })
                                // }
                                // if(corr_yu[j][i]>=min_t && corr_yu[j][i]<=max_t){
                                //     all_link3.push({
                                //         "source": {"x": link5[i][0], "y": link5[i][1]},
                                //         "target": {"x": link6[j][0], "y": link6[j][1]},
                                //         "value": corr_yu[j][i],
                                //         // "value2":cluster_pj[i][j],
                                //         "start": i,
                                //         "end": j
                                //     })
                                // }
                                all_link3.push({
                                    "source": {"x": link5[i][0], "y": link5[i][1]},
                                    "target": {"x": link6[j][0], "y": link6[j][1]},
                                    "value": corr_yu[j][i],
                                    // "value2":cluster_pj[i][j],
                                    "start": i,
                                    "end": j
                                })
                            }
                        }
                        var all_lines1_3 = all_link3;
                        var lines3 = [];
                        for (var i = 0; i < all_lines1_3.length; i++) {
                            if (Math.abs(all_lines1_3[i].value) <= max_t && Math.abs(all_lines1_3[i].value) >= min_t) {
                                lines3.push(all_lines1_3[i])
                                if (all_lines1_3[i].start == 0 && Math.abs(all_lines1_3[i].value) <= max_t && Math.abs(all_lines1_3[i].value) >= min_t) {
                                    one_q.push(all_lines1_3[i].end)
                                }
                                if (all_lines1_3[i].start == 1 && Math.abs(all_lines1_3[i].value) <= max_t && Math.abs(all_lines1_3[i].value) >= min_t) {
                                    two_q.push(all_lines1_3[i].end)
                                }
                                if (all_lines1_3[i].start == 2 && Math.abs(all_lines1_3[i].value) <= max_t && Math.abs(all_lines1_3[i].value) >= min_t) {
                                    three_q.push(all_lines1_3[i].end)
                                }
                            }
                        }
                        console.log("6666666")
                        console.log("tongji",tongji)
                        console.log("allU1", allU1)
                        console.log("allV1", allV1)
                        console.log("alltu", alltu)
                        console.log("allTime", allTime)
                        console.log("allCorruv", allcorruv)

                        // 当所选取执行view的文件不在tongji数组中时 将数据添加到对应数组(例: allU1.push(u1))
                        if (tongji.indexOf(wenjian.split(")")[0].split("(")[1]) == -1) {
                            allU1.push(U1)
                            allV1.push(V1)
                            alltu.push(tu)
                            allTime.push(times)
                            allcorruv.push(corr_uv)
                            tongji.push(wenjian.split(")")[0].split("(")[1])
                            var all_lingkk1 = all_link1
                            var all_lingkk3 = all_link3
                            for (var i = 0; i < all_lingkk1.length; i++) {
                                all_lingkk1[i].new = tongji.indexOf(wenjian.split(")")[0].split("(")[1])
                            }
                            for (var i = 0; i < all_lingkk3.length; i++) {
                                all_lingkk3[i].new = tongji.indexOf(wenjian.split(")")[0].split("(")[1])
                            }
                            left_line.push(all_lingkk1)
                            right_line.push(all_lingkk3)
                            console.log('lines', left_line, right_line)
                        }
                        qita_index.push(one_q);
                        qita_index.push(two_q);
                        qita_index.push(three_q);
                        // 表示在记录中没有找到该文件 表示没有执行过
                        if (jiluu.indexOf(wenjian) == -1) {
                            data_U.push(data['biwen2'])
                            data_V.push(data['qita2'])
                            duibi1.push(data['corr_xv2'][0].concat(data['corr_yu2'][0]))
                            duibi2.push(data['corr_xv2'][1].concat(data['corr_yu2'][1]))
                            duibi3.push(data['corr_xv2'][2].concat(data['corr_yu2'][2]))
                            mingzi.push(wenjian.split(")")[0].split("(")[1])

                            save_yu.push(corr_yu);
                            save_xv.push(corr_xv);
                            save_hebingdata.push(hebing_data)

                            var strr = "<tr><td colspan='2'><input type='checkbox' id = 'mw"+index+"' value='"+index+"' onchange='Execute()'><div style='text-align:center; margin-top: -16px ;font-weight: normal' id='" + wenjian.split(")")[0].split("(")[1] + "' onclick='dianji4(this.id)'>" + wenjian.split(")")[0].split("(")[1] + "</div></td></td><td style='text-align:center;vertical-align:middle;'>" + "<div id='one" + index + "'style='display: block;height: 40px;'></div>" + "</td><td style='text-align:center;vertical-align:middle;'>" + "<div id='two" + index + "'style='display: block;height: 40px;'></div>" + "</td><td>" + "<div id='three" + index + "'style='display: block;height: 40px;'></div>" + "</td></tr>";
                            $("#tdData").append(strr);
                            // 画小饼图
                            var dom_0 = document.getElementById("one" + index);
                            var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
                            var dom_1 = document.getElementById("two" + index);
                            var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
                            var dom_2 = document.getElementById("three" + index);
                            var myChart_2 = echarts.init(dom_2, null, {renderer: 'svg'});
                            var data_0 = [], data_0_1 = [];
                            var data_1 = [], data_1_1 = [];
                            var data_2 = [], data_2_1 = [];
                            var bili = [0, 0, 0, 0, 0];
                            var bili_1 = [0, 0, 0, 0, 0];
                            var bili_2 = [0, 0, 0, 0, 0];
                            var bili2 = [2, 2, 4, 9, 8];
                            var bili_sum = 0;
                            var bili_sum_1 = 0;
                            var bili_sum_2 = 0;
                            // var bili_name = ['高温过热器', '后墙隔墙', '低温过热器', '垂直水冷壁', '螺旋水冷壁'];
                            for (var i = 0; i < qita_column.length; i++) {
                                if (qita_index[0].indexOf(i) > -1) {
                                    data_0.push({value: [Math.abs(corr_yu[i][0]), corr_yu[i][0]], name: qita_column[i]})
                                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i]})
                                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i]})
                                } else {
                                    data_0.push({
                                        value: [0, corr_yu[i][0]],
                                        name: qita_column[i],
                                        // itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                }
                                // data_0.push({value: [corr_yu[i][0], corr_yu[i][0]], name: qita_column[i]})
                                if (qita_index[1].indexOf(i) > -1) {
                                    data_1.push({value: [Math.abs(corr_yu[i][1]), corr_yu[i][1]], name: qita_column[i]})
                                } else {
                                    data_1.push({
                                        value: [0, corr_yu[i][1]],
                                        name: qita_column[i],
                                        // itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                                if (qita_index[2].indexOf(i) > -1) {
                                    data_2.push({value: [Math.abs(corr_yu[i][2]), corr_yu[i][2]], name: qita_column[i]})
                                } else {
                                    data_2.push({
                                        value: [0, corr_yu[i][2]],
                                        name: qita_column[i],
                                        // itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                            }

                            for (var i = 0; i < biwen_column.length; i++) {
                                if (bi_index[0].indexOf(i) > -1) {
                                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                                        bili[0] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                                        bili[1] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                                        bili[2] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                                        bili[3] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                                        bili[4] += Math.abs(corr_xv[i][0])
                                    }
                                    bili_sum += Math.abs(corr_xv[i][0])
                                    // data_0.push({value: [Math.abs(corr_xv[i][0]), corr_xv[i][0]], name: biwen_column[i]})
                                } else {
                                    // data_0.push({
                                    //     value: [0, corr_xv[i][0]],
                                    //     name: biwen_column[i],
                                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                                    // })
                                }
                                if (bi_index[1].indexOf(i) > -1) {
                                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                                        bili_1[0] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                                        bili_1[1] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                                        bili_1[2] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                                        bili_1[3] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                                        bili_1[4] += Math.abs(corr_xv[i][0])
                                    }
                                    bili_sum_1 += Math.abs(corr_xv[i][0])
                                    // data_1.push({value: [Math.abs(corr_xv[i][1]), corr_xv[i][1]], name: biwen_column[i]})
                                } else {
                                    // data_1.push({
                                    //     value: [0, corr_xv[i][1]],
                                    //     name: biwen_column[i],
                                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                                    // })
                                }
                                if (bi_index[2].indexOf(i) > -1) {
                                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                                        bili_2[0] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                                        bili_2[1] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                                        bili_2[2] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                                        bili_2[3] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                                        bili_2[4] += Math.abs(corr_xv[i][0])
                                    }
                                    bili_sum_2 += Math.abs(corr_xv[i][0])
                                    // data_2.push({value: [Math.abs(corr_xv[i][2]), corr_xv[i][2]], name: biwen_column[i]})
                                } else {
                                    // data_2.push({
                                    //     value: [0, corr_xv[i][2]],
                                    //     name: biwen_column[i],
                                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                                    // })
                                }
                            }
                            for (var i = 0; i < bili.length; i++) {
                                bili[i] = bili[i] / bili_sum
                                data_0_1.push({
                                    value: bili[i],
                                    name: bili_name[i],
                                    itemStyle: {color: peise[i]}
                                })
                                bili_1[i] = bili_1[i] / bili_sum_1
                                data_1_1.push({
                                    value: bili_1[i],
                                    name: bili_name[i],
                                    itemStyle: {color: peise[i]},

                                })
                                if(bili_sum_2!=0){
                                    bili_2[i] = bili_2[i] / bili_sum_2
                                }
                                // bili_2[i] = bili_2[i] / bili_sum_2
                                data_2_1.push({
                                    value: bili_2[i],
                                    name: bili_name[i],
                                    itemStyle: {color: peise[i]}
                                })
                            }
                            var option_0 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-20, -30],
                                    formatter: function (par) {
                                        if (par.componentIndex == 0) {
                                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                                        } else {
                                            return par.data.name + ": " + par.data.value.toFixed(3)
                                        }
                                        // return par.data.name + ": " + par.data.value[1].toFixed(2)
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex: 0,
                                    dimension: 0,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        name:'one'+index,
                                        type: 'pie',
                                        radius: ['50%', '100%'],
                                        roseType: 'area',
                                        avoidLabelOverlap: false,
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: 'one'+index,
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '40%'],
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: data_0_1
                                    },
                                ]
                            };
                            var option_1 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-80, -30],
                                    formatter: function (par) {
                                        if (par.componentIndex == 0) {
                                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                                        } else {
                                            return par.data.name + ": " + par.data.value.toFixed(3)
                                        }
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex: 0,
                                    dimension: 0,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['50%', '100%'],
                                        avoidLabelOverlap: false,
                                        roseType: 'area',
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '40%'],
                                        label: {
                                            show: false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: data_1_1
                                    },
                                ]
                            };
                            var option_2 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-180, -30],
                                    formatter: function (par) {
                                        if (par.componentIndex == 0) {
                                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                                        } else {
                                            return par.data.name + ": " + par.data.value.toFixed(3)
                                        }
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex: 0,
                                    dimension: 0,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['50%', '100%'],
                                        avoidLabelOverlap: false,
                                        roseType: 'area',
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '40%'],
                                        label: {
                                            show: false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: data_2_1
                                    },
                                ]
                            };
                            option_0.series[0].data = data_0
                            option_1.series[0].data = data_1
                            option_2.series[0].data = data_2
                            console.log("option_0",option_0,option_2,data_2)
                            myChart_0.setOption(option_0)
                            myChart_1.setOption(option_1)
                            myChart_2.setOption(option_2)
                            myChart_0.on('mouseover', function (params) {
                                console.log("myChart_1",params)
                                var dom22 = document.getElementById("output_cluster");
                                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                                var option22 = {
                                    tooltip: {
                                        formatter: function (params) {
                                            // console.log("1",params)
                                            return params.data[1]
                                        }
                                    },
                                    grid: {
                                        left: 10
                                    },
                                    xAxis: {
                                        show: false,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        max: 0.5,
                                        min: 0
                                    },
                                    yAxis: {
                                        show: false,
                                        inverse: true,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        min: 1,
                                        max: qita_column.length,
                                    },
                                    series: [
                                        {
                                            name: 'output_cluster',
                                            // singleAxisIndex: 0,
                                            // coordinateSystem: 'singleAxis',
                                            symbolSize: 15,
                                            data: data_gl,
                                            type: 'scatter',
                                            itemStyle: {
                                                color:'#5470c6',
                                                opacity: 1
                                            },
                                            label: {
                                                show: true,
                                                position: 'right',
                                                formatter: function (parma) {
                                                    // console.log(parma)
                                                    return parma.data[2]
                                                },
                                                color:'black'
                                            },
                                            emphasis: {
                                                scale: true,
                                                itemStyle: {
                                                    // color: 'red',
                                                    borderColor: 'black',
                                                    borderWidth: 2,
                                                    borderType: 'dotted',
                                                    borderJoin: 'miter',
                                                    borderCap: 'square'
                                                }
                                            },
                                        },
                                    ]
                                };
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_0.on('mouseout', function (params) {
                                var dom22 = document.getElementById("output_cluster");
                                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                                var option22 = {
                                    tooltip: {
                                        formatter: function (params) {
                                            // console.log("1",params)
                                            return params.data[1]
                                        }
                                    },
                                    grid: {
                                        left: 10
                                    },
                                    xAxis: {
                                        show: false,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        max: 0.5,
                                        min: 0
                                    },
                                    yAxis: {
                                        show: false,
                                        inverse: true,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        min: 1,
                                        max: qita_column.length,
                                    },
                                    series: [
                                        {
                                            name: 'output_cluster',
                                            // singleAxisIndex: 0,
                                            // coordinateSystem: 'singleAxis',
                                            symbolSize: 15,
                                            data: data_gl,
                                            type: 'scatter',
                                            itemStyle: {
                                                color:'#5470c6',
                                                opacity: 1
                                            },
                                            label: {
                                                show: true,
                                                position: 'right',
                                                formatter: function (parma) {
                                                    // console.log(parma)
                                                    return parma.data[2]
                                                },
                                                color:'black'
                                            },
                                            emphasis: {
                                                scale: true,
                                                itemStyle: {
                                                    // color: 'red',
                                                    borderColor: 'black',
                                                    borderWidth: 2,
                                                    borderType: 'dotted',
                                                    borderJoin: 'miter',
                                                    borderCap: 'square'
                                                }
                                            },
                                        },
                                    ]
                                };
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_1.on('mouseover', function (params) {
                                var dom22 = document.getElementById("output_cluster");
                                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                                var option22 = {
                                    tooltip: {
                                        formatter: function (params) {
                                            // console.log("1",params)
                                            return params.data[1]
                                        }
                                    },
                                    grid: {
                                        left: 10
                                    },
                                    xAxis: {
                                        show: false,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        max: 0.5,
                                        min: 0
                                    },
                                    yAxis: {
                                        show: false,
                                        inverse: true,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        min: 1,
                                        max: qita_column.length,
                                    },
                                    series: [
                                        {
                                            name: 'output_cluster',
                                            // singleAxisIndex: 0,
                                            // coordinateSystem: 'singleAxis',
                                            symbolSize: 15,
                                            data: data_gl,
                                            type: 'scatter',
                                            itemStyle: {
                                                color:'#5470c6',
                                                opacity: 1
                                            },
                                            label: {
                                                show: true,
                                                position: 'right',
                                                formatter: function (parma) {
                                                    // console.log(parma)
                                                    return parma.data[2]
                                                },
                                                color:'black'
                                            },
                                            emphasis: {
                                                scale: true,
                                                itemStyle: {
                                                    // color: 'red',
                                                    borderColor: 'black',
                                                    borderWidth: 2,
                                                    borderType: 'dotted',
                                                    borderJoin: 'miter',
                                                    borderCap: 'square'
                                                }
                                            },
                                        },
                                    ]
                                };
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_1.on('mouseout', function (params) {
                                var dom22 = document.getElementById("output_cluster");
                                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                                var option22 = {
                                    tooltip: {
                                        formatter: function (params) {
                                            // console.log("1",params)
                                            return params.data[1]
                                        }
                                    },
                                    grid: {
                                        left: 10
                                    },
                                    xAxis: {
                                        show: false,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        max: 0.5,
                                        min: 0
                                    },
                                    yAxis: {
                                        show: false,
                                        inverse: true,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        min: 1,
                                        max: qita_column.length,
                                    },
                                    series: [
                                        {
                                            name: 'output_cluster',
                                            // singleAxisIndex: 0,
                                            // coordinateSystem: 'singleAxis',
                                            symbolSize: 15,
                                            data: data_gl,
                                            type: 'scatter',
                                            itemStyle: {
                                                color:'#5470c6',
                                                opacity: 1
                                            },
                                            label: {
                                                show: true,
                                                position: 'right',
                                                formatter: function (parma) {
                                                    // console.log(parma)
                                                    return parma.data[2]
                                                },
                                                color:'black'
                                            },
                                            emphasis: {
                                                scale: true,
                                                itemStyle: {
                                                    // color: 'red',
                                                    borderColor: 'black',
                                                    borderWidth: 2,
                                                    borderType: 'dotted',
                                                    borderJoin: 'miter',
                                                    borderCap: 'square'
                                                }
                                            },
                                        },
                                    ]
                                };
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_2.on('mouseover', function (params) {
                                var dom22 = document.getElementById("output_cluster");
                                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                                var option22 = {
                                    tooltip: {
                                        formatter: function (params) {
                                            // console.log("1",params)
                                            return params.data[1]
                                        }
                                    },
                                    grid: {
                                        left: 10
                                    },
                                    xAxis: {
                                        show: false,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        max: 0.5,
                                        min: 0
                                    },
                                    yAxis: {
                                        show: false,
                                        inverse: true,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        min: 1,
                                        max: qita_column.length,
                                    },
                                    series: [
                                        {
                                            name: 'output_cluster',
                                            // singleAxisIndex: 0,
                                            // coordinateSystem: 'singleAxis',
                                            symbolSize: 15,
                                            data: data_gl,
                                            type: 'scatter',
                                            itemStyle: {
                                                color:'#5470c6',
                                                opacity: 1
                                            },
                                            label: {
                                                show: true,
                                                position: 'right',
                                                formatter: function (parma) {
                                                    // console.log(parma)
                                                    return parma.data[2]
                                                },
                                                color:'black'
                                            },
                                            emphasis: {
                                                scale: true,
                                                itemStyle: {
                                                    // color: 'red',
                                                    borderColor: 'black',
                                                    borderWidth: 2,
                                                    borderType: 'dotted',
                                                    borderJoin: 'miter',
                                                    borderCap: 'square'
                                                }
                                            },
                                        },
                                    ]
                                };
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_2.on('mouseout', function (params) {
                                var dom22 = document.getElementById("output_cluster");
                                var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                                var option22 = {
                                    tooltip: {
                                        formatter: function (params) {
                                            // console.log("1",params)
                                            return params.data[1]
                                        }
                                    },
                                    grid: {
                                        left: 10
                                    },
                                    xAxis: {
                                        show: false,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        max: 0.5,
                                        min: 0
                                    },
                                    yAxis: {
                                        show: false,
                                        inverse: true,
                                        axisLabel: {
                                            show: false
                                        },
                                        axisLine: {
                                            show: false
                                        },
                                        axisTick: {
                                            show: false
                                        },
                                        min: 1,
                                        max: qita_column.length,
                                    },
                                    series: [
                                        {
                                            name: 'output_cluster',
                                            // singleAxisIndex: 0,
                                            // coordinateSystem: 'singleAxis',
                                            symbolSize: 15,
                                            data: data_gl,
                                            type: 'scatter',
                                            itemStyle: {
                                                color:'#5470c6',
                                                opacity: 1
                                            },
                                            label: {
                                                fontSize:14,
                                                // fontFamily:"Times New Roman",
                                                show: true,
                                                position: 'right',
                                                formatter: function (parma) {
                                                    // console.log(parma)
                                                    return parma.data[2]
                                                },
                                                color:'black'
                                            },
                                            emphasis: {
                                                scale: true,
                                                itemStyle: {
                                                    // color: 'red',
                                                    borderColor: 'black',
                                                    borderWidth: 2,
                                                    borderType: 'dotted',
                                                    borderJoin: 'miter',
                                                    borderCap: 'square'
                                                }
                                            },
                                        },
                                    ]
                                };
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            // myChart_0.on('click', function (params) {
                            //     console.log("params",params)
                            //     $("#fangda").show()
                            //     var firstDivContent = document.getElementById(params.seriesName);
                            //     var secondDivContent = document.getElementById('fangda');
                            //     secondDivContent.innerHTML = firstDivContent.innerHTML;
                            //     console.log(secondDivContent.children())
                            // })
                            index = index + 1;
                            jiluu.push(wenjian);
                        }
                        else{
                            var index2=jiluu.indexOf(wenjian);
                            var dom_0 = document.getElementById("one" + index2);
                            var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
                            var dom_1 = document.getElementById("two" + index2);
                            var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
                            var dom_2 = document.getElementById("three" + index2);
                            var myChart_2 = echarts.init(dom_2, null, {renderer: 'svg'});
                            var data_0 = [], data_0_1 = [];
                            var data_1 = [], data_1_1 = [];
                            var data_2 = [], data_2_1 = [];
                            var bili = [0, 0, 0, 0, 0];
                            var bili_1 = [0, 0, 0, 0, 0];
                            var bili_2 = [0, 0, 0, 0, 0];
                            var bili2 = [2, 2, 4, 9, 8];
                            var bili_sum = 0;
                            var bili_sum_1 = 0;
                            var bili_sum_2 = 0;
                            // var bili_name = ['高温过热器', '后墙隔墙', '低温过热器', '垂直水冷壁', '螺旋水冷壁'];
                            for (var i = 0; i < qita_column.length; i++) {
                                if (qita_index[0].indexOf(i) > -1) {
                                    data_0.push({value: [Math.abs(corr_yu[i][0]), corr_yu[i][0]], name: qita_column[i]})
                                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i]})
                                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i]})
                                } else {
                                    data_0.push({
                                        value: [0, corr_yu[i][0]],
                                        name: qita_column[i],
                                        // itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                }
                                // data_0.push({value: [corr_yu[i][0], corr_yu[i][0]], name: qita_column[i]})
                                if (qita_index[1].indexOf(i) > -1) {
                                    data_1.push({value: [Math.abs(corr_yu[i][1]), corr_yu[i][1]], name: qita_column[i]})
                                } else {
                                    data_1.push({
                                        value: [0, corr_yu[i][1]],
                                        name: qita_column[i],
                                        // itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                                if (qita_index[2].indexOf(i) > -1) {
                                    data_2.push({value: [Math.abs(corr_yu[i][2]), corr_yu[i][2]], name: qita_column[i]})
                                } else {
                                    data_2.push({
                                        value: [0, corr_yu[i][2]],
                                        name: qita_column[i],
                                        // itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                            }

                            for (var i = 0; i < biwen_column.length; i++) {
                                if (bi_index[0].indexOf(i) > -1) {
                                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                                        bili[0] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                                        bili[1] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                                        bili[2] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                                        bili[3] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                                        bili[4] += Math.abs(corr_xv[i][0])
                                    }
                                    bili_sum += Math.abs(corr_xv[i][0])
                                    // data_0.push({value: [Math.abs(corr_xv[i][0]), corr_xv[i][0]], name: biwen_column[i]})
                                } else {
                                    // data_0.push({
                                    //     value: [0, corr_xv[i][0]],
                                    //     name: biwen_column[i],
                                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                                    // })
                                }
                                if (bi_index[1].indexOf(i) > -1) {
                                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                                        bili_1[0] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                                        bili_1[1] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                                        bili_1[2] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                                        bili_1[3] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                                        bili_1[4] += Math.abs(corr_xv[i][0])
                                    }
                                    bili_sum_1 += Math.abs(corr_xv[i][0])
                                    // data_1.push({value: [Math.abs(corr_xv[i][1]), corr_xv[i][1]], name: biwen_column[i]})
                                } else {
                                    // data_1.push({
                                    //     value: [0, corr_xv[i][1]],
                                    //     name: biwen_column[i],
                                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                                    // })
                                }
                                if (bi_index[2].indexOf(i) > -1) {
                                    if (biwen_column[i].indexOf('高温过热器') != -1) {
                                        bili_2[0] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('后墙隔墙') != -1) {
                                        bili_2[1] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('低温过热器') != -1) {
                                        bili_2[2] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('垂') != -1) {
                                        bili_2[3] += Math.abs(corr_xv[i][0])
                                    } else if (biwen_column[i].indexOf('水冷') != -1 && biwen_column[i].indexOf('螺') != -1) {
                                        bili_2[4] += Math.abs(corr_xv[i][0])
                                    }
                                    bili_sum_2 += Math.abs(corr_xv[i][0])
                                    // data_2.push({value: [Math.abs(corr_xv[i][2]), corr_xv[i][2]], name: biwen_column[i]})
                                } else {
                                    // data_2.push({
                                    //     value: [0, corr_xv[i][2]],
                                    //     name: biwen_column[i],
                                    //     // itemStyle: {color: 'gray', opacity: 0.2}
                                    // })
                                }
                            }
                            for (var i = 0; i < bili.length; i++) {
                                bili[i] = bili[i] / bili_sum
                                data_0_1.push({
                                    value: bili[i],
                                    name: bili_name[i],
                                    itemStyle: {color: peise[i]}
                                })
                                bili_1[i] = bili_1[i] / bili_sum_1
                                data_1_1.push({
                                    value: bili_1[i],
                                    name: bili_name[i],
                                    itemStyle: {color: peise[i]},

                                })
                                if(bili_sum_2!=0){
                                    bili_2[i] = bili_2[i] / bili_sum_2
                                }
                                // bili_2[i] = bili_2[i] / bili_sum_2
                                data_2_1.push({
                                    value: bili_2[i],
                                    name: bili_name[i],
                                    itemStyle: {color: peise[i]}
                                })
                            }
                            var option_0 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-20, -30],
                                    formatter: function (par) {
                                        if (par.componentIndex == 0) {
                                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                                        } else {
                                            return par.data.name + ": " + par.data.value.toFixed(3)
                                        }
                                        // return par.data.name + ": " + par.data.value[1].toFixed(2)
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex: 0,
                                    dimension: 0,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        name:'one'+index,
                                        type: 'pie',
                                        radius: ['50%', '100%'],
                                        roseType: 'area',
                                        avoidLabelOverlap: false,
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: 'one'+index,
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '40%'],
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: data_0_1
                                    },
                                ]
                            };
                            var option_1 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-80, -30],
                                    formatter: function (par) {
                                        if (par.componentIndex == 0) {
                                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                                        } else {
                                            return par.data.name + ": " + par.data.value.toFixed(3)
                                        }
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex: 0,
                                    dimension: 0,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['50%', '100%'],
                                        avoidLabelOverlap: false,
                                        roseType: 'area',
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '40%'],
                                        label: {
                                            show: false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: data_1_1
                                    },
                                ]
                            };
                            var option_2 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-180, -30],
                                    formatter: function (par) {
                                        if (par.componentIndex == 0) {
                                            return par.data.name + ": " + par.data.value[1].toFixed(2)
                                        } else {
                                            return par.data.name + ": " + par.data.value.toFixed(3)
                                        }
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex: 0,
                                    dimension: 0,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['50%', '100%'],
                                        avoidLabelOverlap: false,
                                        roseType: 'area',
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '40%'],
                                        label: {
                                            show: false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: data_2_1
                                    },
                                ]
                            };
                            option_0.series[0].data = data_0
                            option_1.series[0].data = data_1
                            option_2.series[0].data = data_2
                            // console.log("option_0",option_0,option_1)
                            myChart_0.setOption(option_0)
                            myChart_1.setOption(option_1)
                            myChart_2.setOption(option_2)
                            myChart_0.on('mouseover', function (params) {
                                console.log("myChart_0",params)
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_0.on('mouseout', function (params) {
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_1.on('mouseover', function (params) {
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_1.on('mouseout', function (params) {
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_2.on('mouseover', function (params) {
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_2.on('mouseout', function (params) {
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                        }
                        for (var k = 0; k < jiluu.length; k++) {
                            document.getElementById(jiluu[k].split(")")[0].split("(")[1]).style['font-weight'] = 'normal';
                        }
                        document.getElementById(wenjian.split(")")[0].split("(")[1]).style['font-weight'] = 'bold';
                        d3v3.select("#linkss3").select("svg").select("g").selectAll("path").remove()
                        lineGraph2
                            // .append("g")
                            .selectAll('path')
                            .data(all_link2)
                            .enter()
                            .append("path")
                            .attr("d", function (d, i) {
                                // console.log(d,i)
                                return createLink(d)
                            })
                            // .attr("stroke","#ccc")
                            // .attr("stroke-width",2)
                            .attr("stroke", function (d) {
                                return color(d.value);
                            })
                            .attr("fill", 'none')
                            .attr("stroke-width", function (d) {
                                return linear2(Math.abs(d.value));
                            })
                            // .attr("fill",function (d){
                            //     return color(d.value);
                            // })
                            .style("opacity", 0.7)
                        // .on("mouseover",overed)
                        // .on("mouseout",outed)
                        // .on("click",clicked)
                        // .on("mousemove", mousemove);
                        d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                        lineGraph3
                            // .append("g")
                            .selectAll('path')
                            .data(lines3)
                            .enter()
                            .append("path")
                            .attr("d", function (d, i) {
                                // console.log(d,i)
                                return createLink(d)
                            })
                            // .attr("stroke","#ccc")
                            // .attr("stroke-width",2)
                            .attr("stroke", function (d) {
                                return color2(d.value);
                            })
                            .attr("fill", 'none')
                            .attr("stroke-width", function (d) {
                                return linear2(Math.abs(d.value));
                            })
                            // .attr("fill",function (d){
                            //     return color(d.value);
                            // })
                            .style("opacity", 1)
                            .on("mouseover", overed3)
                            .on("mouseout", outed3)
                        // .on("click",clicked)
                        // .on("mousemove", mousemove);
                        $('#Cluster_left').empty();
                        $('#Cluster_right').empty();
                        $('#Cluster_left').append("<div style='z-index:9;position:absolute;height: 100%;width: 200px;' id='input_cluster" + "'></div>")
                        var dom = document.getElementById("input_cluster");
                        var myChart = echarts.init(dom, null, {renderer: 'svg'});
                        var option = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[1]
                                },
                            },
                            grid: {
                                top: 32,
                                bottom: 39,
                                right: 10
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 0,
                                max: 26
                            },
                            series: [
                                {
                                    name: 'input_cluster',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 15,
                                    data: data_bi,
                                    type: 'scatter',
                                    itemStyle: {
                                        color:'#5470c6',
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        position: 'left',
                                        fontSize:14,
                                        // fontFamily:"Times New Roman",
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[3]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart.setOption(option);
                        myChart.on('click', function (params) {
                            list_save4.length = 0;
                            list_save4.push(params.data[2])
                            option.series[0].itemStyle = {
                                color: function (param) {
                                    // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                    if (list_save4.indexOf(param.data[2]) >= 0) {
                                        return 'red'
                                    }
                                    else {
                                        return '#5470c6'
                                    }
                                },
                                opacity:1
                            }
                            myChart.setOption(option);
                            dianji2(params.seriesName, params.dataIndex)
                            dianji5(params.data[2])
                            if (listt.indexOf(params.dataIndex) != -1) {
                                // alert("ok")
                                index = listt.indexOf(params.dataIndex)
                                listt.splice(index, 1)
                                console.log("listt_2", listt)
                                listt_1.push(params.dataIndex)
                            } else if (listt_1.indexOf(params.dataIndex) != -1) {
                                index = listt_1.indexOf(params.dataIndex)
                                listt_1.splice(index, 1)
                                console.log("listt_2", listt)
                            } else {
                                // alert("yes")
                                listt.push(params.dataIndex)
                                console.log("listt_2", listt)
                            }
                            // console.log(fangda1[params.componentIndex])
                            // 将所点击的按钮 变大 并将其index值置为1
                            if (fangda1[params.dataIndex] == 0 & listt.indexOf(params.dataIndex) != -1) {
                                option9.series[params.dataIndex].symbolSize = 10;
                                option9.series[params.dataIndex].itemStyle.color = '#0780cf';
                                option9.series[params.dataIndex].itemStyle.opacity = 1;
                                fangda1[params.dataIndex] = 1
                            } else if (fangda1[params.dataIndex] == 1 & listt_1.indexOf(params.dataIndex) != -1) {
                                option9.series[params.dataIndex].symbolSize = 10;
                                option9.series[params.dataIndex].itemStyle.color = 'gray';
                                option9.series[params.dataIndex].itemStyle.opacity = 0.2;
                                fangda1[params.dataIndex] = -1
                            } else {
                                option9.series[params.dataIndex].symbolSize = 5;
                                option9.series[params.dataIndex].itemStyle.color = '#0780cf';
                                option9.series[params.dataIndex].itemStyle.opacity = 1;
                                fangda1[params.dataIndex] = 0
                            }
                            myChart9.setOption(option9)
                            console.log(listt)
                            // 存储的是 皮尔逊相关性系数
                            var shuju = [];
                            // 壁温参数只有8个
                            for (var i = 0; i < 25; i++) {
                                // 所选参数与自己的相关性
                                if (i == params.dataIndex) {
                                    shuju.push(
                                        {
                                            value: zongti_xgx[params.dataIndex][i],
                                            itemStyle: {
                                                color: '#a90000'
                                            }
                                        }
                                    )
                                }
                                // 所选参数与其他参数的相关性
                                else {
                                    shuju.push(zongti_xgx[params.dataIndex][i])
                                }
                            }
                            // console.log("shuju",shuju)
                            option7.series[0].data = shuju;
                            myChart7.setOption(option7);
                        });
                        $('#Cluster_right').append("<div style='z-index:9;position:absolute;margin-left: 0px;height: 100%;width: 200px;' id='output_cluster" + "'></div>")
                        var dom22 = document.getElementById("output_cluster");
                        var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                        var option22 = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[2]
                                },
                                position:'right'
                            },
                            grid: {
                                left: 10,
                                // right:0
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 1,
                                max: qita_column.length,
                            },
                            series: [
                                {
                                    name: 'output_cluster',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 15,
                                    data: data_gl,
                                    type: 'scatter',
                                    itemStyle: {
                                        color:'#5470c6',
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        fontSize:14,
                                        // fontFamily:"Times New Roman",
                                        position: 'right',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[3]
                                        },
                                        color:'black'
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart22.setOption(option22);
                        myChart22.on('click', function (params) {
                            list_save3.length = 0;
                            list_save3.push(params.data[2])
                            option22.series[0].itemStyle = {
                                color: function (param) {
                                    // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                    if (list_save3.indexOf(param.data[2]) >= 0) {
                                        return 'red'
                                    }
                                    else {
                                        return '#5470c6'
                                    }
                                },
                                opacity:1
                            }
                            myChart22.setOption(option22);
                            dianji2(params.seriesName, params.dataIndex)
                            if (listt2.indexOf(params.dataIndex) != -1) {
                                index = listt2.indexOf(params.dataIndex)
                                listt2.splice(index, 1)
                                listt2_1.push(params.dataIndex)
                            } else if (listt2_1.indexOf(params.dataIndex) != -1) {
                                index = listt2_1.indexOf(params.dataIndex)
                                listt2_1.splice(index, 1)
                                console.log("listt_2", listt)
                            } else {
                                listt2.push(params.dataIndex)
                            }
                            if (fangda2[params.dataIndex] == 0 & listt2.indexOf(params.dataIndex) != -1) {
                                option10.series[params.dataIndex].symbolSize = 10;
                                fangda2[params.dataIndex] = 1;
                                option10.series[params.dataIndex].itemStyle.color = '#0780cf';
                                option10.series[params.dataIndex].itemStyle.opacity = 1;
                            } else if (fangda2[params.dataIndex] == 1 & listt2_1.indexOf(params.dataIndex) != -1) {
                                option10.series[params.dataIndex].symbolSize = 10;
                                option10.series[params.dataIndex].itemStyle.color = 'gray';
                                option10.series[params.dataIndex].itemStyle.opacity = 0.2;
                                fangda2[params.dataIndex] = -1
                            } else {
                                option10.series[params.dataIndex].symbolSize = 5;
                                fangda2[params.dataIndex] = 0;
                                option10.series[params.dataIndex].itemStyle.color = '#0780cf';
                                option10.series[params.dataIndex].itemStyle.opacity = 1;
                            }
                            myChart10.setOption(option10)
                            // console.log(listt2)
                            var shuju = [];
                            for (var i = 0; i < 22; i++) {
                                if (i == params.dataIndex) {
                                    shuju.push(
                                        {
                                            value: zongti_xgx[25+params.dataIndex][25+i],
                                            itemStyle: {
                                                color: '#a90000'
                                            }
                                        }
                                    )
                                } else {
                                    shuju.push(zongti_xgx[25+params.dataIndex][25+i])
                                }
                            }
                            // console.log(shuju)
                            option8.series[0].data = shuju;
                            myChart8.setOption(option8);
                        });
                        // $('#linkss').html("");
                        // $('#linkss').append("<div style='margin-left: -50px;margin-top: 140px;height: 700px;width: 100px;' id='link1" + "'></div>")
                        var dom222 = document.getElementById("link1");
                        var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                        console.log("data_link1", data_link1)
                        var option222 = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[1]
                                }
                            },
                            grid: {
                                left: 10,
                                top: 10,
                                bottom:50
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 1,
                                max: 9
                                // max:qita_column.length,
                            },
                            series: [
                                {
                                    name: 'link1',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 20,
                                    data: data_link1,
                                    type: 'scatter',
                                    itemStyle: {
                                        color:'#d73027',
                                        // color: function (par) {
                                        //     return color2(par.data[3])
                                        // },
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        // position:'right',
                                        color: 'white',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[2]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart222.setOption(option222, true);
                        myChart222.on('click', function (params) {
                            // console.log(params)
                            dianji2(params.seriesName, params.dataIndex)
                        });
                        $('#linkss2').html("");
                        $('#linkss2').append("<div style='margin-top:130px;margin-left: 0px;height: 700px;width: 100px;' id='link2" + "'></div>")
                        var dom221 = document.getElementById("link2");
                        var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                        var option221 = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[1]
                                }
                            },
                            grid: {
                                left: 10,
                                top: 10,
                                bottom: 50
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 1,
                                max: 9
                                // max:qita_column.length,
                            },
                            series: [
                                {
                                    name: 'link2',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 20,
                                    data: data_link2,
                                    type: 'scatter',
                                    itemStyle: {
                                        color:'#d73027',
                                        // color: function (par) {
                                        //     return color2(par.data[3])
                                        // },
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        color: 'white',
                                        // position:'right',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[2]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart221.setOption(option221, true);
                        myChart221.on('click', function (params) {
                            // console.log(params)
                            dianji2(params.seriesName, params.dataIndex)
                        });

                    },
                    error: function (msg) {//ajax请求失败后触发的方法
                        console.log(msg); //弹出错误信息
                    }
                });
                var dataa1 = [];
                var dataa2 = [];
                var xx1 = [];
                var xx2 = [];
                //对应的是option9的小圆点 壁温参数
                for (var k = 0; k < biwen_columnn.length; k++) {
                    dataa1.push([k, biwen_columnn[k]])
                    xx1.push(k)
                }
                //对应的是option10的小圆点 影响壁温参数
                for (var k = 0; k < qita_columnn.length; k++) {
                    dataa2.push([k, qita_columnn[k]])
                    xx2.push(k)
                }

                console.log("dataa1", dataa1)
                console.log("dataa2", dataa2)
                option9.series = serrr(dataa1);
                option10.series = serrr(dataa2);
                option9.singleAxis.data = xx1;
                option10.singleAxis.data = xx2;
                console.log("option9", option9)
                console.log("option10", option10)

                myChart9.setOption(option9, true);
                myChart10.setOption(option10, true);
            }
        }

    }

    var option_tu = {
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            // top:'middle',
            x:'center',
            textStyle:{
                fontSize:13
            },
            icon:'roundRect',
            itemWidth: 18,
            itemHeight: 13,
            data:[],
            selected:{},
        },

        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            show:false,
            type: 'category',
            boundaryGap: false,
            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
        },
        yAxis: {
            show:false,
            type: 'value'
        },
        series: [
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[0]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[1]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[2]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[3]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[4]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[5]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[6]
                }
            },
            {
                name: '',
                type: 'line',
                data: [],
                itemStyle:{
                    color:peise[7]
                }
            },
        ]
    };

    // dat1存储 小圆点数字
    var dat1,dat2;
    var newdat1
    var newdat2
    var data_bi = [], data_link1 = [], data_link2 = []
    var flagstyle = 0
    var datt1 = []
    var datt2 = []

    // 执行多组对比 事件
    var jilu_tuli=[];
    // 定义全局变量 控制legend是否变化
    var legendtuflag = 0

    // 定义全局变量
    var jilu_tuli1 = []
    var numtemp = []
    var numss = []
    var is_sel = []

    function StartCOCluster5(){
        // 获取当前的是 多组对比还是单一对比状态
        var duiflag = $('#param-duibi option:selected').val()
        // 获取当前的是 散点图还是折线图
        var style1 = $('#param-style option:selected').val()

        if(duiflag == 1){

            // 单一对比时 将功率图例隐藏
            $("#tuli").hide()

            // 单一对比时 展示其他模块
            $('#figmodel1').show()
            $("#figmodel2").show()

            var mychar1 = document.getElementById("change1")
            mychar1.style.marginTop = '-1.5vh'

            var mychar2 = document.getElementById("change2")
            mychar2.style.height = "200px"

            // 单一对比时 隐藏表格
            var ttable = document.getElementById("changetable")
            ttable.style.display = 'none'

            var cca_model1 = document.getElementById("CCA_model1")
            cca_model1.style.display = 'none'

            // 将勾选框勾号去掉
            var lent = tongji.length
            for (var i=0 ; i<lent;i++){
                $('#mw'+i).prop('checked',false)
            }


            StartCOCluster4()
        }
        else {
            // 当切换到多组对比时 将其隐藏 并将本模块拉长
            console.log("data_U",data_U,data_V)
            $('#figmodel1').hide()
            $("#figmodel2").hide()
            $("#sa").show()
            var mychar1 = document.getElementById("change1")
            mychar1.style.marginTop = '-550px'

            var mychar2 = document.getElementById("change2")
            mychar2.style.height = "500px"

            // 将checknum设置为空 (Good Bye Checknum)
            // checknum = []
            console.log("kong checknum",checknum)
            // tuili对应的是功率范围的图例
            $("#tuli").show()
            var xin=[];
            $("#change2").height((tongji.length+1)*44)
            $("#changetable").height(668-(tongji.length+1)*44)
            for(var i=0;i<tongji.length;i++){
                if(checknum.length == 0){
                    console.log(i,tongji[i],tongji)
                    option_tu.series[i].name=tongji[i]
                    option_tu.legend.data = tongji;
                    // option_tu.legend[1].data = tongji.slice(4);
                }else{
                    if(checknum.indexOf(i) != -1){
                        xin.push(tongji[i])
                        option_tu.series[i].name=xin[i]
                        // option_tu.legend[0].data = xin.slice(0,4);
                        // option_tu.legend[1].data = xin.slice(4);
                    }
                    option_tu.legend.data = xin;
                    // option_tu.legend[1].data = xin.slice(4);
                }
            }

            // 动态设置功率图例状态
            var seltu = {}
            for(var i = 0; i < tongji.length; i++){
                if(i < 4){
                    seltu[tongji[i]] = true
                }else{
                    seltu[tongji[i]] = false
                }
            }

            console.log("know xin",xin)
            option_tu.legend.selected = seltu
            myCharttuli.setOption(option_tu,true);
            console.log("legend option_tu",option_tu)
            console.log("legend tu5",option5_tu)
            // 图例的隐藏功能
            myCharttuli.on('legendselectchanged', function(obj) {

                // 将checknum设置为空
                // checknum = []
                console.log("kong2 checknum",checknum)
                var selected = obj.selected;
                console.log(selected)
                console.log(tongji)
                is_sel = []

                legendtuflag = 1
                if(checknum.length == 0){
                    // 初始化先隐藏所有小图
                    for(var i = 0; i < 8; i++){
                        $('#a' + (i+1)).hide()
                    }
                    // numss记录所选中的图例下标
                    numss = []
                    jilu_tuli.length=0
                    for(var i=0;i<tongji.length;i++){
                        if(selected[tongji[i]]==false){
                            jilu_tuli.push(i)
                            // console.log("jilu_tuli",jilu_tuli)
                            // $("#a"+(i+1)).hide()
                        }
                        else{
                            is_sel.push(i)
                            numss.push(i)
                            // $("#a"+(i+1)).show()
                        }
                    }
                    for(var i = 0; i < numss.length; i++){
                        $('#a'+(i+1)).show()
                    }

                    console.log("numss",numss)
                    console.log("jilu_tuli",jilu_tuli)

                    console.log("lala dat1",dat1)
                    console.log("lala dat2",dat2)

                    datt1 = [[],[],[],[],[],[],[],[]]
                    datt2 = [[],[],[],[],[],[],[],[]]
                    // 给datt1重新赋值

                    for(var i=0; i<numss.length; i++){
                        temp = numss[i]
                        for(var j =0; j < dat1[temp].length;j++){
                            datt1[i][j] = dat1[temp][j]
                            datt2[i][j] = dat2[temp][j]
                        }
                        // 修改第二个属性 即:位置
                        datt1[i][1] = i+1
                        datt2[i][1] = i+1
                    }

                    console.log("lala datt1",datt1)
                    console.log("lala datt2",datt2)

                    var dom222 = document.getElementById("link1");
                    var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                    var option222 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link1',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: datt1,
                                type: 'scatter',
                                itemStyle: {
                                    color:'#d73027',
                                    // color:function(par){
                                    //     console.log("par1",par)
                                    //     // 如果在记录tuli中没找到则将颜色映射
                                    //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                    //         return '#d73027'
                                    //     }
                                    //     else{
                                    //         return 'white'
                                    //     }
                                    //     // return color2(par.data[3])
                                    // },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    // position:'right',
                                    color:'white',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart222.setOption(option222,true);
                    var dom221 = document.getElementById("link2");
                    var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                    var option221 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link2',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: datt2,
                                type: 'scatter',
                                itemStyle: {
                                    color:'#d73027',
                                    // color:function(par){
                                    //     console.log(jilu_tuli.indexOf(par.data[1]-1)==-1)
                                    //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                    //         return '#d73027'
                                    //     }
                                    //     else{
                                    //         return 'white'
                                    //     }
                                    //     // return color2(par.data[3])
                                    // },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    color:'white',
                                    // position:'right',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart221.setOption(option221,true);

                    // 调用changed函数 改变小图
                    changed()
                }
                else{
                    jilu_tuli1 = []
                    console.log("legend")
                    console.log("xin",xin)
                    console.log("numtemp",numtemp)
                    console.log("know selected",selected)
                    // 初始化 将所有模块隐藏
                    for(var i=0;i < tongji.length;i++){
                        $("#a"+(i+1)).hide()
                    }
                    for(var i=0; i<xin.length;i++){
                        if(selected[xin[i]] == false){
                            if(tongji.indexOf(xin[i])!=-1){
                                jilu_tuli1.push(i)
                               $("#a"+(i+1)).hide()
                            }
                        }
                        else{
                            if(tongji.indexOf(xin[i])!=-1){
                               $("#a"+(i+1)).show()
                            }
                        }
                    }
                    console.log("jilu_tuli1",jilu_tuli1)


                    var dom222 = document.getElementById("link1");
                    var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                    var option222 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link1',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: dat1,
                                type: 'scatter',
                                itemStyle: {
                                    // color:'#d73027',
                                    color:function(par){
                                        var numtempnew = []
                                        console.log("par",par)
                                        console.log("jilutili1",jilu_tuli1)
                                        console.log("numtemp",numtemp)
                                        for(var i=0; i<numtemp.length;i++){
                                            if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                                numtempnew.push(numtemp[i])
                                            }
                                        }
                                        console.log("numtempnew",numtempnew)

                                        console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                        if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                            return '#d73027'
                                        }
                                        else{
                                            return 'white'
                                        }
                                        // return color2(par.data[3])
                                    },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    // position:'right',
                                    color:'white',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart222.setOption(option222,true);
                    var dom221 = document.getElementById("link2");
                    var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                    var option221 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link2',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: dat2,
                                type: 'scatter',
                                itemStyle: {
                                    // color:'#d73027',
                                    color:function(par){
                                        var numtempnew = []
                                        console.log("par",par)
                                        console.log("jilutili1",jilu_tuli1)
                                        console.log("numtemp",numtemp)
                                        for(var i=0; i<numtemp.length;i++){
                                            if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                                numtempnew.push(numtemp[i])
                                            }
                                        }
                                        console.log("numtempnew",numtempnew)

                                        console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                        if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                            return '#d73027'
                                        }
                                        else{
                                            return 'white'
                                        }
                                        // return color2(par.data[3])
                                    },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    color:'white',
                                    // position:'right',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart221.setOption(option221,true);
                }

                var dat3=dat1;
                var dat4=dat2
                var max_t = inputsRy.theValue[1]/100;
                var min_t = inputsRy.theValue[0]/100;
                var xinline1=[]
                console.log(tu_line,checknum,is_sel,right_line,left_line)
                for (var i=0;i<tongji.length && i<8 && i<is_sel.length;i++){
                    console.log(i,is_sel[i])

                    if(checknum.length == 0){
                        var newline=left_line[is_sel[i]]
                        console.log(jilu_tuli,newline)
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[is_sel[i]]) {
                                newline[j].target.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline1.push(newline[j])
                            }
                        }
                    }else{
                        var checknum1 = []
                        for(var m = 0; m < checknum.length;m++){
                            checknum1.push(m)
                        }
                        if(checknum1.indexOf(i) != -1){
                            var newline=left_line[i]
                            for (var j=0;j<newline.length;j++) {
                                if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[is_sel[i]]) {
                                    newline[j].target.y=140 + 80 * i
                                    newline[j].color2=peise[i]
                                    xinline1.push(newline[j])
                                }
                            }
                        }
                    }
                }
                var xinline2=[]
                for (var i=0;i<tongji.length && i<8 && i<is_sel.length;i++){
                    if(checknum.length == 0){
                        var newline=right_line[is_sel[i]]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[is_sel[i]]) {
                                newline[j].source.y=140 + 80 * i
                                newline[j].target.x=149
                                newline[j].color2=peise[i]
                                xinline2.push(newline[j])
                            }
                        }
                    }else{
                        var checknum1 = []
                        for(var m = 0; m < checknum.length;m++){
                            checknum1.push(m)
                        }
                        if(checknum1.indexOf(i)!=-1){
                        var newline=right_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[is_sel[i]]) {
                                newline[j].source.y=140 + 80 * i
                                newline[j].target.x=149
                                newline[j].color2=peise[i]
                                xinline2.push(newline[j])
                                }
                            }
                        }
                    }

                }
                console.log(xinline1,xinline2)
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                lineGraph1
                    // .append("g")
                    .selectAll('path')
                    .data(xinline1)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    // .attr("stroke","#ccc")
                    // .attr("stroke-width",2)
                    .attr("stroke", function (d) {
                        return d.color2;
                    })
                    .attr("fill", 'none')
                    // .attr("stroke-width",5)
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover", overed2)
                    .on("mouseout", outed2)
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    // .append("g")
                    .selectAll('path')
                    .data(xinline2)
                    .enter()
                    .append("path")
                    .attr("d", function (d, i) {
                        // console.log(d,i)
                        return createLink(d)
                    })
                    // .attr("stroke","#ccc")
                    // .attr("stroke-width",2)
                    .attr("stroke", function (d) {
                        return d.color2;
                    })
                    .attr("fill", 'none')
                    .attr("stroke-width", function (d) {
                        return linear2(Math.abs(d.value));
                    })
                    // .attr("fill",function (d){
                    //     return color(d.value);
                    // })
                    .style("opacity", 1)
                    .on("mouseover", overed3)
                    .on("mouseout", outed3)
            })
            var qita_index=[],bi_index=[];
            var max_t = inputsRy.theValue[1]/100;
            var min_t = inputsRy.theValue[0]/100;
            all_link1=[],all_link2=[],all_link3=[]
            cunchu=[-1,-1,-1]
            $("#container11").hide()
            $("#container12").hide()
            $("#container7").show()
            $("#container8").show()
            $("#container9").show()
            $("#container10").show()

            var dataset = document.getElementsByName('save_file_chec');
            var Row_Cluster_num = 1;
            var style = $('#param-style option:selected').val()
            var Col_Cluster_num =1;
            var Relevance_sel  = $('#param-Relevance  option:selected').val();
            // var Algorithm  = $('#param-Algorithm  option:selected').val();
            var Algorithm  ='Single analysis';
            var wenjian = $('#param-dataset  option:selected').val();
            // console.log("know wenjian",wenjian)
            sample = $('#param-size').val();
            if(Algorithm=='Comparative analysis'){

            }
            else {
                var tucol=['#63b2ee','#76da91','#f8cb7f','#f89588','#7cd6cf','#9192ab','#7898e1','#efa666'];
                $("#b").show()
                var value = new Array();
                for (var i = 0; i < dataset.length; i++) {
                    if (dataset[i].checked)
                        value.push(dataset[i].value);
                }
                console.log(value, Row_Cluster_num, Col_Cluster_num)
                var div_height = $("#Cluster_left").height();
                console.log(div_height)
                var data_lenn, biwen_columnn, qita_columnn;
                // var corr_xv, corr_yu
                var corr_uv

                // 该ajax只为返回新的皮尔逊相关性
                $.ajax({
                    type:'POST',
                    url:'Cocluster4_2',
                    dataType:"json",
                    async:false,
                    data:{
                        "tongji":JSON.stringify(tongji),
                        "save_data":JSON.stringify(save_hebingdata)
                    },
                    success:function(data){
                        console.log("---data",data)
                        console.log("save_hebingdata",save_hebingdata)

                        duo_xgx = data['xgx']
                    }
                })

                $.ajax({
                    type: "POST",
                    url: "CoCluster4",
                    dataType: "json",
                    async: false,
                    data: {
                        "listt": JSON.stringify(listt),
                        "listt2": JSON.stringify(listt2),
                        "value": JSON.stringify(value),
                        "Row_Cluster_num": Row_Cluster_num,
                        "Col_Cluster_num": Col_Cluster_num,
                        "wenjian": wenjian,
                        "Relevance_sel":Relevance_sel,
                        "sample":sample
                    },    // 传递列表
                    success: function (data) {
                        // var bi_index=data['bi_index'];
                        // var qita_index=data['qita_index'];
                        console.log("data", data)
                        MW=data['MW'];
                        MW2=data['MW2'];
                        qita2=data['qita'];
                        biwen2=data['biwen'];
                        U1 = data['biwen']
                        V1 = data['qita']
                        times=data['times'];
                        jianyan_corr=data['jianyan_corr'];
                        option5.series=ser2(jianyan_corr);
                        option5.legend.selected={'3':false,'4':false,'5':false,'6':false,'7':false,'8':false}
                        myChart5.setOption(option5,true);
                        myChart5.on('click', function (params) {
                            console.log("params",params)
                            // console.log(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample))
                            option5_2.series[2].data=biwen2[params.componentIndex];
                            option5_2.series[3].data=qita2[params.componentIndex];
                            option5_2.series[1].data=MW2.slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample));
                            option5_2.series[4].data=biwen2[params.componentIndex].slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample));
                            option5_2.series[5].data=qita2[params.componentIndex].slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample));
                            // option5_2.xAxis.data=times.slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample));
                            option5_2.title.text=times.slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample))[0]+'——'+times.slice(sample*params.dataIndex,sample*params.dataIndex+parseInt(sample)).slice(-1);
                            console.log("option5_2",option5_2)
                            myChart5_2.setOption(option5_2);
                        });
                        option5_2.series[0].data=data['MW2'];
                        option5_2.series[2].data=data['biwen'][0];
                        option5_2.series[3].data=data['qita'][0];
                        option5_2.xAxis.data=data['times'];
                        option5_2.title.text=times[0]+'——'+times[times.length-1];
                        console.log("option5_2",option5_2)
                        myChart5_2.setOption(option5_2);

                        $("#xgxtu").hide()
                        var tu=data["tu"];
                        var jieshi = data['jieshi'];
                        var ydata = [];
                        var nn = data['nn'];
                        corr_uv = data['dcoef1'];
                        for (var j = 1; j < jieshi[0].length + 1; j++) {
                            ydata.push(j)
                        }
                        for (var i = 0; i < jieshi.length; i++) {
                            option4.series[i].data = jieshi[i]
                        }
                        option4.yAxis[0].data = ydata;
                        option4.yAxis[1].data = ydata;
                        option4.yAxis[2].data = ydata;
                        myChart4.setOption(option4, true)

                        var doma1 = document.getElementById("a1");
                        var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
                        var doma2 = document.getElementById("a2");
                        var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
                        var doma3 = document.getElementById("a3");
                        var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
                        var doma4 = document.getElementById("a4");
                        var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
                        var doma5 = document.getElementById("a5");
                        var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
                        var doma6 = document.getElementById("a6");
                        var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
                        var doma7 = document.getElementById("a7");
                        var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
                        var doma8 = document.getElementById("a8");
                        var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});


                        // 对应所有的 U1 V1 数据 生成折线图

                        console.log("know allu1",allU1)
                        console.log("know allv1",allV1)
                        console.log("know alltime",allTime)
                        //回来 获取多组对比当前(第一组数据)的的值
                        numallu = []
                        numallv = []
                        time = []
                        corruv = []
                        tudata = []

                        console.log("know checknum",checknum)
                        console.log("know lencheck",checknum.length)
                        // 当勾选框没有勾选时
                        if(checknum.length == 0){
                            for(var i = 0; i < allU1.length;i++){
                                numallu[i] = allU1[i][0]
                                numallv[i] = allV1[i][0]
                                time[i] = allTime[i]
                                corruv[i] = allcorruv[i][0]
                                tudata[i] = alltu[i][0]
                            }
                        }else{
                            for(var i = 0; i < checknum.length;i++){
                                numa = checknum[i]
                                // numallu[numa] = allU1[numa][0]
                                // numallv[numa] = allV1[numa][0]
                                // time[numa] = allTime[numa]
                                // corruv[numa] = allcorruv[numa][0]
                                // tudata[numa] = alltu[numa][0]
                                numallu[i] = allU1[numa][0]
                                numallv[i] = allV1[numa][0]
                                time[i] = allTime[numa]
                                corruv[i] = allcorruv[numa][0]
                                tudata[i] = alltu[numa][0]

                            }
                        }

                        // 当状态为散点图时
                        if(style1 == 1){
                            var optiona1 = {
                                // title:{
                                //     text:123,
                                //     left:'center'
                                // },
                                grid:{
                                    top:5,
                                    bottom:5,
                                    left:5,
                                    right:5
                                },
                                xAxis: {
                                    show: false,
                                    axisLine: {
                                        show: false
                                    },
                                    axisTick: {
                                        show: false
                                    },
                                },
                                dataZoom:
                                    {
                                        type: 'inside', // 使鼠标在图表中时滚轮可用
                                        // xAxisIndex:[0],
                                    },
                                yAxis: {
                                    show: false,
                                    axisLine: {
                                        show: false
                                    },
                                    axisTick: {
                                        show: false
                                    },
                                },
                                series: [{
                                    symbolSize:4,
                                    itemStyle:{
                                        color:'#0780cf'
                                    },
                                    data:[],
                                    type: 'scatter'
                                },
                                    {
                                        symbolSize:4,
                                        itemStyle:{
                                            color:'black'
                                        },
                                        data:[],
                                        type: 'scatter'
                                    },
                                ]
                            };

                            var sample1 = sample/5
                            // 触发点击事件 进行联动
                            myChart5.on('click', function (params) {
                                // if (style == 1){
                                console.log("params",params)
                                // 设置对应的小方框中的U1 V1散点图
                                console.log("tu",tu)
                                console.log("tu[0]",tu[0])
                                // 获取下标
                                dataindex = params.dataIndex
                                // sum = daindex
                                console.log("sample1",sample1)

                                // 需要重新给散点图赋值 否则会被最后一个图的值覆盖

                                //对应 U1 和 V1
                                optiona1.series[0].data=tu[0]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[1].data=tu[0].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[0];
                                myCharta1.setOption(optiona1,true)

                                //对应 U2 和 V2
                                optiona1.series[0].data=tu[1]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                                optiona1.series[1].data=tu[1].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[1];
                                myCharta2.setOption(optiona1,true);
                                console.log("optional1",optiona1)

                                optiona1.series[0].data=tu[2]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[2]);
                                optiona1.series[1].data=tu[2].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[2];
                                myCharta3.setOption(optiona1,true);

                                optiona1.series[0].data=tu[3]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[3]);
                                optiona1.series[1].data=tu[3].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[3];
                                myCharta4.setOption(optiona1,true);

                                optiona1.series[0].data=tu[4]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[4]);
                                optiona1.series[1].data=tu[4].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[4];
                                myCharta5.setOption(optiona1,true);

                                optiona1.series[0].data=tu[5]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[5]);
                                optiona1.series[1].data=tu[5].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[5];
                                myCharta6.setOption(optiona1,true);

                                optiona1.series[0].data=tu[6]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[6]);
                                optiona1.series[1].data=tu[6].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[6];
                                myCharta7.setOption(optiona1,true);

                                optiona1.series[0].data=tu[7]
                                optiona1.series[0].itemStyle.color=color2(corr_uv[7]);
                                optiona1.series[1].data=tu[7].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                                optiona1.title.text=corr_uv[7];
                                myCharta8.setOption(optiona1,true);
                                // }
                            })
                            console.log("want numss",numss)
                            // 当所有图例都选中时
                            if(numss.length == 0){
                                // 设置对应的小方框中的U1 V1散点图
                                var num1=$('#num1').val();
                                var num2=$('#num2').val();
                                for(var k=1;k<=data_U.length && k<9;k++){
                                    var U_data=[];
                                    var V_data=[];
                                    for(var i=0;i<data_U[k-1].length;i++){
                                        U_data.push([data_U[k-1][i][num1-1],data_V[k-1][i][num1-1]])
                                        V_data.push([data_U[k-1][i][num2-1],data_V[k-1][i][num2-1]])
                                    }
                                    console.log(U_data,V_data,k)
                                    eval('optiona1'+'.series[0].data=U_data')
                                    eval('optiona1'+'.series[1].data=V_data')
                                    eval("optiona1.series[0].itemStyle.color=color2(0.9);")
                                    eval("optiona1.series[1].itemStyle.color=color2(-0.9);")
                                    eval('myCharta'+k+'.setOption(optiona1,true);')
                                    console.log(optiona1)
                                }
                            }else{
                                console.log("want numss2",numss)
                                // 设置对应的小方框中的U1 V1散点图
                                var num1=$('#num1').val();
                                var num2=$('#num2').val();
                                for(var k=1;k<=data_U.length && k<9 && k<=numss.length;k++){
                                    var U_data=[];
                                    var V_data=[];
                                    for(var i=0;i<data_U[numss[k-1]].length;i++){
                                        U_data.push([data_U[k-1][i][num1-1],data_V[k-1][i][num1-1]])
                                        V_data.push([data_U[k-1][i][num2-1],data_V[k-1][i][num2-1]])
                                        // U_data.push([data_U[numss[i]][i][num1-1],data_U[numss[i]][i][num2-1]])
                                        // V_data.push([data_V[numss[i]][i][num1-1],data_V[numss[i]][i][num2-1]])
                                    }
                                    console.log("want to know",U_data,V_data,k)
                                    eval('optiona1'+'.series[0].data=U_data')
                                    eval('optiona1'+'.series[1].data=V_data')
                                    eval("optiona1.series[0].itemStyle.color=color2(0.9);")
                                    eval("optiona1.series[1].itemStyle.color=color2(-0.9);")
                                    eval('myCharta'+k+'.setOption(optiona1,true);')
                                    console.log(optiona1)
                                }
                            }

                            flagstyle = 1
                        }

                        // 当状态为折线图时
                        if(style1 == 2){
                            var optiona1 = {
                                title: {
                                    text: '折线图',
                                    left: 'center'
                                },
                                dataZoom:[
                                    {
                                        type: 'inside', // 使鼠标在图表中时滚轮可用
                                        xAxisIndex:[0],
                                    },
                                ],
                                tooltip: {
                                    trigger: 'axis'
                                },

                                grid: {
                                    top:5,
                                    bottom:5,
                                    left:5,
                                    right:5
                                },
                                xAxis: {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: times,
                                    splitLine: false,
                                },
                                yAxis: {
                                    type: 'value',
                                    splitLine: false
                                },
                                series: [
                                    {
                                        name: 'U1',
                                        type: 'line',
                                        // stack: '总量1',
                                        data: []
                                    },
                                    {
                                        name: 'V1',
                                        type: 'line',
                                        // stack: '总量2',
                                        data: []
                                    },
                                    {
                                        name: 'u1',
                                        type: 'line',
                                        // stack: '总量3',
                                        data: []
                                    },
                                    {
                                        name: 'v1',
                                        type: 'line',
                                        // stack: '总量4',
                                        data: []
                                    },
                                ]
                            };

                            // 触发点击事件 进行折线图联动
                            myChart5.on('click', function (params) {
                                // if(style == 2){
                                console.log("params",params)

                                // 获取下标
                                dataindex = params.dataIndex
                                // sum = daindex
                                // console.log("sample1",sample1)

                                numu11 = []
                                numv11 = []

                                numu22 = []
                                numv22 = []

                                numu33 = []
                                numv33 = []

                                numu44 = []
                                numv44 = []

                                numu55 = []
                                numv55 = []

                                numu66 = []
                                numv66 = []

                                numu77 = []
                                numv77 = []

                                numu88 = []
                                numv88 = []

                                indexnum = params.dataIndex
                                console.log("indexnum",indexnum)
                                //对应 U1 和 V1

                                // 获取数组对应的起始值
                                a1 = sample*params.dataIndex
                                a2 = sample*params.dataIndex+parseInt(sample)

                                numu11 = numu1.slice(a1,a2)
                                numv11 = numv1.slice(a1,a2)
                                console.log("numu11",numu11)
                                console.log("numv11",numv11)
                                optiona1.series[0].data=numu1;
                                optiona1.series[1].data=numv1;
                                optiona1.series[2].data=numu11
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv11
                                optiona1.title.text=corr_uv[0];
                                myCharta1.setOption(optiona1,true);
                                console.log("know optiona1",optiona1)

                                numu22 = numu2.slice(a1,a2)
                                numv22 = numv2.slice(a1,a2)
                                optiona1.series[0].data=numu2;
                                optiona1.series[1].data=numv2;
                                optiona1.series[2].data=numu22
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv22
                                optiona1.title.text=corr_uv[1];
                                myCharta2.setOption(optiona1,true);

                                numu33 = numu3.slice(a1,a2)
                                numv33 = numv3.slice(a1,a2)
                                optiona1.series[0].data=numu3;
                                optiona1.series[1].data=numv3;
                                optiona1.series[2].data=numu33
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv33
                                optiona1.title.text=corr_uv[2];
                                myCharta3.setOption(optiona1,true);

                                numu44 = numu4.slice(a1,a2)
                                numv44 = numv4.slice(a1,a2)
                                optiona1.series[0].data=numu4;
                                optiona1.series[1].data=numv4;
                                optiona1.series[2].data=numu44
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv44
                                optiona1.title.text=corr_uv[3];
                                myCharta4.setOption(optiona1,true);

                                numu55 = numu5.slice(a1,a2)
                                numv55 = numv5.slice(a1,a2)
                                optiona1.series[0].data=numu5;
                                optiona1.series[1].data=numv5;
                                optiona1.series[2].data=numu55
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv55
                                optiona1.title.text=corr_uv[4];
                                myCharta5.setOption(optiona1,true);

                                numu66 = numu6.slice(a1,a2)
                                numv66 = numv6.slice(a1,a2)
                                optiona1.series[0].data=numu6;
                                optiona1.series[1].data=numv6;
                                optiona1.series[2].data=numu66
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv66
                                optiona1.title.text=corr_uv[5];
                                myCharta6.setOption(optiona1,true);

                                numu77 = numu7.slice(a1,a2)
                                numv77 = numv7.slice(a1,a2)
                                optiona1.series[0].data=numu7;
                                optiona1.series[1].data=numv7;
                                optiona1.series[2].data=numu77
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv77
                                optiona1.title.text=corr_uv[6];
                                myCharta7.setOption(optiona1,true);

                                numu88 = numu8.slice(a1,a2)
                                numv88 = numv8.slice(a1,a2)
                                optiona1.series[0].data=numu8;
                                optiona1.series[1].data=numv8;
                                optiona1.series[2].data=numu88
                                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                                optiona1.series[3].data=numv88
                                optiona1.title.text=corr_uv[7];
                                myCharta8.setOption(optiona1,true);
                                // }
                            })

                            // console.log("numu1",numu1)
                            // console.log("numv1",numv1)
                            // 设置对应的小方框中的U1 V1折线图
                            optiona1.series[0].data=numallu[0];
                            optiona1.series[1].data=numallv[0];
                            optiona1.xAxis.data=time[0]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                            optiona1.title.text = corruv[0];
                            myCharta1.setOption(optiona1,true);
                            console.log("optiona1",optiona1)

                            optiona1.series[0].data=numallu[1];
                            optiona1.series[1].data=numallv[1];
                            optiona1.xAxis.data=time[1]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                            optiona1.title.text=corruv[1];
                            myCharta2.setOption(optiona1,true);
                            // console.log("optiona2",optiona2)

                            optiona1.series[0].data=numallu[2];
                            optiona1.series[1].data=numallv[2];
                            optiona1.xAxis.data=time[2]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[2]);
                            optiona1.title.text=corruv[2];
                            myCharta3.setOption(optiona1,true);

                            optiona1.series[0].data=numallu[3];
                            optiona1.series[1].data=numallv[3];
                            optiona1.xAxis.data=time[3]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[3]);
                            optiona1.title.text=corruv[3];
                            myCharta4.setOption(optiona1,true);

                            optiona1.series[0].data=numallu[4];
                            optiona1.series[1].data=numallv[4];
                            optiona1.xAxis.data=time[4]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[4]);
                            optiona1.title.text=corruv[4];
                            myCharta5.setOption(optiona1,true);

                            optiona1.series[0].data=numallu[5];
                            optiona1.series[1].data=numallv[5];
                            optiona1.xAxis.data=time[5]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[5]);
                            optiona1.title.text=corruv[5];
                            myCharta6.setOption(optiona1,true);

                            optiona1.series[0].data=numallu[6];
                            optiona1.series[1].data=numallv[6];
                            optiona1.xAxis.data=time[6]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[6]);
                            optiona1.title.text=corruv[6];
                            myCharta7.setOption(optiona1,true);

                            optiona1.series[0].data=numallu[7];
                            optiona1.series[1].data=numallv[7];
                            optiona1.xAxis.data=time[7]
                            // optiona1.series[0].itemStyle.color=color2(corr_uv[7]);
                            optiona1.title.text=corruv[7];
                            myCharta8.setOption(optiona1,true);
                        }


                        biwen_column = data['biwen_column'];
                        qita_column = data['qita_column'];
                        biwen_columnn = biwen_column
                        qita_columnn = qita_column
                        corr_xv = data['corr_xv'];
                        corr_yu = data['corr_yu'];

                        console.log("duibi1",duibi1,duibi2,duibi3)
                        zongti_xgx = data['corr'];
                        fangda1 = new Array(biwen_column.length).fill(0);
                        fangda2 = new Array(qita_column.length).fill(0);
                        var corr_xgx = data['Similarity_ma'];
                        var data_xgx = []
                        for (var i = 0; i < corr_xgx[0].length; i++) {
                            for (var j = 0; j < corr_xgx.length; j++) {
                                data_xgx.push([i, j, corr_xgx[j][i], biwen_column[j], qita_column[i]])
                            }
                        }
                        var option_xgx = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log(params)   //打印结果
                                    return params.data[3] + '、' + params.data[4] + ' : ' + params.data[2]     //根据需要拼接
                                },
                            },
                            grid: {
                                top: "5px",
                                left: "0px",
                                right: "5px",
                                bottom: "5px"
                            },
                            xAxis: {
                                show: false,
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                type: 'category'
                            },
                            yAxis: {
                                show: false,
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                type: 'category'
                            },
                            visualMap: {
                                min: -1,
                                max: 1,
                                calculable: true,
                                orient: 'horizontal',
                                dimension: 2,
                                show: false,
                                color: ['#d73027', '#ffffbf', '#0d59b7']
                            },
                            series: [{
                                // symbolSize: 30,
                                symbol: 'roundRect',
                                data: data_xgx,
                                label: {
                                    show: true
                                },
                                type: 'scatter',
                                emphasis: {
                                    itemStyle: {
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                }
                            }]
                        };
                        myChartxgx.setOption(option_xgx,true)
                        myChartxgx.on('click', function (params) {
                            // console.log(params)
                            dianji3(params.data[0], params.data[1])
                        });

                        // var data_bi = [], data_link1 = [], data_link2 = []
                        var link1 = [], link2 = [], link3 = [], link4 = [], link5 = [], link6 = []
                        for (var i = 1; i <= biwen_column.length; i++) {
                            data_bi.push([0.5, i, biwen_column[i - 1],bi_name2[i - 1]])
                            // data_link1.push([0.5,i,'u'+i])
                            // data_link2.push([0.5,i,'v'+i])

                            // 修改左边线段的长度和高度
                            link1.push([0, 27.5 * (i - 1) + 60])
                            // link1.push([0,94*(i-1)+60])
                            // link2.push([130,210+53*(i-1)])
                            // link3.push([0,210+53*(i-1)])
                            // link4.push([230,210+53*(i-1)])
                            // link5.push([0,210+53*(i-1)])
                        }
                        // data_bi.push([0.5,26])
                        // console.log("data_bi",data_bi)
                        data_link1.length = 0;
                        data_link2.length = 0;
                        for (var i = 1; i <= nn; i++) {
                            // data_link1 表示的时 u1 v1的小圆点
                            data_link1.push([0.5, i, 'u' + i,corr_uv[i]])
                            data_link2.push([0.5, i, 'v' + i,corr_uv[i]])
                            link2.push([140, 140 + 80 * (i - 1)])
                            link3.push([0, 140 + 80 * (i - 1)])
                            link4.push([230, 140 + 80 * (i - 1)])
                            link5.push([1, 140 + 80 * (i - 1)])
                            // link5.push([0,210+53*(i-1)])
                        }
                        for (var i = 0; i < link1.length; i++) {
                            for (var j = 0; j < link2.length; j++) {
                                // if(corr_xv[i][j]>=min_t && corr_xv[i][j]<=max_t){
                                //     all_link1.push({
                                //         "source": {"x": link1[i][0], "y": link1[i][1]},
                                //         "target": {"x": link2[j][0], "y": link2[j][1]},
                                //         "value": corr_xv[i][j],
                                //         // "value2":cluster_pj[i][j],
                                //         "start": i,
                                //         "end": j
                                //     })
                                // }
                                all_link1.push({
                                    "source": {"x": link1[i][0], "y": link1[i][1]},
                                    "target": {"x": link2[j][0], "y": link2[j][1]},
                                    "value": corr_xv[i][j],
                                    // "value2":cluster_pj[i][j],
                                    "start": i,
                                    "end": j
                                })
                            }
                        }
                        var all_lines1_1=all_link1;
                        var lines1=[];
                        var one_b=[],two_b=[],three_b=[];
                        var one_q=[],two_q=[],three_q=[];
                        for (var i=0;i<all_lines1_1.length;i++){
                            if (Math.abs(all_lines1_1[i].value)<=max_t && Math.abs(all_lines1_1[i].value)>=min_t){
                                lines1.push(all_lines1_1[i])
                                if(all_lines1_1[i].end==0){
                                    one_b.push(all_lines1_1[i].start)
                                }
                                if(all_lines1_1[i].end==1){
                                    two_b.push(all_lines1_1[i].start)
                                }
                                if(all_lines1_1[i].end==2){
                                    three_b.push(all_lines1_1[i].start)
                                }
                            }
                        }
                        bi_index.push(one_b)
                        bi_index.push(two_b)
                        bi_index.push(three_b)
                        var xinline1=[];
                        var cishu1=0,cishu2=0;
                        for (var i=0;i<left_line.length && i < 4 && i < 8;i++){
                            if(checknum.length == 0){
                                var newline=left_line[i]
                                for (var j=0;j<newline.length;j++) {
                                    if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==0) {
                                        newline[j].target.y=140 + 80 * i
                                        newline[j].color2=peise[i]
                                        // newline[j].push({'color2':peise[i]})
                                        xinline1.push(newline[j])
                                    }
                                }
                            }else{
                                if(checknum.indexOf(i) != -1){
                                    var newline=left_line[i]
                                    for (var j=0;j<newline.length;j++) {
                                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==0) {
                                            newline[j].target.y=140 + 80 * cishu2
                                            newline[j].color2=peise[i]
                                            // newline[j].push({'color2':peise[i]})
                                            xinline1.push(newline[j])
                                            }
                                    }
                                    cishu2+=1;
                                }
                            }

                        }
                        var xinline2=[]
                        for (var i=0;i<right_line.length && i < 4 && i < 8;i++){
                            if(checknum.length == 0){
                                var newline=right_line[i]
                                for (var j=0;j<newline.length;j++) {
                                    if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==0) {
                                        newline[j].source.y=140 + 80 * i
                                        newline[j].target.x=150
                                        // newline[j].source.x=150
                                        newline[j].color2=peise[i]
                                        xinline2.push(newline[j])
                                    }
                                }
                            }else{
                                if(checknum.indexOf(i) != -1){
                                    var newline=right_line[i]
                                    for (var j=0;j<newline.length;j++) {
                                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==0) {
                                            // newline[j].source.y=150 + 78 * i
                                            newline[j].source.y=140 + 80 * cishu1
                                            newline[j].target.x=150
                                            newline[j].color2=peise[i]
                                            xinline2.push(newline[j])
                                        }
                                    }
                                    cishu1+=1;
                                }
                            }
                        }
                        console.log("xinline1",xinline1,xinline2)
                        d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                        lineGraph1
                            // .append("g")
                            .selectAll('path')
                            .data(xinline1)
                            .enter()
                            .append("path")
                            .attr("d", function (d, i) {
                                // console.log(d,i)
                                return createLink(d)
                            })
                            // .attr("stroke","#ccc")
                            // .attr("stroke-width",2)
                            .attr("stroke", function (d) {
                                return d.color2;
                            })
                            .attr("fill", 'none')
                            // .attr("stroke-width",5)
                            .attr("stroke-width", function (d) {
                                return linear2(Math.abs(d.value));
                            })
                            .style("opacity", 1)
                            .on("mouseover", overed2)
                            .on("mouseout", outed2)
                        // .on("click",clicked)
                        // .on("mousemove", mousemove);
                        var data_gl = []
                        for (var i = 1; i <= qita_column.length; i++) {
                            data_gl.push([0, i, qita_column[i - 1],qita_name2[i - 1]])
                            // link6.push([98,23.5*(i-1)+60])
                            // 修改右边线段的长度和高度
                            link6.push([150, 31.3 * (i - 1) + 60])
                        }
                        console.log("data_gl", data_gl)
                        // for (var i = 0; i < link3.length; i++) {
                        //     all_link2.push({
                        //         "source": {"x": link3[i][0], "y": link3[i][1]},
                        //         "target": {"x": link4[i][0], "y": link4[i][1]},
                        //         "value": corr_uv[i],
                        //         // "value2":cluster_pj[i][j],
                        //         "start": i,
                        //         "end": i
                        //     })
                        // }
                        for (var i = 0; i < link5.length; i++) {
                            for (var j = 0; j < link6.length; j++) {
                                // if(corr_yu[j][i]>0.3){
                                //     all_link3.push({
                                //         "source":{"x":link5[i][0],"y":link5[i][1]},
                                //         "target":{"x":link6[j][0],"y":link6[j][1]},
                                //         "value":corr_yu[j][i],
                                //         // "value2":cluster_pj[i][j],
                                //         "start":i,
                                //         "end":j
                                //     })
                                // }
                                // if(corr_yu[j][i]>=min_t && corr_yu[j][i]<=max_t){
                                //     all_link3.push({
                                //         "source": {"x": link5[i][0], "y": link5[i][1]},
                                //         "target": {"x": link6[j][0], "y": link6[j][1]},
                                //         "value": corr_yu[j][i],
                                //         // "value2":cluster_pj[i][j],
                                //         "start": i,
                                //         "end": j
                                //     })
                                // }
                                all_link3.push({
                                    "source": {"x": link5[i][0], "y": link5[i][1]},
                                    "target": {"x": link6[j][0], "y": link6[j][1]},
                                    "value": corr_yu[j][i],
                                    // "value2":cluster_pj[i][j],
                                    "start": i,
                                    "end": j
                                })
                            }
                        }
                        var all_lines1_3=all_link3;
                        var lines3=[];
                        for (var i=0;i<all_lines1_3.length;i++){
                            if (Math.abs(all_lines1_3[i].value)<=max_t && Math.abs(all_lines1_3[i].value)>=min_t){
                                lines3.push(all_lines1_3[i])
                                if(all_lines1_3[i].start==0){
                                    one_q.push(all_lines1_3[i].end)
                                }
                                if(all_lines1_3[i].start==1){
                                    two_q.push(all_lines1_3[i].end)
                                }
                                if(all_lines1_3[i].start==2){
                                    three_q.push(all_lines1_3[i].end)
                                }
                            }
                        }
                        qita_index.push(one_q);
                        qita_index.push(two_q);
                        qita_index.push(three_q);
                        // 每执行一次CCA分析 duibi1数组中会添加一次矩阵
                        if(jiluu.indexOf(wenjian)==-1) {
                            duibi1.push(data['corr_xv2'][0].concat(data['corr_yu2'][0]))
                            duibi2.push(data['corr_xv2'][1].concat(data['corr_yu2'][1]))
                            duibi3.push(data['corr_xv2'][2].concat(data['corr_yu2'][2]))
                            mingzi.push(wenjian.split(")")[0].split("(")[1])
                            var strr = "<tr><td colspan='2'><div style='text-align:center;font-weight: normal' id='" + wenjian.split(")")[0].split("(")[1] + "' onclick='dianji4(this.id)'>" + wenjian.split(")")[0].split("(")[1] + "</div></td></td><td style='text-align:center;vertical-align:middle;'>" + "<div id='one" + index + "'style='display: block;height: 40px;'></div>" + "</td><td style='text-align:center;vertical-align:middle;'>" + "<div id='two" + index + "'style='display: block;height: 40px;'></div>" + "</td><td>" + "<div id='three" + index + "'style='display: block;height: 40px;'></div>" + "</td></tr>";
                            $("#tdData").append(strr);
                            var dom_0 = document.getElementById("one" + index);
                            var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
                            var dom_1 = document.getElementById("two" + index);
                            var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
                            var dom_2 = document.getElementById("three" + index);
                            var myChart_2 = echarts.init(dom_2, null, {renderer: 'svg'});
                            var data_0 = [];
                            var data_1 = [];
                            var data_2 = [];
                            for (var i = 0; i < qita_column.length; i++) {
                                if (qita_index[0].indexOf(i) > -1) {
                                    data_0.push({value: [1, corr_yu[i][0]], name: qita_column[i]})
                                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i]})
                                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i]})
                                } else {
                                    data_0.push({
                                        value: [1, corr_yu[i][0]],
                                        name: qita_column[i],
                                        itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                    // data_1.push({value: [1,corr_yu[i][1]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                    // data_2.push({value: [1,corr_yu[i][2]], name: qita_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                }
                                if (qita_index[1].indexOf(i) > -1) {
                                    data_1.push({value: [1, corr_yu[i][1]], name: qita_column[i]})
                                } else {
                                    data_1.push({
                                        value: [1, corr_yu[i][1]],
                                        name: qita_column[i],
                                        itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                                if (qita_index[2].indexOf(i) > -1) {
                                    data_2.push({value: [1, corr_yu[i][2]], name: qita_column[i]})
                                } else {
                                    data_2.push({
                                        value: [1, corr_yu[i][2]],
                                        name: qita_column[i],
                                        itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                            }

                            for (var i = 0; i < biwen_column.length; i++) {
                                if (bi_index[0].indexOf(i) > -1) {
                                    data_0.push({value: [1, corr_xv[i][0]], name: biwen_column[i]})
                                    // data_1.push({value: [1,corr_xv[i][1]], name: biwen_column[i]})
                                    // data_2.push({value: [1,corr_xv[i][2]], name: biwen_column[i]})
                                } else {
                                    data_0.push({
                                        value: [1, corr_xv[i][0]],
                                        name: biwen_column[i],
                                        itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                    // data_1.push({value: [1,corr_xv[i][1]], name: biwen_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                    // data_2.push({value: [1,corr_xv[i][2]], name: biwen_column[i],itemStyle:{color:'gray',opacity:0.2}})
                                }
                                if (bi_index[1].indexOf(i) > -1) {
                                    data_1.push({value: [1, corr_xv[i][1]], name: biwen_column[i]})
                                } else {
                                    data_1.push({
                                        value: [1, corr_xv[i][1]],
                                        name: biwen_column[i],
                                        itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                                if (bi_index[2].indexOf(i) > -1) {
                                    data_2.push({value: [1, corr_xv[i][2]], name: biwen_column[i]})
                                } else {
                                    data_2.push({
                                        value: [1, corr_xv[i][2]],
                                        name: biwen_column[i],
                                        itemStyle: {color: 'gray', opacity: 0.2}
                                    })
                                }
                            }
                            var option_0 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-20, -60],
                                    formatter: function (par) {
                                        return par.data.name + ": " + par.data.value[1].toFixed(2)
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    seriesIndex:1,
                                    dimension: 1,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['60%', '100%'],
                                        radius: ['60%', '100%'],
                                        avoidLabelOverlap: false,
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '50%'],
                                        label: {
                                            show:false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: 22, name: 'qita',itemStyle:{color:'#0e72cc'}},
                                            {value: 25, name: 'qita',itemStyle:{color:'#6ca30f'}},
                                        ]
                                    },
                                ]
                            };
                            var option_1 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-80, -60],
                                    formatter: function (par) {
                                        return par.data.name + ": " + par.data.value[1].toFixed(2)
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    dimension: 1,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['60%', '100%'],
                                        avoidLabelOverlap: false,
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '50%'],
                                        label: {
                                            show:false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: 22, name: 'qita',itemStyle:{color:'#0e72cc'}},
                                            {value: 25, name: 'qita',itemStyle:{color:'#6ca30f'}},
                                        ]
                                    },
                                ]
                            };
                            var option_2 = {
                                tooltip: {
                                    trigger: 'item',
                                    position: [-180, -60],
                                    formatter: function (par) {
                                        return par.data.name + ": " + par.data.value[1].toFixed(2)
                                    },
                                    textStyle: {
                                        fontSize: 12
                                    }
                                },
                                visualMap: {
                                    dimension: 1,
                                    show: false,
                                    max: 1,
                                    min: -1,
                                    color: ['#d73027', '#ffffbf', '#0d59b7'],
                                },
                                series: [
                                    {
                                        type: 'pie',
                                        radius: ['60%', '100%'],
                                        avoidLabelOverlap: false,
                                        label: {
                                            show: false,
                                            position: 'center'
                                        },
                                        emphasis: {
                                            label: {
                                                show: false,
                                                fontSize: '40',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: [10, -0.5], name: '搜索引擎'},
                                            {value: [10, 0.3], name: '直接访问'},
                                            {value: [10, 0.5], name: '邮件营销'},
                                            {value: [10, 0.8], name: '联盟广告'},
                                            {value: [10, 1], name: '视频广告'}
                                        ]
                                    },
                                    {
                                        name: '比例',
                                        type: 'pie',
                                        // selectedMode: 'single',
                                        radius: [0, '50%'],
                                        label: {
                                            show:false,
                                            position: 'inner',
                                            fontSize: 14,
                                        },
                                        labelLine: {
                                            show: false
                                        },
                                        data: [
                                            {value: 22, name: 'qita',itemStyle:{color:'#0e72cc'}},
                                            {value: 25, name: 'qita',itemStyle:{color:'#6ca30f'}},
                                        ]
                                    },
                                ]
                            };
                            option_0.series[0].data = data_0
                            option_1.series[0].data = data_1
                            option_2.series[0].data = data_2
                            myChart_0.setOption(option_0)
                            myChart_1.setOption(option_1)
                            myChart_2.setOption(option_2)
                            myChart_0.on('mouseover', function (params) {
                                // console.log(params)
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_0.on('mouseout', function (params) {
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_1.on('mouseover', function (params) {
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_1.on('mouseout', function (params) {
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_2.on('mouseover', function (params) {
                                if(params.componentIndex==1){
                                    $("#b"+(bili_name.indexOf(params.name)+1)).css("border-color","black");
                                }
                                else{
                                    list_save2.length = 0;
                                    list_save2.push(params.name)
                                    option22.series[0].itemStyle = {
                                        color: function (param) {
                                            // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                            if (list_save2.indexOf(param.data[2]) >= 0) {
                                                return 'black'
                                            } else {
                                                return '#5470c6'
                                            }
                                        },
                                        opacity:1
                                    }
                                    myChart22.setOption(option22);
                                }
                            })
                            myChart_2.on('mouseout', function (params) {
                                if(params.componentIndex==1) {
                                    $("#b" + (bili_name.indexOf(params.name) + 1)).css("border-color", "#d1b38a");
                                }
                                else{
                                    list_save2.length = 0;
                                    myChart22.setOption(option22);
                                }
                            })
                            index = index + 1;
                            jiluu.push(wenjian);
                        }
                        for(var k=0;k<jiluu.length;k++){
                            document.getElementById(jiluu[k].split(")")[0].split("(")[1]).style['font-weight']='normal';
                        }
                        document.getElementById(wenjian.split(")")[0].split("(")[1]).style['font-weight']='bold';
                        d3v3.select("#linkss3").select("svg").select("g").selectAll("path").remove()
                        lineGraph2
                            // .append("g")
                            .selectAll('path')
                            .data(all_link2)
                            .enter()
                            .append("path")
                            .attr("d", function (d, i) {
                                // console.log(d,i)
                                return createLink(d)
                            })
                            // .attr("stroke","#ccc")
                            // .attr("stroke-width",2)
                            .attr("stroke", function (d) {
                                return color(d.value);
                            })
                            .attr("fill", 'none')
                            .attr("stroke-width", function (d) {
                                return linear2(Math.abs(d.value));
                            })
                            // .attr("fill",function (d){
                            //     return color(d.value);
                            // })
                            .style("opacity", 0.7)
                        // .on("mouseover",overed)
                        // .on("mouseout",outed)
                        // .on("click",clicked)
                        // .on("mousemove", mousemove);
                        d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                        lineGraph3
                            // .append("g")
                            .selectAll('path')
                            .data(xinline2)
                            .enter()
                            .append("path")
                            .attr("d", function (d, i) {
                                // console.log(d,i)
                                return createLink(d)
                            })
                            // .attr("stroke","#ccc")
                            // .attr("stroke-width",2)
                            .attr("stroke", function (d) {
                                return d.color2;
                            })
                            .attr("fill", 'none')
                            .attr("stroke-width", function (d) {
                                return linear2(Math.abs(d.value));
                            })
                            // .attr("fill",function (d){
                            //     return color(d.value);
                            // })
                            .style("opacity", 1)
                            .on("mouseover", overed3)
                            .on("mouseout", outed3)
                        // .on("click",clicked)
                        // .on("mousemove", mousemove);
                        $('#Cluster_left').empty();
                        $('#Cluster_right').empty();
                        $('#Cluster_left').append("<div style='z-index:9;position:absolute;height: 100%;width: 200px;' id='input_cluster" + "'></div>")
                        var dom = document.getElementById("input_cluster");
                        var myChart = echarts.init(dom, null, {renderer: 'svg'});
                        var option = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[3]
                                }
                            },
                            grid: {
                                top: 32,
                                bottom: 39,
                                right: 10
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 0,
                                max: 26
                            },
                            series: [
                                {
                                    name: 'input_cluster',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 15,
                                    data: data_bi,
                                    type: 'scatter',
                                    itemStyle: {
                                        // color:'gray',
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        fontSize:14,
                                        // fontFamily:"Times New Roman",
                                        position: 'left',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[3]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart.setOption(option);
                        myChart.on('click', function (params) {
                            // console.log(params)
                            list_save4.length = 0;
                            list_save4.push(params.data[2])
                            option.series[0].itemStyle = {
                                color: function (param) {
                                    // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                    if (list_save4.indexOf(param.data[2]) >= 0) {
                                        return 'red'
                                    }
                                    else {
                                        return '#5470c6'
                                    }
                                },
                                opacity:1
                            }
                            myChart.setOption(option);
                            // dianji2(params.seriesName, params.dataIndex)
                            dianji5(params.data[2])
                            if(listt.indexOf(params.dataIndex)!=-1)
                            {
                                // alert("ok")
                                index=listt.indexOf(params.dataIndex)
                                listt.splice(index, 1)
                                console.log("listt_2",listt)
                                listt_1.push(params.dataIndex)
                            }
                            else if(listt_1.indexOf(params.dataIndex)!=-1){
                                index=listt_1.indexOf(params.dataIndex)
                                listt_1.splice(index, 1)
                                console.log("listt_2",listt)
                            }
                            else {
                                // alert("yes")
                                listt.push(params.dataIndex)
                                console.log("listt_2",listt)
                            }
                            // console.log(fangda1[params.componentIndex])
                            // 将所点击的按钮 变大 并将其index值置为1
                            if(fangda1[params.dataIndex]==0 & listt.indexOf(params.dataIndex)!=-1){
                                option9.series[params.dataIndex].symbolSize=10;
                                option9.series[params.dataIndex].itemStyle.color='#0780cf';
                                option9.series[params.dataIndex].itemStyle.opacity=1;
                                fangda1[params.dataIndex]=1
                            }
                            else if(fangda1[params.dataIndex]==1 & listt_1.indexOf(params.dataIndex)!=-1){
                                option9.series[params.dataIndex].symbolSize=10;
                                option9.series[params.dataIndex].itemStyle.color='gray';
                                option9.series[params.dataIndex].itemStyle.opacity=0.2;
                                fangda1[params.dataIndex]=-1
                            }
                            else {
                                option9.series[params.dataIndex].symbolSize=5;
                                option9.series[params.dataIndex].itemStyle.color='#0780cf';
                                option9.series[params.dataIndex].itemStyle.opacity=1;
                                fangda1[params.dataIndex]=0
                            }
                            myChart9.setOption(option9)
                            console.log(listt)
                            // 存储的是 皮尔逊相关性系数
                            var shuju = [];
                            // 壁温参数只有8个
                            for (var i = 0;i < 25; i++){
                                // 所选参数与自己的相关性
                                if (i == params.dataIndex){
                                    shuju.push(
                                        {
                                            value: zongti_xgx[params.dataIndex][i],
                                            itemStyle: {
                                                color: '#a90000'
                                            }
                                        }
                                    )
                                }
                                // 所选参数与其他参数的相关性
                                else{
                                    shuju.push(zongti_xgx[params.dataIndex][i])
                                }
                            }
                            // console.log("shuju",shuju)
                            option7.series[0].data = shuju;
                            myChart7.setOption(option7);
                        });
                        $('#Cluster_right').append("<div style='z-index:9;position:absolute;margin-left: -5px;height: 100%;width: 200px;' id='output_cluster" + "'></div>")
                        var dom22 = document.getElementById("output_cluster");
                        var myChart22 = echarts.init(dom22, null, {renderer: 'svg'});
                        var option22 = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[1]
                                }
                            },
                            grid: {
                                left: 10
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 1,
                                max: qita_column.length,
                            },
                            series: [
                                {
                                    name: 'output_cluster',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 15,
                                    data: data_gl,
                                    type: 'scatter',
                                    itemStyle: {
                                        // color:'gray',
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        fontSize:14,
                                        // fontFamily:"Times New Roman",
                                        position: 'right',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[3]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart22.setOption(option22);
                        myChart22.on('click', function (params) {
                            list_save3.length = 0;
                            list_save3.push(params.data[2])
                            option22.series[0].itemStyle = {
                                color: function (param) {
                                    // console.log("list_save2",param,param.data[2],list_save2,list_save2.indexOf(param.data[2]))
                                    if (list_save3.indexOf(param.data[2]) >= 0) {
                                        return 'red'
                                    }
                                    else {
                                        return '#5470c6'
                                    }
                                },
                                opacity:1
                            }
                            myChart22.setOption(option22);
                            // dianji2(params.seriesName, params.dataIndex)
                            if(listt2.indexOf(params.dataIndex)!=-1)
                            {
                                index=listt2.indexOf(params.dataIndex)
                                listt2.splice(index, 1)
                                listt2_1.push(params.dataIndex)
                            }
                            else if(listt2_1.indexOf(params.dataIndex)!=-1){
                                index=listt2_1.indexOf(params.dataIndex)
                                listt2_1.splice(index, 1)
                                console.log("listt_2",listt)
                            }
                            else {
                                listt2.push(params.dataIndex)
                            }
                            if(fangda2[params.dataIndex]==0 & listt2.indexOf(params.dataIndex)!=-1){
                                option10.series[params.dataIndex].symbolSize=10;
                                fangda2[params.dataIndex]=1;
                                option10.series[params.dataIndex].itemStyle.color='#0780cf';
                                option10.series[params.dataIndex].itemStyle.opacity=1;
                            }
                            else if(fangda2[params.dataIndex]==1 & listt2_1.indexOf(params.dataIndex)!=-1){
                                option10.series[params.dataIndex].symbolSize=10;
                                option10.series[params.dataIndex].itemStyle.color='gray';
                                option10.series[params.dataIndex].itemStyle.opacity=0.2;
                                fangda2[params.dataIndex]=-1
                            }
                            else {
                                option10.series[params.dataIndex].symbolSize=5;
                                fangda2[params.dataIndex]=0;
                                option10.series[params.dataIndex].itemStyle.color='#0780cf';
                                option10.series[params.dataIndex].itemStyle.opacity=1;
                            }
                            myChart10.setOption(option10)
                            // console.log(listt2)
                            var shuju=[];
                            for (var i = 0;i < 22;i++){
                                if (i==params.dataIndex){
                                    shuju.push(
                                        {
                                            value: zongti_xgx[25+params.dataIndex][25+i],
                                            itemStyle: {
                                                color: '#a90000'
                                            }
                                        }
                                    )
                                }
                                else{
                                    shuju.push(zongti_xgx[25+params.dataIndex][25+i])
                                }
                            }
                            // console.log(shuju)
                            option8.series[0].data=shuju;
                            myChart8.setOption(option8);
                        });
                        // $('#linkss').html("");
                        // $('#linkss').append("<div style='margin-left: -50px;margin-top: 140px;height: 700px;width: 100px;' id='link1" + "'></div>")
                        var dom222 = document.getElementById("link1");
                        var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                        console.log("data_link1", data_link1)
                        // console.log("link2",link2)
                        // console.log("link3",link3)
                        // console.log("link4",link4)
                        // console.log("link5",link5)

                        dat1=data_link1;
                        for(var i = 0; i < 8;i++){
                            dat1[i][2] = 'u1'
                        }
                        newdat1 = data_link1
                        for(var i = 0; i < 8;i++){
                            newdat1[i][2] = 'u1'
                        }

                        dat2=data_link2;
                        for(var i = 0; i < 8;i++){
                            dat2[i][2] = 'v1'
                        }
                        newdat2 = data_link1
                        for(var i = 0; i < 8;i++){
                            newdat2[i][2] = 'u1'
                        }

                        var option222 = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[1]
                                }
                            },
                            grid: {
                                left: 10,
                                top: 10,
                                bottom:50
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 1,
                                max: 9
                                // max:qita_column.length,
                            },
                            series: [
                                {
                                    name: 'link1',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 20,
                                    data: dat1,
                                    type: 'scatter',
                                    itemStyle: {
                                        color:'#d73027',
                                        // color:function(par){
                                        //     return color2(par.data[3])
                                        // },
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        // position:'right',
                                        color:'white',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[2]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart222.setOption(option222,true);
                        // 左边按钮 点击事件(典型变量 减操作)
                        myChart222.off('click')
                        myChart222.on('click', function (params) {
                            var duiflag = $('#param-duibi option:selected').val()
                            if(duiflag == 1){
                                dianji2(params.seriesName, params.dataIndex)
                            }
                            // 否则执行多组对比
                            else {
                                subUV(params.dataIndex)
                                // alert(params.dataIndex)
                            }
                        });
                        console.log("dat1",dat1)
                        console.log("dat2",dat2)
                        $('#linkss2').html("");
                        $('#linkss2').append("<div style='margin-top:130px;margin-left: 0px;height: 700px;width: 100px;' id='link2" + "'></div>")
                        var dom221 = document.getElementById("link2");
                        var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                        var option221 = {
                            tooltip: {
                                formatter: function (params) {
                                    // console.log("1",params)
                                    return params.data[1]
                                }
                            },
                            grid: {
                                left: 10,
                                top:10,
                                bottom: 50
                            },
                            xAxis: {
                                show: false,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                max: 0.5,
                                min: 0
                            },
                            yAxis: {
                                show: false,
                                inverse: true,
                                axisLabel: {
                                    show: false
                                },
                                axisLine: {
                                    show: false
                                },
                                axisTick: {
                                    show: false
                                },
                                min: 1,
                                max: 9
                                // max:qita_column.length,
                            },
                            series: [
                                {
                                    name: 'link2',
                                    // singleAxisIndex: 0,
                                    // coordinateSystem: 'singleAxis',
                                    symbolSize: 20,
                                    data: dat2,
                                    type: 'scatter',
                                    itemStyle: {
                                        color:'#d73027',
                                        // color:function(par){
                                        //     return color2(par.data[3])
                                        // },
                                        opacity: 1
                                    },
                                    label: {
                                        show: true,
                                        color:'white',
                                        // position:'right',
                                        formatter: function (parma) {
                                            // console.log(parma)
                                            return parma.data[2]
                                        }
                                    },
                                    emphasis: {
                                        scale: true,
                                        itemStyle: {
                                            // color: 'red',
                                            borderColor: 'black',
                                            borderWidth: 2,
                                            borderType: 'dotted',
                                            borderJoin: 'miter',
                                            borderCap: 'square'
                                        }
                                    },
                                },
                            ]
                        };
                        myChart221.setOption(option221,true);

                        // 执行右边圆点 点击事件(典型变量加操作)
                        myChart221.on('click', function (params) {
                            var duiflag = $('#param-duibi option:selected').val()
                            if(duiflag == 1){
                                dianji2(params.seriesName, params.dataIndex)
                            }
                            // 否则执行多组对比
                            else {
                                plusUV(params.dataIndex)
                                // alert(params.dataIndex)
                            }
                        });

                    },
                    error: function(msg) {//ajax请求失败后触发的方法
                        console.log(msg); //弹出错误信息
                    }
                });


                var dataa1 = [];
                var dataa2 = [];
                var xx1 = [];
                var xx2 = [];
                //对应的是option9的小圆点 壁温参数
                for (var k = 0; k < biwen_columnn.length; k++) {
                    dataa1.push([k, biwen_columnn[k]])
                    xx1.push(k)
                }
                //对应的是option10的小圆点 影响壁温参数
                for (var k = 0; k < qita_columnn.length; k++) {
                    dataa2.push([k, qita_columnn[k]])
                    xx2.push(k)
                }

                console.log("dataa1", dataa1)
                console.log("dataa2", dataa2)
                option9.series = serrr(dataa1);
                option10.series = serrr(dataa2);
                option9.singleAxis.data = xx1;
                option10.singleAxis.data = xx2;
                console.log("option9", option9)
                console.log("option10", option10)

                myChart9.setOption(option9, true);
                myChart10.setOption(option10, true);
            }

            if(checknum.length == 0){
                if(tongji.length < 4){

                    temp = tongji.length+1
                    // alert(temp)
                    temp1 = tongji.length
                    temp2 = 8-temp1

                    // 从第四个图开始隐藏
                    for(var i=temp; i<9; i++){
                        $("#a"+i).hide()
                    }

                    dat1.splice(temp1,temp2)
                    dat2.splice(temp1,temp2)

                    console.log("dat1",dat1)
                    console.log("dat2",dat2)

                    var dom222 = document.getElementById("link1");
                    var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                    var option222 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link1',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: dat1,
                                type: 'scatter',
                                itemStyle: {
                                    color:'#d73027',
                                    // color:function(par){
                                    //     console.log("tongji",tongji)
                                    //     console.log("tongji.indexOf(par.data[1]-1)==-1")
                                    //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                    //         return color2(par.data[3])
                                    //     }
                                    //     else{
                                    //         return 'white'
                                    //     }
                                    //     // return color2(par.data[3])
                                    // },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    // position:'right',
                                    color:'white',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart222.setOption(option222,true);
                    // console.log("00000",option222)
                    var dom221 = document.getElementById("link2");
                    var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                    var option221 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                            // bottom: -50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link2',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: dat2,
                                type: 'scatter',
                                itemStyle: {
                                    color:'#d73027',
                                    // color:function(par){
                                    //     if(tongji.indexOf(par.data[1]-1)==-1){
                                    //         return color2(par.data[3])
                                    //     }
                                    //     else{
                                    //         return 'white'
                                    //     }
                                    //     // return color2(par.data[3])
                                    // },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    color:'white',
                                    // position:'right',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart221.setOption(option221,true);
                }
                else{
                    // 从第四个图开始隐藏
                    for(var i=5; i<9; i++){
                        $("#a"+i).hide()
                    }

                    nums = [0,1,2,3]
                    console.log("dat1",dat1)
                    console.log("dat2",dat2)

                    var dom222 = document.getElementById("link1");
                    var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                    var option222 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link1',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: dat1,
                                type: 'scatter',
                                itemStyle: {
                                    color:function(par){
                                        if(nums.indexOf(par.data[1]-1)!=-1){
                                            return '#d73027'
                                        }else{
                                            return 'white'
                                        }
                                    },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    // position:'right',
                                    color:'white',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart222.setOption(option222,true);
                    // console.log("00000",option222)
                    var dom221 = document.getElementById("link2");
                    var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                    var option221 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                            // bottom: -50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link2',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: dat2,
                                type: 'scatter',
                                itemStyle: {
                                    color:function(par){
                                        if(nums.indexOf(par.data[1]-1)!=-1){
                                            return '#d73027'
                                        }else{
                                            return 'white'
                                        }
                                    },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    color:'white',
                                    // position:'right',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart221.setOption(option221,true);
                }
            }else{
                if(checknum.length < 8){

                    console.log("check dat1",dat1)
                    console.log("check dat2",dat2)

                    datt1 = [[],[],[],[],[],[],[],[]]
                    datt2 = [[],[],[],[],[],[],[],[]]

                    numtemp = []
                    console.log("xin",xin)
                    for(var i=0; i<xin.length;i++){
                        // if(tongji.indexOf(xin[i])!=-1){
                        //     numtemp.push(tongji.indexOf(xin[i]))
                        // }
                        if(tongji.indexOf(xin[i])!=-1){
                            numtemp.push(i)
                        }
                    }
                    console.log("numtemp",numtemp)
                    console.log("tongji",tongji)
                    for(var i=0; i<tongji.length;i++){
                        console.log(numtemp.indexOf(i))
                        if(i>=numtemp.length){
                            $("#a"+(i+1)).hide()
                        }else{
                            $("#a"+(i+1)).show()
                        }
                        // if(numtemp.indexOf(i) == -1){
                        //     $("#a"+(i+1)).hide()
                        // }else{
                        //     $("#a"+(i+1)).show()
                        // }
                    }

                    // 给datt1重新赋值
                    for(var i=0; i<numtemp.length; i++){
                        temp = numtemp[i]
                        for(var j =0; j < dat1[temp].length;j++){
                            datt1[i][j] = dat1[temp][j]
                            datt2[i][j] = dat2[temp][j]
                        }
                        datt1[i][1] = i+1
                        datt2[i][1] = i+1
                    }


                    console.log("datt1",datt1)
                    console.log("datt2",datt2)

                    console.log("know dat1",dat1)
                    console.log("know dat2",dat2)

                    var dom222 = document.getElementById("link1");
                    var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                    var option222 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link1',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: datt1,
                                type: 'scatter',
                                itemStyle: {
                                    color:'#d73027',
                                    // color:function(par){
                                    //     console.log("tongji",tongji)
                                    //     console.log("tongji.indexOf(par.data[1]-1)==-1")
                                    //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                    //         return color2(par.data[3])
                                    //     }
                                    //     else{
                                    //         return 'white'
                                    //     }
                                    //     // return color2(par.data[3])
                                    // },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    // position:'right',
                                    color:'white',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart222.setOption(option222,true);

                    var dom221 = document.getElementById("link2");
                    var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                    var option221 = {
                        tooltip: {
                            formatter: function (params) {
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        grid: {
                            left: 10,
                            top: 10,
                            bottom:50
                        },
                        xAxis: {
                            show: false,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            max: 0.5,
                            min: 0
                        },
                        yAxis: {
                            show: false,
                            inverse: true,
                            axisLabel: {
                                show: false
                            },
                            axisLine: {
                                show: false
                            },
                            axisTick: {
                                show: false
                            },
                            min: 1,
                            max: 9
                            // max:qita_column.length,
                        },
                        series: [
                            {
                                name: 'link2',
                                // singleAxisIndex: 0,
                                // coordinateSystem: 'singleAxis',
                                symbolSize: 20,
                                data: datt2,
                                type: 'scatter',
                                itemStyle: {
                                    color:'#d73027',
                                    // color:function(par){
                                    //     if(tongji.indexOf(par.data[1]-1)==-1){
                                    //         return color2(par.data[3])
                                    //     }
                                    //     else{
                                    //         return 'white'
                                    //     }
                                    //     // return color2(par.data[3])
                                    // },
                                    opacity: 1
                                },
                                label: {
                                    show: true,
                                    color:'white',
                                    // position:'right',
                                    formatter: function (parma) {
                                        // console.log(parma)
                                        return parma.data[2]
                                    }
                                },
                                emphasis: {
                                    scale: true,
                                    itemStyle: {
                                        // color: 'red',
                                        borderColor: 'black',
                                        borderWidth: 2,
                                        borderType: 'dotted',
                                        borderJoin: 'miter',
                                        borderCap: 'square'
                                    }
                                },
                            },
                        ]
                    };
                    myChart221.setOption(option221,true);
                    console.log("option221",option221)
                }
            }
        }


    }

    function StartCOCluster2(){
        $("#container11").hide()
        $("#container12").hide()
        $("#container7").show()
        $("#container8").show()
        $("#container9").show()
        $("#container10").show()

        var dataset = document.getElementsByName('save_file_chec');
        var Row_Cluster_num = 1;
        var Col_Cluster_num = 2;
        var Relevance_sel  = $('#param-Relevance  option:selected').val();
        console.log(dataset)
        var value = new Array();
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked)
                value.push(dataset[i].value);
        }
        console.log(value,Row_Cluster_num,Col_Cluster_num)
        var div_height=$("#Cluster_left").height();
        console.log(div_height)
        var data_lenn,biwen_columnn,qita_columnn;
        $.ajax({
            type: "POST",
            url: "CoCluster2",
            dataType: "json",
            async: false,
            data: {"listt": JSON.stringify(listt),"listt2": JSON.stringify(listt2),"value": JSON.stringify(value), "Row_Cluster_num": Row_Cluster_num, "Col_Cluster_num": Col_Cluster_num},    // 传递列表
            success: function (data) {
                console.log(data)
                var cluster1=data['cluster1'];
                var cluster2=data['cluster2'];
                // cluster11=data['cluster1'];
                // cluster22=data['cluster2'];
                zuhe1=cluster1;
                zuhe2=cluster2;
                cluster_xgx=data['cluster_xgx'];
                cluster_pj=data['cluster_pj'];
                var data_len=data['data_len'];
                cluster_left_list=data['name1'];
                cluster_right_list=data['name2'];
                var biwen_column=data['biwen_column'];
                var qita_column=data['qita_column'];
                zongti_xgx=data['corr']
                biwen_columnn=biwen_column;
                qita_columnn=qita_column;
                qita_name_jilu=qita_column;
                biwen_name_jilu=biwen_column;
                var link1=[];
                var link2=[];
                // fill() 方法用于将一个固定值替换数组的元素
                fangda1=new Array(data_len[0]).fill(0);
                fangda2=new Array(data_len[1]).fill(0);
                var all_links=[];
                data_lenn=data['data_len']
                console.log(cluster1.length);
                $('#Cluster_left').empty();
                $('#Cluster_right').empty();
                for(var i =0;i<cluster1.length;i++){
                    var data1=[];
                    var data2=[];
                    var xdata=[];
                    var data_jilu=[];
                    for(var j=0;j<data_len[0];j++){
                        // divheight=90/data_len[0]*i
                        xdata.push(j)
                        // if(cluster1[i].indexOf(j)>-1){
                        //     data1.push([j,biwen_column[j]])
                        // }
                        if(cluster1[i].indexOf(j)>-1){
                            // var shuzii=parseInt(biwen_column[j].substr(biwen_column[j].length-1,1));
                            // for(var k=0;k<jilu_num.length;k++){
                            //     if(biwen_column[j].indexOf(jilu_num[k][0])!=-1){
                            //         data1.push([j,biwen_column[j],jilu_num[k][shuzii]])
                            //         data_jilu.push(jilu_num[k][shuzii])
                            //     }
                            //
                            // }
                            data1.push([j,biwen_column[j]])
                        }
                        else {
                            data2.push([j,biwen_column[j]])
                        }
                    };
                    // console.log(data1,data2)
                    divheight=((div_height-cluster1.length*10)/(cluster1.length+1))
                    // console.log(divheight)
                    link1.push([0,(divheight+10)*i+divheight+5])
                    $('#Cluster_left').append("<div onclick='jizhong(this)' onmouseover='over1(this)' onmouseout='out1(this)' style='margin-top:"+divheight+"px;border-radius: 10px;border: 2px solid #d1b38a;height: 10px;width: 100%;' id='input_cluster" + i + "'></div>")
                    var dom = document.getElementById("input_cluster" + i);
                    var myChart = echarts.init(dom, null, {renderer: 'svg'});
                    var option = {
                        tooltip:{
                            formatter:function (params){
                                console.log("1",params)
                                return params.data[1]
                            }
                        },
                        // visualMap:{
                        //     type:'continuous',
                        //     min:Math.min.apply(null,data_jilu),
                        //     max:Math.max.apply(null,data_jilu),
                        //     inRange: {
                        //         color: ['#74add1', '#4575b4','#313695']
                        //     },
                        //     dimensions:2,
                        //     show:false
                        //
                        // },
                        singleAxis:{
                            show:false,
                            axisLabel:{
                                show:false
                            },
                            axisLine:{
                                show:false
                            },
                            axisTick:{
                                show:false
                            },
                            // left: 10,
                            type: 'category',
                            data:xdata,
                            boundaryGap: false,
                            // top: (0 * 100 / 7 + 5) + '%',
                            // height: (100 / 7 - 10) + '%',
                        },
                        series: [
                            {
                                name:'input_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data1,
                                type: 'scatter',
                                itemStyle:{
                                    // color:'gray',
                                    opacity:1
                                },
                                emphasis:{
                                    scale:true,
                                    itemStyle:{
                                        color: 'red',
                                        borderWidth:100
                                    }
                                },
                            },
                            {
                                name:'input_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data2,
                                type: 'scatter',
                                itemStyle:{
                                    color:'gray',
                                    opacity:0.2
                                }
                            }
                        ]
                    };
                    myChart.setOption(option);
                    myChart.on('click',function (params){
                        console.log(params)
                        dianji1(params.seriesName,params.data[1])
                    });
                };
                for(var i =0;i<cluster2.length;i++){
                    var data1=[];
                    var data2=[];
                    var xdata=[]
                    for(var j=0;j<data_len[1];j++){
                        // divheight=90/data_len[0]*i
                        xdata.push(j)
                        if(cluster2[i].indexOf(j)>-1){
                            data1.push([j,qita_column[j]])
                        }
                        else {
                            data2.push([j,qita_column[j]])
                        }
                    };
                    // console.log(data1,data2)
                    divheight=((div_height-cluster2.length*10)/(cluster2.length+1))
                    // console.log(divheight)
                    link2.push([235,(divheight+10)*i+divheight+5])
                    $('#Cluster_right').append("<div onclick='jizhong(this)' onmouseover='over1(this)' onmouseout='out1(this)' style='margin-top:"+divheight+"px;border-radius: 10px;border: 2px solid #d1b38a;height: 10px;width: 100%;' id='output_cluster" + i + "'></div>")
                    var dom = document.getElementById("output_cluster" + i);
                    var myChart = echarts.init(dom, null, {renderer: 'svg'});
                    var option = {
                        tooltip:{
                            formatter:function (params){
                                // console.log("1",params)
                                return params.data[1]
                            }
                        },
                        singleAxis:{
                            show:false,
                            axisLabel:{
                                show:false
                            },
                            axisLine:{
                                show:false
                            },
                            axisTick:{
                                show:false
                            },
                            // left: 10,
                            type: 'category',
                            data:xdata,
                            boundaryGap: false,
                            // top: (0 * 100 / 7 + 5) + '%',
                            // height: (100 / 7 - 10) + '%',
                        },
                        series: [
                            {
                                name:'output_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data1,
                                type: 'scatter',
                                itemStyle:{
                                    // color:'gray',
                                    opacity:1
                                },
                                emphasis:{
                                    scale:true,
                                    itemStyle:{
                                        color: 'red',
                                        borderWidth:100
                                    }
                                },
                            },
                            {
                                name:'output_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 5,
                                data: data2,
                                type: 'scatter',
                                itemStyle:{
                                    color:'gray',
                                    opacity:0.2
                                }
                            }
                        ]
                    };
                    myChart.setOption(option);
                    myChart.on('click',function (params){
                        console.log(params)
                        dianji1(params.seriesName,params.data[1])
                    });
                };
                console.log(link1,link2)

                for(var i=0;i<link1.length;i++){
                    for(var j=0;j<link2.length;j++){
                        all_links.push({
                            "source":{"x":link1[i][0],"y":link1[i][1]},
                            "target":{"x":link2[j][0],"y":link2[j][1]},
                            "value":cluster_xgx[i][j],
                            "value2":cluster_pj[i][j],
                            "start":i,
                            "end":j
                        })
                    }
                }
                suoyou_links=all_links;
                console.log(all_links)
                // var max=d3.max(all_links,function (d){return d.value})
                // var min=d3.min(all_links,function (d){return d.value})
                // console.log("max",max,min)
                // color.domain([min,max])
                d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
                lineGraph
                    // .append("g")
                    .selectAll('path')
                    .data(all_links)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        // console.log(d,i)
                        return createLink(d)
                    })
                    // .attr("stroke","#ccc")
                    // .attr("stroke-width",2)
                    .attr("stroke",function (d){
                        return color(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear(Math.abs(d.value));
                    })
                    // .attr("fill",function (d){
                    //     return color(d.value);
                    // })
                    .style("opacity", 0.7)
                    .on("mouseover",overed)
                    .on("mouseout",outed)
                    .on("click",clicked)
                // .on("mousemove", mousemove);
            }
        });
        var dataa1 = [];
        var dataa2 = [];
        var xx1 = [];
        var xx2 = [];
        //对应的是option9的小圆点 壁温参数
        for (var k = 0;k < data_lenn[0];k++){
            dataa1.push([k,biwen_columnn[k]])
            xx1.push(k)
        }
        //对应的是option10的小圆点 影响壁温参数
        for (var k = 0;k < data_lenn[1];k++){
            dataa2.push([k,qita_columnn[k]])
            xx2.push(k)
        }

        console.log("dataa1",dataa1)
        console.log("dataa2",dataa2)
        option9.series = serrr(dataa1);
        option10.series = serrr(dataa2);
        option9.singleAxis.data = xx1;
        option10.singleAxis.data = xx2;
        console.log("option9",option9)
        console.log("option10",option10)

        myChart9.setOption(option9,true);
        myChart10.setOption(option10,true);

    }

    function StartCOCluster(){
        var dataset = document.getElementsByName('save_file_chec');
        var Row_Cluster_num = 1;
        var Col_Cluster_num = 2;
        var Relevance_sel  = $('#param-Relevance  option:selected').val();
        console.log(dataset)
        var value = new Array();
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked)
                value.push(dataset[i].value);
        }
        console.log(value,Row_Cluster_num,Col_Cluster_num)
        var div_height=$("#Cluster_left").height();
        console.log(div_height)
        $.ajax({
            type: "POST",
            url: "CoCluster",
            dataType: "json",
            async: false,
            data: {"value": JSON.stringify(value), "Row_Cluster_num": Row_Cluster_num, "Col_Cluster_num": Col_Cluster_num},    // 传递列表
            success: function (data) {
                console.log(data)
                var cluster1=data['cluster1'];
                var cluster2=data['cluster2'];
                cluster_xgx=data['cluster_xgx'];
                cluster_pj=data['cluster_pj'];
                var data_len=data['data_len'];
                cluster_left_list=data['name1'];
                cluster_right_list=data['name2'];
                var biwen_column=data['biwen_column'];
                var qita_column=data['qita_column'];
                var link1=[];
                var link2=[];
                var all_links=[];
                console.log(cluster1.length);
                $('#Cluster_left').empty();
                $('#Cluster_right').empty();
                for(var i =0;i<cluster1.length;i++){
                    var data1=[];
                    var data2=[];
                    var xdata=[]
                    for(var j=0;j<data_len[0];j++){
                        // divheight=90/data_len[0]*i
                        xdata.push(j)
                        if(cluster1[i].indexOf(j)>-1){
                            data1.push([j,biwen_column[j]])
                        }
                        else {
                            data2.push([j,biwen_column[j]])
                        }
                    };
                    console.log(data1,data2)
                    divheight=((div_height-cluster1.length*30)/(cluster1.length+1))
                    console.log(divheight)
                    link1.push([0,(divheight+30)*i+divheight+15])
                    $('#Cluster_left').append("<div onclick='jizhong(this)' onmouseenter='over1(this)' onmouseout='out1(this)' style='margin-top:"+divheight+"px;border-radius: 10px;border: 2px solid #d1b38a;height: 30px;width: 100%;' id='input_cluster" + i + "'></div>")
                    var dom = document.getElementById("input_cluster" + i);
                    var myChart = echarts.init(dom, null, {renderer: 'svg'});
                    var option = {
                        tooltip:{
                            formatter:function (params){
                                console.log("1",params)
                                return params.data[1]
                            }
                        },
                        singleAxis:{
                            show:false,
                            axisLabel:{
                                show:false
                            },
                            axisLine:{
                                show:false
                            },
                            axisTick:{
                                show:false
                            },
                            // left: 10,
                            type: 'category',
                            data:xdata,
                            boundaryGap: false,
                            // top: (0 * 100 / 7 + 5) + '%',
                            // height: (100 / 7 - 10) + '%',
                        },
                        series: [
                            {
                                name:'input_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 10,
                                data: data1,
                                type: 'scatter',
                                itemStyle:{
                                    // color:'gray',
                                    opacity:1
                                },
                                emphasis:{
                                    scale:true,
                                    itemStyle:{
                                        color: 'red',
                                        borderWidth:100
                                    }
                                },
                            },
                            {
                                name:'input_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 10,
                                data: data2,
                                type: 'scatter',
                                itemStyle:{
                                    color:'gray',
                                    opacity:0.2
                                }
                            }
                        ]
                    };
                    myChart.setOption(option);

                    myChart.on('click',function (params){
                        console.log(params)
                        dianji1(params.seriesName,params.data[1])
                    });
                };
                for(var i =0;i<cluster2.length;i++){
                    var data1=[];
                    var data2=[];
                    var xdata=[]
                    for(var j=0;j<data_len[1];j++){
                        // divheight=90/data_len[0]*i
                        xdata.push(j)
                        if(cluster2[i].indexOf(j)>-1){
                            data1.push([j,qita_column[j]])
                        }
                        else {
                            data2.push([j,qita_column[j]])
                        }
                    };
                    console.log(data1,data2)
                    divheight=((div_height-cluster2.length*30)/(cluster2.length+1))
                    console.log(divheight)
                    link2.push([235,(divheight+30)*i+divheight+15])
                    $('#Cluster_right').append("<div onmouseenter='over1(this)' onmouseout='out1(this)' style='margin-top:"+divheight+"px;border-radius: 10px;border: 2px solid #d1b38a;height: 30px;width: 100%;' id='output_cluster" + i + "'></div>")
                    var dom = document.getElementById("output_cluster" + i);
                    var myChart = echarts.init(dom, null, {renderer: 'svg'});
                    var option = {
                        tooltip:{
                            formatter:function (params){
                                console.log("1",params)
                                return params.data[1]
                            }
                        },
                        singleAxis:{
                            show:false,
                            axisLabel:{
                                show:false
                            },
                            axisLine:{
                                show:false
                            },
                            axisTick:{
                                show:false
                            },
                            // left: 10,
                            type: 'category',
                            data:xdata,
                            boundaryGap: false,
                            // top: (0 * 100 / 7 + 5) + '%',
                            // height: (100 / 7 - 10) + '%',
                        },
                        series: [
                            {
                                name:'output_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 10,
                                data: data1,
                                type: 'scatter',
                                itemStyle:{
                                    // color:'gray',
                                    opacity:1
                                },
                                emphasis:{
                                    scale:true,
                                    itemStyle:{
                                        color: 'red',
                                        borderWidth:100
                                    }
                                },
                            },
                            {
                                name:'output_cluster',
                                singleAxisIndex: 0,
                                coordinateSystem: 'singleAxis',
                                symbolSize: 10,
                                data: data2,
                                type: 'scatter',
                                itemStyle:{
                                    color:'gray',
                                    opacity:0.2
                                }
                            }
                        ]
                    };
                    myChart.setOption(option);
                    myChart.on('click',function (params){
                        console.log(params)
                        dianji1(params.seriesName,params.data[1])
                    });
                };
                console.log(link1,link2)

                for(var i=0;i<link1.length;i++){
                    for(var j=0;j<link2.length;j++){
                        all_links.push({
                            "source":{"x":link1[i][0],"y":link1[i][1]},
                            "target":{"x":link2[j][0],"y":link2[j][1]},
                            "value":cluster_xgx[i][j],
                            "value2":cluster_pj[i][j],
                            "start":i,
                            "end":j
                        })
                    }
                }
                suoyou_links=all_links;
                console.log(all_links)
                // var max=d3.max(all_links,function (d){return d.value})
                // var min=d3.min(all_links,function (d){return d.value})
                // console.log("max",max,min)
                // color.domain([min,max])
                d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
                lineGraph
                    // .append("g")
                    .selectAll('path')
                    .data(all_links)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        console.log(d,i)
                        return createLink(d)
                    })
                    // .attr("stroke","#ccc")
                    // .attr("stroke-width",2)
                    .attr("stroke",function (d){
                        return color(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear(Math.abs(d.value));
                    })
                    // .attr("fill",function (d){
                    //     return color(d.value);
                    // })
                    .style("opacity", 0.7)
                    .on("mouseover",overed)
                    .on("mouseout",outed)
                    .on("click",clicked)
                    // .on("mousemove", mousemove);
            }
        });
    };
    function dianji4(par){
        // console.log(par)
        var obj = document.getElementById("param-dataset");
        for(i=0;i<obj.length;i++){
            console.log(obj[i].value,obj[i].value.indexOf(par),obj.length)
            if(obj[i].value.indexOf(par)!=-1)
            {
                obj[i].selected = true;
                break;
            }
        }
        StartCOCluster4();
    }
    function dianji3(qt_index,bw_index){
        console.log(qt_index,bw_index)
        cunchu[0]=4
        cunchu[1]=qt_index
        cunchu[2]=bw_index
        var max_t = inputsRy.theValue[1]/100;
        var min_t = inputsRy.theValue[0]/100;
        var all_lines1=all_link1;
        var lines1=[];
        for (var i=0;i<all_lines1.length;i++){
            if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].start==bw_index){
                lines1.push(all_lines1[i])
            }
        }
        d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
        lineGraph1
            .selectAll('path')
            .data(lines1)
            .enter()
            .append("path")
            .attr("d",function (d,i){
                // console.log(d,i)
                return createLink(d)
            })
            .attr("stroke",function (d){
                return color2(d.value);
            })
            .attr("fill",'none')
            // .attr("stroke-width",5)
            .attr("stroke-width",function (d){
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 1)
            .on("mouseover",overed2)
            .on("mouseout",outed2)

        var all_lines3=all_link3;
        var lines3=[];
        for (var i=0;i<all_lines3.length;i++){
            if (Math.abs(all_lines3[i].value)<=max_t && Math.abs(all_lines3[i].value)>=min_t && all_lines3[i].end==qt_index){
                lines3.push(all_lines3[i])
            }
        }
        d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
        lineGraph3
            .selectAll('path')
            .data(lines3)
            .enter()
            .append("path")
            .attr("d",function (d,i){
                // console.log(d,i)
                return createLink(d)
            })
            .attr("stroke",function (d){
                return color2(d.value);
            })
            .attr("fill",'none')
            .attr("stroke-width",function (d){
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 1)
            .on("mouseover",overed3)
            .on("mouseout",outed3)
    }
    var cunchu=[-1,-1,-1]
    function dianji2(seriesName,index){
        console.log(seriesName,index)
        var max_t = inputsRy.theValue[1]/100;
        var min_t = inputsRy.theValue[0]/100;
        var sel = $('#param-Relevance  option:selected').val();
        if(seriesName == 'input_cluster'){
            if(cunchu[0]==-1 || cunchu[0]==1){
                cunchu[0]=0
                cunchu[1]=index
                // cunchu=[0,index]
            }
            else if(cunchu[0]==2){
                // var zanshi=cunchu[1]
                cunchu[0]=4
                cunchu[2]=index
                // cunchu=[4,zanshi,index]
            }
            else if(cunchu[0]==0 || cunchu[0]==3){
                cunchu[1]=index
            }
            else if(cunchu[0]==4){
                cunchu[2]=index
            }
            else if(cunchu[0]==5){
                cunchu[1]=index
            }
            // else if(cunchu[0]==1){
            //     // var zanshi=cunchu[1]
            //     cunchu[0]=0
            //     cunchu[1]=index
            //     // cunchu=[4,zanshi,index]
            // }
            var all_lines1=all_link1;
            var lines1=[];
            for (var i=0;i<all_lines1.length;i++){
                if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].start==index){
                    lines1.push(all_lines1[i])
                }
            }
            d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
            lineGraph1
                .selectAll('path')
                .data(lines1)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                .attr("stroke",function (d){
                    return color2(d.value);
                })
                .attr("fill",'none')
                // .attr("stroke-width",5)
                .attr("stroke-width",function (d){
                    return linear2(Math.abs(d.value));
                })
                .style("opacity", 1)
                .on("mouseover",overed2)
                .on("mouseout",outed2)
        }
        else if(seriesName == 'link1'){
            if(cunchu[0]==-1 || cunchu[0]==2 || cunchu[0]==3 || cunchu[0]==4){
                cunchu[0]=1
                cunchu[1]=index
            }
            else if(cunchu[0]==1){
                cunchu[1]=index
            }
            // else if(cunchu[0]==0){
            //     cunchu[0]=6
            //     cunchu[2]=index
            // }
            var all_lines1=all_link1;
            var lines1=[];
            for (var i=0;i<all_lines1.length;i++){
                if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].end==index){
                    lines1.push(all_lines1[i])
                }
            }
            d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
            lineGraph1
                .selectAll('path')
                .data(lines1)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                .attr("stroke",function (d){
                    return color2(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear2(Math.abs(d.value));
                })
                .style("opacity", 1)
                .on("mouseover",overed2)
                .on("mouseout",outed2)
            var all_lines3=all_link3;
            var lines3=[];
            for (var i=0;i<all_lines3.length;i++){
                if (Math.abs(all_lines3[i].value)<=max_t && Math.abs(all_lines3[i].value)>=min_t && all_lines3[i].start==index){
                    lines3.push(all_lines3[i])
                }
            }
            d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
            lineGraph3
                .selectAll('path')
                .data(lines3)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                .attr("stroke",function (d){
                    return color2(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear2(Math.abs(d.value));
                })
                .style("opacity", 1)
                .on("mouseover",overed3)
                .on("mouseout",outed3)
        }
        else if(seriesName == 'link2'){
            if(cunchu[0]==-1 || cunchu[0]==2 || cunchu[0]==3 || cunchu[0]==4){
                cunchu[0]=1
                cunchu[1]=index
            }
            else if (cunchu[0]==0 || cunchu[0]==5){
                cunchu[0]=5
                cunchu[2]=index
                var all_lines1=all_link1;
                var lines1=[];
                for (var i=0;i<all_lines1.length;i++){
                    if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].start==cunchu[1]){
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke",function (d){
                        return color2(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover",overed2)
                    .on("mouseout",outed2)
                var all_lines3=all_link3;
                var lines3=[];
                for (var i=0;i<all_lines3.length;i++){
                    if (Math.abs(all_lines3[i].value)<=max_t && Math.abs(all_lines3[i].value)>=min_t && all_lines3[i].start==cunchu[2]){
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke",function (d){
                        return color2(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover",overed3)
                    .on("mouseout",outed3)
            }
            else if(cunchu[0]==1){
                cunchu[1]=index
                var all_lines1=all_link1;
                var lines1=[];
                for (var i=0;i<all_lines1.length;i++){
                    if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].end==index){
                        lines1.push(all_lines1[i])
                    }
                }
                d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
                lineGraph1
                    .selectAll('path')
                    .data(lines1)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke",function (d){
                        return color2(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover",overed2)
                    .on("mouseout",outed2)
                var all_lines3=all_link3;
                var lines3=[];
                for (var i=0;i<all_lines3.length;i++){
                    if (Math.abs(all_lines3[i].value)<=max_t && Math.abs(all_lines3[i].value)>=min_t && all_lines3[i].start==index){
                        lines3.push(all_lines3[i])
                    }
                }
                d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
                lineGraph3
                    .selectAll('path')
                    .data(lines3)
                    .enter()
                    .append("path")
                    .attr("d",function (d,i){
                        // console.log(d,i)
                        return createLink(d)
                    })
                    .attr("stroke",function (d){
                        return color2(d.value);
                    })
                    .attr("fill",'none')
                    .attr("stroke-width",function (d){
                        return linear2(Math.abs(d.value));
                    })
                    .style("opacity", 1)
                    .on("mouseover",overed3)
                    .on("mouseout",outed3)
            }
            // var all_lines1=all_link1;
            // var lines1=[];
            // for (var i=0;i<all_lines1.length;i++){
            //     if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].end==index){
            //         lines1.push(all_lines1[i])
            //     }
            // }
            // d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
            // lineGraph1
            //     .selectAll('path')
            //     .data(lines1)
            //     .enter()
            //     .append("path")
            //     .attr("d",function (d,i){
            //         // console.log(d,i)
            //         return createLink(d)
            //     })
            //     .attr("stroke",function (d){
            //         return color2(d.value);
            //     })
            //     .attr("fill",'none')
            //     .attr("stroke-width",function (d){
            //         return linear2(Math.abs(d.value));
            //     })
            //     .style("opacity", 1)
            //     .on("mouseover",overed2)
            //     .on("mouseout",outed2)
            // var all_lines3=all_link3;
            // var lines3=[];
            // for (var i=0;i<all_lines3.length;i++){
            //     if (Math.abs(all_lines3[i].value)<=max_t && Math.abs(all_lines3[i].value)>=min_t && all_lines3[i].start==index){
            //         lines3.push(all_lines3[i])
            //     }
            // }
            // d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
            // lineGraph3
            //     .selectAll('path')
            //     .data(lines3)
            //     .enter()
            //     .append("path")
            //     .attr("d",function (d,i){
            //         // console.log(d,i)
            //         return createLink(d)
            //     })
            //     .attr("stroke",function (d){
            //         return color2(d.value);
            //     })
            //     .attr("fill",'none')
            //     .attr("stroke-width",function (d){
            //         return linear2(Math.abs(d.value));
            //     })
            //     .style("opacity", 1)
            //     .on("mouseover",overed3)
            //     .on("mouseout",outed3)
        }
        else if(seriesName == 'output_cluster'){
            if(cunchu[0]==-1 || cunchu[0]==1){
                cunchu[0]=2
                cunchu[1]=index
            }
            else if(cunchu[0]==0){
                cunchu[0]=3
                cunchu[2]=index
                // cunchu=[3,zanshi,index]
            }
            else if(cunchu[0]==3){
                cunchu[2]=index
            }
            else if(cunchu[0]==2 || cunchu[0]==4){
                cunchu[1]=index
            }
            var all_lines1=all_link3;
            var lines1=[];
            for (var i=0;i<all_lines1.length;i++){
                if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t && all_lines1[i].end==index){
                    lines1.push(all_lines1[i])
                }
            }
            d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
            lineGraph3
                .selectAll('path')
                .data(lines1)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                .attr("stroke",function (d){
                    return color2(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear2(Math.abs(d.value));
                })
                .style("opacity", 1)
                .on("mouseover",overed3)
                .on("mouseout",outed3)
        }
        console.log("cunchu",cunchu)
    }
    // 该函数表示处理单个点 的点击事件
    function dianji1(seriesName,name){
        console.log("111",seriesName,name)
        if(seriesName == 'input_cluster'){
            name = name.toString();
            // console.log("know name",name)
            var s = name.substr(0,name.length-4)
            console.log(s)
            open_file(s)
        }
    }

    // 修改选择框的内容
    function changekuang(name){
        // 动态修改 选择框内的值
        value1 = name.replace(/[^a-zA-Z]/g,'')
        console.log("know value1",value1)

        value2 = name.replace(/[^\d]/g,'')
        num = value2.substring(0,1)
        console.log("know value2",num)

        if(value1 == 'AC'){
            value11 = 'AgglomerativeCluster'
        }
        if(value1 == 'SC'){
            value11 = 'SpectralCluster'
        }
        if(value1 == 'Birch'){
            value11 = 'Birch'
        }

        var select = document.getElementById("param-cluster");
        var numvalue = document.getElementById("param-n_cluster_num")
        numvalue.value = num
        console.log(select)
        console.log(numvalue)

        for(var i=0; i<select.options.length; i++){
            console.log(select.options[i].value)
            if(select.options[i].innerHTML == value11){
                select.options[i].selected = true;
                break;
            }
        }
    }

    // 触发左侧单个点的点击事件 打开文件视图
    function dianji5(name){
        // console.log("111",name)
        name = name.toString();
        console.log("know name",name)
        var s = name.substr(0,name.length-4)
        var liangnum = name.substr(name.length-1,name.length)
        // alert(liangnum)
        open_file1(s,liangnum)

        changekuang(name)

    }

    function ShowAll(){
        StartCOCluster4()
    }

    function ShowFile1(){
        // alert("ok1")
        name = '高温过热器_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile2(){
        // alert("ok2")
        name = '后墙隔墙_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile3(){
        // alert("ok3")
        name = '低温过热器上部屏_SC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile4(){
        // alert("ok4")
        name = '低温过热器下部屏_Birch_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile5(){
        // alert("ok5")
        name = '水冷前垂_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile6(){
        // alert("ok6")
        name = '水冷后垂_AC_3'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile7(){
        // alert("ok7")
        name = '水冷左垂_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile8(){
        // alert("ok8")
        name = '水冷右垂_SC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile9(){
        // alert("ok9")
        name = '水冷前螺_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile10(){
        // alert("ok10")
        name = '水冷后螺_SC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile11(){
        // alert("ok11")
        name = '水冷右螺_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }

    function ShowFile12(){
        // alert("ok12")
        name = '水冷左螺_AC_2'
        name = name.toString();
        open_file2(name)

        changekuang(name)
    }



    function out1(param){
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var sel = $('#param-Relevance  option:selected').val();
        var lines=suoyou_links;
        var lines2=[]
        // for (var i=0;i<lines.length;i++){
        //     if (lines[i].value<=max_t && lines[i].value>=min_t){
        //         lines2.push(lines[i])
        //     }
        // }
        // 获取当前的ID
        name = param.id
        // 添加划过事件 恢复兄弟节点的透明度
        $('#'+ name).siblings().animate({"opacity":"1"},0);
        $('#Cluster_left').children().animate({"opacity":"1"},0);
        $('#Cluster_right').children().animate({"opacity":"1"},0);
        if (sel=='Average'){
            for (var i=0;i<lines.length;i++){
                if (lines[i].value2<=max_t && lines[i].value2>=min_t){
                    lines2.push(lines[i])
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value2);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value2));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
                .on("mouseover",overed)
                .on("mouseout",outed)
                .on("click",clicked)
        }
        else{
            for (var i=0;i<lines.length;i++){
                if (lines[i].value<=max_t && lines[i].value>=min_t){
                    lines2.push(lines[i])
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
                .on("mouseover",overed)
                .on("mouseout",outed)
                .on("click",clicked)
        }
        // d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
        // lineGraph
        //     // .append("g")
        //     .selectAll('path')
        //     .data(lines2)
        //     .enter()
        //     .append("path")
        //     .attr("d",function (d,i){
        //         console.log(d,i)
        //         return createLink(d)
        //     })
        //     // .attr("stroke","#ccc")
        //     // .attr("stroke-width",2)
        //     .attr("stroke",function (d){
        //         return color(d.value);
        //     })
        //     .attr("fill",'none')
        //     .attr("stroke-width",function (d){
        //         return linear(Math.abs(d.value));
        //     })
        //     // .attr("fill",function (d){
        //     //     return color(d.value);
        //     // })
        //     .style("opacity", 0.7)
        //     .on("mouseover",overed)
        //     .on("mouseout",outed)
    }
    function over1(param){
        // alert(param.id)
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var sel = $('#param-Relevance  option:selected').val();
        // var lines=suoyou_links;
        // var lines2=[]
        // for (var i=0;i<lines.length;i++){
        //     if (lines[i].value<=max_t && lines[i].value>=min_t){
        //         lines2.push(lines[i])
        //     }
        // }
        name = param.id
        $('#'+ name).siblings().animate({"opacity":"0.2"},0);

        shuzi=parseInt(name.replace(/[^0-9]/ig,""));
        // console.log("shuzu",shuzi)
        // shuzi=parseInt(name.substr(name.length-1,name.length))
        // console.log(shuzi)
        var lines=suoyou_links;
        var lines2=[];
        // console.log(suoyou_links)
        // console.log(lines,lines.length)
        // console.log("id",param.id.indexOf('input_cluster'))
        // for (var i=0;i<lines.length;i++){
        //     if (param.id.indexOf('input_cluster')>-1){
        //         if (lines[i].start==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
        //             lines2.push(lines[i])
        //         }
        //     }
        //     else {
        //         if (lines[i].end==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
        //             lines2.push(lines[i])
        //         }
        //     }
        // }
        if (sel=='Average'){
            for (var i=0;i<lines.length;i++){
                if (param.id.indexOf('input_cluster')>-1){
                    if (lines[i].start==shuzi && lines[i].value2<=max_t && lines[i].value2>=min_t){
                        lines2.push(lines[i])
                    }
                    else if(lines[i].start==shuzi && (lines[i].value2>max_t || lines[i].value2<min_t)){
                        $('#'+ 'output_cluster'+lines[i].end).animate({"opacity":"0.2"},0);
                    }
                }
                else {
                    if (lines[i].end==shuzi && lines[i].value2<=max_t && lines[i].value2>=min_t){
                        lines2.push(lines[i])
                    }
                    else if(lines[i].end==shuzi && (lines[i].value2>max_t || lines[i].value2<min_t)){
                        $('#'+ 'input_cluster'+lines[i].start).animate({"opacity":"0.2"},0);
                    }
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value2);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value2));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
        }
        else {
            for (var i=0;i<lines.length;i++){
                if (param.id.indexOf('input_cluster')>-1){
                    if (lines[i].start==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
                        lines2.push(lines[i])
                    }
                    else if(lines[i].start==shuzi && (lines[i].value>max_t || lines[i].value<min_t)){
                        $('#'+ 'output_cluster'+lines[i].end).animate({"opacity":"0.2"},0);
                    }
                }
                else {
                    if (lines[i].end==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
                        lines2.push(lines[i])
                    }
                    else if(lines[i].end==shuzi && (lines[i].value>max_t || lines[i].value<min_t)){
                        $('#'+ 'input_cluster'+lines[i].start).animate({"opacity":"0.2"},0);
                    }
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
        }
        // d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
        // lineGraph
        //     // .append("g")
        //     .selectAll('path')
        //     .data(lines2)
        //     .enter()
        //     .append("path")
        //     .attr("d",function (d,i){
        //         console.log(d,i)
        //         return createLink(d)
        //     })
        //     // .attr("stroke","#ccc")
        //     // .attr("stroke-width",2)
        //     .attr("stroke",function (d){
        //         return color(d.value);
        //     })
        //     .attr("fill",'none')
        //     .attr("stroke-width",function (d){
        //         return linear(Math.abs(d.value));
        //     })
        //     // .attr("fill",function (d){
        //     //     return color(d.value);
        //     // })
        //     .style("opacity", 0.7)
    }

    // 存储所有的U1 和 V1 典型变量等等 (用来画多组对比用)
    var allU1 = []
    var allV1 = []
    var alltu = []
    var allTime = []
    var allcorruv = []

    // 控制折线图
    var plusfalg0 = 0
    var plusfalg1 = 0
    var plusfalg2 = 0
    var plusfalg3 = 0
    var plusfalg4 = 0
    var plusfalg5 = 0
    var plusfalg6 = 0
    var plusfalg7 = 0

    // 控制散点图
    var plusfalg00 = 0
    var plusfalg11 = 0
    var plusfalg22 = 0
    var plusfalg33 = 0
    var plusfalg44 = 0
    var plusfalg55 = 0
    var plusfalg66 = 0
    var plusfalg77 = 0

    // 执行减操作 将U2 V2 变为U1 V1
    function subUV(Index){
        tu_line[Index]=tu_line[Index]-1
        var max_t = inputsRy.theValue[1]/100;
        var min_t = inputsRy.theValue[0]/100;
        if(is_sel.length == 0){
            var xinline1=[]
            for (var i=0;i<left_line.length;i++){
                if(checknum.length == 0){
                    var newline=left_line[i]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[i] && jilu_tuli.indexOf(newline[j].new)==-1) {
                            newline[j].target.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline1.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length; m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i)!=-1){
                        var newline=left_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[i] && jilu_tuli1.indexOf(newline[j].new)==-1) {
                                newline[j].target.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline1.push(newline[j])
                            }
                        }
                    }
                }
            }
            var xinline2=[]
            for (var i=0;i<right_line.length;i++){
                if(checknum.length == 0){
                    var newline=right_line[i]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[i] && jilu_tuli.indexOf(newline[j].new)==-1) {
                            newline[j].source.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline2.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length; m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i)!=-1){
                        var newline=right_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[i] && jilu_tuli1.indexOf(newline[j].new)==-1) {
                                newline[j].source.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline2.push(newline[j])
                            }
                        }
                    }
                }
            }
        }
        else{
            var xinline1 = []
            for (var i=0;i<tongji.length && i<8 && i<is_sel.length;i++){

                if(checknum.length == 0){
                    var newline=left_line[is_sel[i]]
                    console.log(jilu_tuli,newline)
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[is_sel[i]]) {
                            newline[j].target.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline1.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length;m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i) != -1){
                        var newline=left_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[is_sel[i]]) {
                                newline[j].target.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline1.push(newline[j])
                            }
                        }
                    }
                }
            }
            var xinline2=[]
            for (var i=0;i<tongji.length && i<8 && i<is_sel.length;i++){
                if(checknum.length == 0){
                    var newline=right_line[is_sel[i]]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[is_sel[i]]) {
                            newline[j].source.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline2.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length;m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i)!=-1){
                    var newline=right_line[i]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[is_sel[i]]) {
                            newline[j].source.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline2.push(newline[j])
                            }
                        }
                    }
                }

            }
        }

        d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
        lineGraph1
            // .append("g")
            .selectAll('path')
            .data(xinline1)
            .enter()
            .append("path")
            .attr("d", function (d, i) {
                // console.log(d,i)
                return createLink(d)
            })
            // .attr("stroke","#ccc")
            // .attr("stroke-width",2)
            .attr("stroke", function (d) {
                return d.color2;
            })
            .attr("fill", 'none')
            // .attr("stroke-width",5)
            .attr("stroke-width", function (d) {
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 1)
            .on("mouseover", overed2)
            .on("mouseout", outed2)
        d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
        lineGraph3
            // .append("g")
            .selectAll('path')
            .data(xinline2)
            .enter()
            .append("path")
            .attr("d", function (d, i) {
                // console.log(d,i)
                return createLink(d)
            })
            // .attr("stroke","#ccc")
            // .attr("stroke-width",2)
            .attr("stroke", function (d) {
                return d.color2;
            })
            .attr("fill", 'none')
            .attr("stroke-width", function (d) {
                return linear2(Math.abs(d.value));
            })
            // .attr("fill",function (d){
            //     return color(d.value);
            // })
            .style("opacity", 1)
            .on("mouseover", overed3)
            .on("mouseout", outed3)
        // 画折线图
        if(flagstyle == 0){
            //表示控制第一个图
            if(Index == 0){
                plusfalg0 = plusfalg0 - 1
                ucount = plusfalg0 + 1
                vcount = plusfalg0 + 1

                plusu = allU1[0][plusfalg0]
                plusv = allV1[0][plusfalg0]
                pluscorr = allcorruv[0][plusfalg0]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 1){
                plusfalg1 = plusfalg1 - 1
                ucount = plusfalg1 + 1
                vcount = plusfalg1 + 1

                plusu = allU1[1][plusfalg1]
                plusv = allV1[1][plusfalg1]
                pluscorr = allcorruv[1][plusfalg1]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 2){
                plusfalg2 = plusfalg2 - 1
                ucount = plusfalg2 + 1
                vcount = plusfalg2 + 1

                plusu = allU1[2][plusfalg2]
                plusv = allV1[2][plusfalg2]
                pluscorr = allcorruv[2][plusfalg2]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 3){
                plusfalg3 = plusfalg3 - 1
                ucount = plusfalg3 + 1
                vcount = plusfalg3 + 1

                plusu = allU1[3][plusfalg3]
                plusv = allV1[3][plusfalg3]
                pluscorr = allcorruv[3][plusfalg3]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 4){
                plusfalg4 = plusfalg4 - 1
                ucount = plusfalg4 + 1
                vcount = plusfalg4 + 1

                plusu = allU1[4][plusfalg4]
                plusv = allV1[4][plusfalg4]
                pluscorr = allcorruv[4][plusfalg4]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }
            if(Index == 5){
                plusfalg5 = plusfalg5 - 1
                ucount = plusfalg5 + 1
                vcount = plusfalg5 + 1

                plusu = allU1[5][plusfalg5]
                plusv = allV1[5][plusfalg5]
                pluscorr = allcorruv[5][plusfalg5]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }
            if(Index == 6){
                plusfalg6 = plusfalg6 - 1
                ucount = plusfalg6 + 1
                vcount = plusfalg6 + 1

                plusu = allU1[6][plusfalg6]
                plusv = allV1[6][plusfalg4]
                pluscorr = allcorruv[6][plusfalg6]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }
            if(Index == 7){
                plusfalg7 = plusfalg7 - 1
                ucount = plusfalg7 + 1
                vcount = plusfalg7 + 1

                plusu = allU1[7][plusfalg7]
                plusv = allV1[7][plusfalg7]
                pluscorr = allcorruv[7][plusfalg7]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(checknum.length == 0){


                // 修改左边小圆点数据 U1 - U2 - U3
                dat1[Index][2] = nameu1;
                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat1,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    console.log("par1",par)
                                    // 如果在记录tuli中没找到则将颜色映射
                                    if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                        // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                dat2[Index][2] = namev1;
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat2,
                            type: 'scatter',
                            itemStyle: {
                                // color:'#d73027',
                                color:function(par){
                                    console.log(jilu_tuli.indexOf(par.data[1]-1)==-1)
                                    if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);
            }else{
                // 修改左边小圆点数据 U1 - U2 - U3
                dat1[Index][2] = nameu1;
                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat1,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                dat2[Index][2] = namev1;
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat2,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);
            }


            var doma1 = document.getElementById("a1");
            var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
            var doma2 = document.getElementById("a2");
            var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
            var doma3 = document.getElementById("a3");
            var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
            var doma4 = document.getElementById("a4");
            var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
            var doma5 = document.getElementById("a5");
            var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
            var doma6 = document.getElementById("a6");
            var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
            var doma7 = document.getElementById("a7");
            var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
            var doma8 = document.getElementById("a8");
            var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});

            var optiona1 = {
                title: {
                    text: '折线图',
                    left: 'center'
                },
                dataZoom:[
                    {
                        type: 'inside', // 使鼠标在图表中时滚轮可用
                        xAxisIndex:[0],
                    },
                ],
                tooltip: {
                    trigger: 'axis'
                },

                grid: {
                    top:5,
                    bottom:5,
                    left:5,
                    right:5
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: [],
                    splitLine: false,
                },
                yAxis: {
                    type: 'value',
                    splitLine: false
                },
                series: [
                    {
                        name: nameu1,
                        type: 'line',
                        // stack: '总量1',
                        data: []
                    },
                    {
                        name: namev1,
                        type: 'line',
                        // stack: '总量2',
                        data: []
                    },
                    {
                        name: 'u1',
                        type: 'line',
                        // stack: '总量3',
                        data: []
                    },
                    {
                        name: 'v1',
                        type: 'line',
                        // stack: '总量4',
                        data: []
                    },
                ]
            };

            if(Index == 0){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[0]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.title.text = pluscorr;
                myCharta1.setOption(optiona1,true);
                console.log("optiona1",optiona1)
            }
            if(Index == 1){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[1]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta2.setOption(optiona1,true);
                // console.log("optiona2",optiona2)
            }
            if(Index == 2){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[2]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta3.setOption(optiona1,true);
            }

            if(Index == 3){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[3]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta4.setOption(optiona1,true);
            }
            if(Index == 4){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[4]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta5.setOption(optiona1,true);
            }
            if(Index == 5){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[5]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta6.setOption(optiona1,true);
            }
            if(Index == 6){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[6]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta7.setOption(optiona1,true);
            }
            if(Index == 7){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[7]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta8.setOption(optiona1,true);
            }
        }

        // 画散点图
        if(flagstyle == 1){
            //表示控制第一个图
            if(Index == 0){
                plusfalg00 = plusfalg00 - 1
                ucount = plusfalg00 + 1
                vcount = plusfalg00 + 1

                console.log("subflag00",plusfalg00)

                plustu = alltu[0][plusfalg00]
                pluscorr = allcorruv[0][plusfalg00]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 1){
                plusfalg11 = plusfalg11 - 1
                ucount = plusfalg11 + 1
                vcount = plusfalg11 + 1

                plustu = alltu[1][plusfalg11]
                pluscorr = allcorruv[1][plusfalg11]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 2){
                plusfalg22 = plusfalg22 - 1
                ucount = plusfalg22 + 1
                vcount = plusfalg22 + 1

                plustu = alltu[2][plusfalg22]
                pluscorr = allcorruv[2][plusfalg22]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 3){
                plusfalg33 = plusfalg33 - 1
                ucount = plusfalg33 + 1
                vcount = plusfalg33 + 1

                plustu = alltu[3][plusfalg33]
                pluscorr = allcorruv[3][plusfalg33]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 4){
                plusfalg44 = plusfalg44 - 1
                ucount = plusfalg44 + 1
                vcount = plusfalg44 + 1

                plustu = alltu[4][plusfalg44]
                pluscorr = allcorruv[4][plusfalg44]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }
            if(Index == 5){
                plusfalg55 = plusfalg55 - 1
                ucount = plusfalg55 + 1
                vcount = plusfalg55 + 1

                plustu = alltu[5][plusfalg55]
                pluscorr = allcorruv[5][plusfalg55]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }
            if(Index == 6){
                plusfalg66 = plusfalg66 - 1
                ucount = plusfalg66 + 1
                vcount = plusfalg66 + 1

                plustu = alltu[6][plusfalg66]
                pluscorr = allcorruv[6][plusfalg66]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }
            if(Index == 7){
                plusfalg77 = plusfalg77 - 1
                ucount = plusfalg77 + 1
                vcount = plusfalg77 + 1

                plustu = alltu[7][plusfalg77]
                pluscorr = allcorruv[7][plusfalg77]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(checknum.length == 0){

                datt1 = [[],[],[],[],[],[],[],[]]
                datt2 = [[],[],[],[],[],[],[],[]]
                console.log("plus numss",numss)

                // 当没有图例被选取时
                if(numss.length == 0){
                    datt1 = dat1
                    datt2 = dat2
                }
                else{
                    // 给datt1重新赋值
                    for(var i=0; i<numss.length; i++){
                        temp = numss[i]
                        for(var j =0; j < dat1[temp].length;j++){
                            datt1[i][j] = dat1[temp][j]
                            datt2[i][j] = dat2[temp][j]
                        }
                        // 修改第二个属性 即:位置
                        datt1[i][1] = i+1
                        datt2[i][1] = i+1
                    }
                }

                // 修改左边小圆点数据 U1 - U2 - U3
                datt1[Index][2] = nameu1;
                datt2[Index][2] = namev1;

                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: datt1,
                            type: 'scatter',
                            itemStyle: {
                                color : '#d73027',
                                // color:function(par){
                                //     console.log("par1",par)
                                //     // 如果在记录tuli中没找到则将颜色映射
                                //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                //         return '#d73027'
                                //     }
                                //     else{
                                //         return 'white'
                                //     }
                                //         // return color2(par.data[3])
                                // },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: datt2,
                            type: 'scatter',
                            itemStyle: {
                                color:'#d73027',
                                // color:function(par){
                                //     console.log(jilu_tuli.indexOf(par.data[1]-1)==-1)
                                //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                //         return '#d73027'
                                //     }
                                //     else{
                                //         return 'white'
                                //     }
                                //     // return color2(par.data[3])
                                // },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);

            }else{
                // 修改左边小圆点数据 U1 - U2 - U3
                dat1[Index][2] = nameu1;
                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat1,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                dat2[Index][2] = namev1;
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat2,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);
            }

            var doma1 = document.getElementById("a1");
            var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
            var doma2 = document.getElementById("a2");
            var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
            var doma3 = document.getElementById("a3");
            var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
            var doma4 = document.getElementById("a4");
            var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
            var doma5 = document.getElementById("a5");
            var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
            var doma6 = document.getElementById("a6");
            var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
            var doma7 = document.getElementById("a7");
            var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
            var doma8 = document.getElementById("a8");
            var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});

            var optiona1 = {
                title:{
                    text:123,
                    left:'center'
                },
                grid:{
                    top:5,
                    bottom:5,
                    left:5,
                    right:5
                },
                dataZoom:[
                    {
                        type: 'inside', // 使鼠标在图表中时滚轮可用
                        xAxisIndex:[0],
                    },
                ],
                xAxis: {
                    show: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                },
                yAxis: {
                    show: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                },
                series: [{
                    symbolSize:4,
                    itemStyle:{
                        color:'#0780cf'
                    },
                    data:[],
                    type: 'scatter'
                },
                    {
                        symbolSize:4,
                        itemStyle:{
                            color:'#0000FF'
                        },
                        data:[],
                        type: 'scatter'
                    },
                ]
            };

            if(Index == 0){
                // 设置对应的小方框中的U1 V1散点图
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta1.setOption(optiona1,true);
            }
            if(Index == 1){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta2.setOption(optiona1,true);
            }
            if(Index == 2){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta3.setOption(optiona1,true);
            }
            if(Index == 3){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta4.setOption(optiona1,true);
            }
            if(Index == 4){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta5.setOption(optiona1,true);
            }
            if(Index == 5){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta6.setOption(optiona1,true);
            }
            if(Index == 6){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta7.setOption(optiona1,true);
            }
            if(Index == 7){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta8.setOption(optiona1,true);
            }
        }
    }

    var plusu = 0
    var plusv = 0
    var pluscorr = 0
    var plustu = 0
    var tu_line=[0,0,0,0,0,0,0,0]
    function plusUV(Index){
        tu_line[Index]=tu_line[Index]+1
        var max_t = inputsRy.theValue[1]/100;
        var min_t = inputsRy.theValue[0]/100;

        if(is_sel.length == 0){
            var xinline1=[]
            for (var i=0;i<left_line.length;i++){
                if(checknum.length == 0){
                    var newline=left_line[i]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[i] && jilu_tuli.indexOf(newline[j].new)==-1) {
                            newline[j].target.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline1.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length; m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i)!=-1){
                        var newline=left_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[i] && jilu_tuli1.indexOf(newline[j].new)==-1) {
                                newline[j].target.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline1.push(newline[j])
                            }
                        }
                    }
                }
            }
            var xinline2=[]
            for (var i=0;i<right_line.length;i++){
                if(checknum.length == 0){
                    var newline=right_line[i]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[i] && jilu_tuli.indexOf(newline[j].new)==-1) {
                            newline[j].source.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline2.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length; m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i)!=-1){
                        var newline=right_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[i] && jilu_tuli1.indexOf(newline[j].new)==-1) {
                                newline[j].source.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline2.push(newline[j])
                            }
                        }
                    }
                }
            }
        }
        else{
            var xinline1 = []
            for (var i=0;i<tongji.length && i<8 && i<is_sel.length;i++){

                if(checknum.length == 0){
                    var newline=left_line[is_sel[i]]
                    console.log(jilu_tuli,newline)
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[is_sel[i]]) {
                            newline[j].target.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline1.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length;m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i) != -1){
                        var newline=left_line[i]
                        for (var j=0;j<newline.length;j++) {
                            if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].end==tu_line[is_sel[i]]) {
                                newline[j].target.y=140 + 80 * i
                                newline[j].color2=peise[i]
                                xinline1.push(newline[j])
                            }
                        }
                    }
                }
            }
            var xinline2=[]
            for (var i=0;i<tongji.length && i<8 && i<is_sel.length;i++){
                if(checknum.length == 0){
                    var newline=right_line[is_sel[i]]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[is_sel[i]]) {
                            newline[j].source.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline2.push(newline[j])
                        }
                    }
                }else{
                    var checknum1 = []
                    for(var m = 0; m < checknum.length;m++){
                        checknum1.push(m)
                    }
                    if(checknum1.indexOf(i)!=-1){
                    var newline=right_line[i]
                    for (var j=0;j<newline.length;j++) {
                        if (Math.abs(newline[j].value) <= max_t && Math.abs(newline[j].value) >= min_t && newline[j].start==tu_line[is_sel[i]]) {
                            newline[j].source.y=140 + 80 * i
                            newline[j].color2=peise[i]
                            xinline2.push(newline[j])
                            }
                        }
                    }
                }

            }
        }


        console.log("xinline1",xinline1,xinline2)
        d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
        lineGraph1
            // .append("g")
            .selectAll('path')
            .data(xinline1)
            .enter()
            .append("path")
            .attr("d", function (d, i) {
                // console.log(d,i)
                return createLink(d)
            })
            // .attr("stroke","#ccc")
            // .attr("stroke-width",2)
            .attr("stroke", function (d) {
                return d.color2;
            })
            .attr("fill", 'none')
            // .attr("stroke-width",5)
            .attr("stroke-width", function (d) {
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 1)
            .on("mouseover", overed2)
            .on("mouseout", outed2)
        d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
        lineGraph3
            // .append("g")
            .selectAll('path')
            .data(xinline2)
            .enter()
            .append("path")
            .attr("d", function (d, i) {
                // console.log(d,i)
                return createLink(d)
            })
            // .attr("stroke","#ccc")
            // .attr("stroke-width",2)
            .attr("stroke", function (d) {
                return d.color2;
            })
            .attr("fill", 'none')
            .attr("stroke-width", function (d) {
                return linear2(Math.abs(d.value));
            })
            // .attr("fill",function (d){
            //     return color(d.value);
            // })
            .style("opacity", 1)
            .on("mouseover", overed3)
            .on("mouseout", outed3)
        // 画折线图
        if(flagstyle == 0){
            //表示控制第一个图
            if(Index == 0){
                plusfalg0 = plusfalg0 + 1
                ucount = plusfalg0 + 1
                vcount = plusfalg0 + 1

                plusu = allU1[0][plusfalg0]
                plusv = allV1[0][plusfalg0]
                pluscorr = allcorruv[0][plusfalg0]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 1){
                plusfalg1 = plusfalg1 + 1
                ucount = plusfalg1 + 1
                vcount = plusfalg1 + 1

                plusu = allU1[1][plusfalg1]
                plusv = allV1[1][plusfalg1]
                pluscorr = allcorruv[1][plusfalg1]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 2){
                plusfalg2 = plusfalg2 + 1
                ucount = plusfalg2 + 1
                vcount = plusfalg2 + 1

                plusu = allU1[2][plusfalg2]
                plusv = allV1[2][plusfalg2]
                pluscorr = allcorruv[2][plusfalg2]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 3){
                plusfalg3 = plusfalg3 + 1
                ucount = plusfalg3 + 1
                vcount = plusfalg3 + 1

                plusu = allU1[3][plusfalg3]
                plusv = allV1[3][plusfalg3]
                pluscorr = allcorruv[3][plusfalg3]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 4){
                plusfalg4 = plusfalg4 + 1
                ucount = plusfalg4 + 1
                vcount = plusfalg4 + 1

                plusu = allU1[4][plusfalg4]
                plusv = allV1[4][plusfalg4]
                pluscorr = allcorruv[4][plusfalg4]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 5){
                plusfalg5 = plusfalg5 + 1
                ucount = plusfalg5 + 1
                vcount = plusfalg5 + 1

                plusu = allU1[5][plusfalg5]
                plusv = allV1[5][plusfalg5]
                pluscorr = allcorruv[5][plusfalg5]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 6){
                plusfalg6 = plusfalg6 + 1
                ucount = plusfalg6 + 1
                vcount = plusfalg6 + 1

                plusu = allU1[6][plusfalg6]
                plusv = allV1[6][plusfalg6]
                pluscorr = allcorruv[6][plusfalg6]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 7){
                plusfalg7 = plusfalg7 + 1
                ucount = plusfalg7 + 1
                vcount = plusfalg7 + 1

                plusu = allU1[7][plusfalg7]
                plusv = allV1[7][plusfalg7]
                pluscorr = allcorruv[7][plusfalg7]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(checknum.length == 0){
                // 修改左边小圆点数据 U1 - U2 - U3
                dat1[Index][2] = nameu1;
                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat1,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    console.log("par1",par)
                                    // 如果在记录tuli中没找到则将颜色映射
                                    if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                        // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                dat2[Index][2] = namev1;
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat2,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    console.log("par1",par)
                                    // 如果在记录tuli中没找到则将颜色映射
                                    if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                        // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);
            }else{
                // 修改左边小圆点数据 U1 - U2 - U3
                dat1[Index][2] = nameu1;
                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat1,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                dat2[Index][2] = namev1;
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat2,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);
            }


            var doma1 = document.getElementById("a1");
            var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
            var doma2 = document.getElementById("a2");
            var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
            var doma3 = document.getElementById("a3");
            var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
            var doma4 = document.getElementById("a4");
            var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
            var doma5 = document.getElementById("a5");
            var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
            var doma6 = document.getElementById("a6");
            var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
            var doma7 = document.getElementById("a7");
            var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
            var doma8 = document.getElementById("a8");
            var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});

            var optiona1 = {
                title: {
                    text: '折线图',
                    left: 'center'
                },
                dataZoom:[
                    {
                        type: 'inside', // 使鼠标在图表中时滚轮可用
                        xAxisIndex:[0],
                    },
                ],
                tooltip: {
                    trigger: 'axis'
                },

                grid: {
                    top:5,
                    bottom:5,
                    left:5,
                    right:5
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: [],
                    splitLine: false,
                },
                yAxis: {
                    type: 'value',
                    splitLine: false
                },
                series: [
                    {
                        name: nameu1,
                        type: 'line',
                        // stack: '总量1',
                        data: []
                    },
                    {
                        name: namev1,
                        type: 'line',
                        // stack: '总量2',
                        data: []
                    },
                    {
                        name: 'u1',
                        type: 'line',
                        // stack: '总量3',
                        data: []
                    },
                    {
                        name: 'v1',
                        type: 'line',
                        // stack: '总量4',
                        data: []
                    },
                ]
            };

            if(Index == 0){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[0]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.title.text = pluscorr;
                myCharta1.setOption(optiona1,true);
                console.log("optiona1",optiona1)
            }
            if(Index == 1){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[1]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta2.setOption(optiona1,true);
                // console.log("optiona2",optiona2)
            }
            if(Index == 2){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[2]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta3.setOption(optiona1,true);
            }

            if(Index == 3){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[3]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta4.setOption(optiona1,true);
            }
            if(Index == 4){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[4]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta5.setOption(optiona1,true);
            }
            if(Index == 5){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[5]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta6.setOption(optiona1,true);
            }
            if(Index == 6){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[6]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta7.setOption(optiona1,true);
            }
            if(Index == 7){
                optiona1.series[0].data=plusu;
                optiona1.series[1].data=plusv;
                optiona1.xAxis.data=time[7]
                // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.title.text=pluscorr;
                myCharta8.setOption(optiona1,true);
            }
        }

        // 画散点图
        if(flagstyle == 1){
            //表示控制第一个图
            if(Index == 0){
                plusfalg00 = plusfalg00 + 1
                ucount = plusfalg00 + 1
                vcount = plusfalg00 + 1

                console.log("plusflag00",plusfalg00)

                plustu = alltu[0][plusfalg00]
                pluscorr = allcorruv[0][plusfalg00]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 1){
                plusfalg11 = plusfalg11 + 1
                ucount = plusfalg11 + 1
                vcount = plusfalg11 + 1

                plustu = alltu[1][plusfalg11]
                pluscorr = allcorruv[1][plusfalg11]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 2){
                plusfalg22 = plusfalg22 + 1
                ucount = plusfalg22 + 1
                vcount = plusfalg22 + 1

                plustu = alltu[2][plusfalg22]
                pluscorr = allcorruv[2][plusfalg22]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 3){
                plusfalg33 = plusfalg33 + 1
                ucount = plusfalg33 + 1
                vcount = plusfalg33 + 1

                plustu = alltu[3][plusfalg33]
                pluscorr = allcorruv[3][plusfalg33]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 4){
                plusfalg44 = plusfalg44 + 1
                ucount = plusfalg44 + 1
                vcount = plusfalg44 + 1

                plustu = alltu[4][plusfalg44]
                pluscorr = allcorruv[4][plusfalg44]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 5){
                plusfalg55 = plusfalg55 + 1
                ucount = plusfalg55 + 1
                vcount = plusfalg55 + 1

                plustu = alltu[5][plusfalg55]
                pluscorr = allcorruv[5][plusfalg55]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 6){
                plusfalg66 = plusfalg66 + 1
                ucount = plusfalg66 + 1
                vcount = plusfalg66 + 1

                plustu = alltu[6][plusfalg66]
                pluscorr = allcorruv[6][plusfalg66]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            if(Index == 7){
                plusfalg77 = plusfalg77 + 1
                ucount = plusfalg77 + 1
                vcount = plusfalg77 + 1

                plustu = alltu[7][plusfalg77]
                pluscorr = allcorruv[7][plusfalg77]

                var nameu1 = 'U' + ucount
                var namev1 = 'V' + vcount
            }

            console.log("plus checknum",checknum)
            if(checknum.length == 0){

                datt1 = [[],[],[],[],[],[],[],[]]
                datt2 = [[],[],[],[],[],[],[],[]]
                console.log("plus numss",numss)

               // 当没有图例被选取时
                if(numss.length == 0){
                    datt1 = dat1
                    datt2 = dat2
                }
                else{
                    // 给datt1重新赋值
                    for(var i=0; i<numss.length; i++){
                        temp = numss[i]
                        for(var j =0; j < dat1[temp].length;j++){
                            datt1[i][j] = dat1[temp][j]
                            datt2[i][j] = dat2[temp][j]
                        }
                        // 修改第二个属性 即:位置
                        datt1[i][1] = i+1
                        datt2[i][1] = i+1
                    }
                }

                // 修改左边小圆点数据 U1 - U2 - U3
                datt1[Index][2] = nameu1;
                datt2[Index][2] = namev1;

                console.log("plus dat1",dat1)
                console.log("plus dat2",dat2)
                console.log("plus datt1",datt1)
                console.log("plus datt2",datt2)

                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: datt1,
                            type: 'scatter',
                            itemStyle: {
                                color : '#d73027',
                                // color:function(par){
                                //     console.log("par1",par)
                                //     // 如果在记录tuli中没找到则将颜色映射
                                //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                //         return '#d73027'
                                //     }
                                //     else{
                                //         return 'white'
                                //     }
                                //         // return color2(par.data[3])
                                // },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: datt2,
                            type: 'scatter',
                            itemStyle: {
                                color:'#d73027',
                                // color:function(par){
                                //     console.log(jilu_tuli.indexOf(par.data[1]-1)==-1)
                                //     if(jilu_tuli.indexOf(par.data[1]-1)==-1){
                                //         return '#d73027'
                                //     }
                                //     else{
                                //         return 'white'
                                //     }
                                //     // return color2(par.data[3])
                                // },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);

            }else{
                // 修改左边小圆点数据 U1 - U2 - U3
                dat1[Index][2] = nameu1;
                var dom222 = document.getElementById("link1");
                var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
                var option222 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat1,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart222.setOption(option222);

                // 修改右边小圆点数据 V1 - V2 - V3
                dat2[Index][2] = namev1;
                var dom221 = document.getElementById("link2");
                var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
                var option221 = {
                    tooltip: {
                        formatter: function (params) {
                            // console.log("1",params)
                            return params.data[1]
                        }
                    },
                    grid: {
                        left: 10,
                        top: 10,
                        bottom:50
                    },
                    xAxis: {
                        show: false,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        max: 0.5,
                        min: 0
                    },
                    yAxis: {
                        show: false,
                        inverse: true,
                        axisLabel: {
                            show: false
                        },
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        min: 1,
                        max: 9
                        // max:qita_column.length,
                    },
                    series: [
                        {
                            name: 'link2',
                            // singleAxisIndex: 0,
                            // coordinateSystem: 'singleAxis',
                            symbolSize: 20,
                            data: dat2,
                            type: 'scatter',
                            itemStyle: {
                                color:function(par){
                                    var numtempnew = []
                                    console.log("par",par)
                                    console.log("jilutili1",jilu_tuli1)
                                    console.log("numtemp",numtemp)
                                    for(var i=0; i<numtemp.length;i++){
                                        if(jilu_tuli1.indexOf(numtemp[i]) == -1){
                                            numtempnew.push(numtemp[i])
                                        }
                                    }
                                    console.log("numtempnew",numtempnew)

                                    console.log(numtempnew.indexOf(par.data[1]-1)!=-1)
                                    if(numtempnew.indexOf(par.data[1]-1)!=-1){
                                        return '#d73027'
                                    }
                                    else{
                                        return 'white'
                                    }
                                    // return color2(par.data[3])
                                },
                                opacity: 1
                            },
                            label: {
                                show: true,
                                color:'white',
                                // position:'right',
                                formatter: function (parma) {
                                    // console.log(parma)
                                    return parma.data[2]
                                }
                            },
                            emphasis: {
                                scale: true,
                                itemStyle: {
                                    // color: 'red',
                                    borderColor: 'black',
                                    borderWidth: 2,
                                    borderType: 'dotted',
                                    borderJoin: 'miter',
                                    borderCap: 'square'
                                }
                            },
                        },
                    ]
                };
                myChart221.setOption(option221,true);

                console.log("know dat1",dat1)
                console.log("know dat2",dat2)
            }

            var doma1 = document.getElementById("a1");
            var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
            var doma2 = document.getElementById("a2");
            var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
            var doma3 = document.getElementById("a3");
            var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
            var doma4 = document.getElementById("a4");
            var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
            var doma5 = document.getElementById("a5");
            var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
            var doma6 = document.getElementById("a6");
            var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
            var doma7 = document.getElementById("a7");
            var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
            var doma8 = document.getElementById("a8");
            var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});

            var optiona1 = {
                title:{
                    text:123,
                    left:'center'
                },
                grid:{
                    top:5,
                    bottom:5,
                    left:5,
                    right:5
                },
                xAxis: {
                    show: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                },
                yAxis: {
                    show: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                },
                series: [{
                    symbolSize:4,
                    itemStyle:{
                        color:'#0780cf'
                    },
                    data:[],
                    type: 'scatter'
                },
                    {
                        symbolSize:4,
                        itemStyle:{
                            color:'#0000FF'
                        },
                        data:[],
                        type: 'scatter'
                    },
                ]
            };

            if(Index == 0){
                // 设置对应的小方框中的U1 V1散点图
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta1.setOption(optiona1,true);
            }
            if(Index == 1){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta2.setOption(optiona1,true);
            }
            if(Index == 2){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta3.setOption(optiona1,true);
            }
            if(Index == 3){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta4.setOption(optiona1,true);
            }
            if(Index == 4){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta5.setOption(optiona1,true);
            }
            if(Index == 5){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta6.setOption(optiona1,true);
            }
            if(Index == 6){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta7.setOption(optiona1,true);
            }
            if(Index == 7){
                optiona1.series[0].data=plustu;
                optiona1.series[0].itemStyle.color=color2(pluscorr);
                optiona1.title.text=pluscorr;
                myCharta8.setOption(optiona1,true);
            }
        }

    }

    function qiehuan(){
        // alert("ok")
        // 初始化所有小圆点到 U1 V1
        dat1=data_link1;
        for(var i = 0; i < 8;i++){
            dat1[i][2] = 'u1'
        }
        dat2=data_link2;
        for(var i = 0; i < 8;i++){
            dat2[i][2] = 'v1'
        }
        var dom222 = document.getElementById("link1");
        var myChart222 = echarts.init(dom222, null, {renderer: 'svg'});
        var option222 = {
            tooltip: {
                formatter: function (params) {
                    // console.log("1",params)
                    return params.data[1]
                }
            },
            grid: {
                left: 10,
                top: 10,
                bottom:50
            },
            xAxis: {
                show: false,
                axisLabel: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                max: 0.5,
                min: 0
            },
            yAxis: {
                show: false,
                inverse: true,
                axisLabel: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                min: 1,
                max: 9
                // max:qita_column.length,
            },
            series: [
                {
                    name: 'link1',
                    // singleAxisIndex: 0,
                    // coordinateSystem: 'singleAxis',
                    symbolSize: 20,
                    data: dat1,
                    type: 'scatter',
                    itemStyle: {
                        color:'#d73027',
                        // color:function(par){
                        //     return color2(par.data[3])
                        // },
                        opacity: 1
                    },
                    label: {
                        show: true,
                        // position:'right',
                        color:'white',
                        formatter: function (parma) {
                            // console.log(parma)
                            return parma.data[2]
                        }
                    },
                    emphasis: {
                        scale: true,
                        itemStyle: {
                            // color: 'red',
                            borderColor: 'black',
                            borderWidth: 2,
                            borderType: 'dotted',
                            borderJoin: 'miter',
                            borderCap: 'square'
                        }
                    },
                },
            ]
        };
        myChart222.setOption(option222,true);

        var dom221 = document.getElementById("link2");
        var myChart221 = echarts.init(dom221, null, {renderer: 'svg'});
        var option221 = {
            tooltip: {
                formatter: function (params) {
                    // console.log("1",params)
                    return params.data[1]
                }
            },
            grid: {
                left: 10,
                top: 10,
                bottom:50
            },
            xAxis: {
                show: false,
                axisLabel: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                max: 0.5,
                min: 0
            },
            yAxis: {
                show: false,
                inverse: true,
                axisLabel: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                min: 1,
                max: 9
                // max:qita_column.length,
            },
            series: [
                {
                    name: 'link2',
                    // singleAxisIndex: 0,
                    // coordinateSystem: 'singleAxis',
                    symbolSize: 20,
                    data: dat2,
                    type: 'scatter',
                    itemStyle: {
                        color:'#d73027',
                        // color:function(par){
                        //     return color2(par.data[3])
                        // },
                        opacity: 1
                    },
                    label: {
                        show: true,
                        color:'white',
                        // position:'right',
                        formatter: function (parma) {
                            // console.log(parma)
                            return parma.data[2]
                        }
                    },
                    emphasis: {
                        scale: true,
                        itemStyle: {
                            // color: 'red',
                            borderColor: 'black',
                            borderWidth: 2,
                            borderType: 'dotted',
                            borderJoin: 'miter',
                            borderCap: 'square'
                        }
                    },
                },
            ]
        };
        myChart221.setOption(option221,true);

        numallu = []
        numallv = []
        time = []
        corruv = []
        tudata = []

        console.log("8888888")
        console.log(checknum)
        // 当勾选框没有勾选时
        if(checknum.length == 0){
            for(var i = 0; i < allU1.length;i++){
                numallu[i] = allU1[i][0]
                numallv[i] = allV1[i][0]
                time[i] = allTime[i]
                corruv[i] = allcorruv[i][0]
                tudata[i] = alltu[i][0]
            }
        }else{
            for(var i = 0; i < checknum.length;i++){
                numa = checknum[i]
                numallu[i] = allU1[numa][0]
                numallv[i] = allV1[numa][0]
                time[i] = allTime[numa]
                corruv[i] = allcorruv[numa][0]
                tudata[i] = alltu[numa][0]
            }
        }

        var doma1 = document.getElementById("a1");
        var myCharta1 = echarts.init(doma1, null, {renderer: 'svg'});
        var doma2 = document.getElementById("a2");
        var myCharta2 = echarts.init(doma2, null, {renderer: 'svg'});
        var doma3 = document.getElementById("a3");
        var myCharta3 = echarts.init(doma3, null, {renderer: 'svg'});
        var doma4 = document.getElementById("a4");
        var myCharta4 = echarts.init(doma4, null, {renderer: 'svg'});
        var doma5 = document.getElementById("a5");
        var myCharta5 = echarts.init(doma5, null, {renderer: 'svg'});
        var doma6 = document.getElementById("a6");
        var myCharta6 = echarts.init(doma6, null, {renderer: 'svg'});
        var doma7 = document.getElementById("a7");
        var myCharta7 = echarts.init(doma7, null, {renderer: 'svg'});
        var doma8 = document.getElementById("a8");
        var myCharta8 = echarts.init(doma8, null, {renderer: 'svg'});

        // 当状态为散点图时
        if(flagstyle == 0){
            var optiona1 = {
                title:{
                    text:123,
                    left:'center'
                },
                grid:{
                    top:5,
                    bottom:5,
                    left:5,
                    right:5
                },
                xAxis: {
                    show: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                },
                yAxis: {
                    show: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                },
                series: [{
                    symbolSize:4,
                    itemStyle:{
                        color:'#0780cf'
                    },
                    data:[],
                    type: 'scatter'
                },
                    {
                        symbolSize:4,
                        itemStyle:{
                            color:'black'
                        },
                        data:[],
                        type: 'scatter'
                    },
                ]
            };

            var sample1 = sample/10
            // 触发点击事件 进行联动
            myChart5.on('click', function (params) {
                // if (style == 1){
                console.log("params",params)
                // 设置对应的小方框中的U1 V1散点图
                console.log("tu",tu)
                console.log("tu[0]",tu[0])
                // 获取下标
                dataindex = params.dataIndex
                // sum = daindex
                console.log("sample1",sample1)

                // 需要重新给散点图赋值 否则会被最后一个图的值覆盖

                //对应 U1 和 V1
                optiona1.series[0].data=tu[0]
                optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[1].data=tu[0].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[0];
                myCharta1.setOption(optiona1,true)

                //对应 U2 和 V2
                optiona1.series[0].data=tu[1]
                optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
                optiona1.series[1].data=tu[1].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[1];
                myCharta2.setOption(optiona1,true);
                console.log("optional1",optiona1)

                optiona1.series[0].data=tu[2]
                optiona1.series[0].itemStyle.color=color2(corr_uv[2]);
                optiona1.series[1].data=tu[2].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[2];
                myCharta3.setOption(optiona1,true);

                optiona1.series[0].data=tu[3]
                optiona1.series[0].itemStyle.color=color2(corr_uv[3]);
                optiona1.series[1].data=tu[3].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[3];
                myCharta4.setOption(optiona1,true);

                optiona1.series[0].data=tu[4]
                optiona1.series[0].itemStyle.color=color2(corr_uv[4]);
                optiona1.series[1].data=tu[4].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[4];
                myCharta5.setOption(optiona1,true);

                optiona1.series[0].data=tu[5]
                optiona1.series[0].itemStyle.color=color2(corr_uv[5]);
                optiona1.series[1].data=tu[5].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[5];
                myCharta6.setOption(optiona1,true);

                optiona1.series[0].data=tu[6]
                optiona1.series[0].itemStyle.color=color2(corr_uv[6]);
                optiona1.series[1].data=tu[6].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[6];
                myCharta7.setOption(optiona1,true);

                optiona1.series[0].data=tu[7]
                optiona1.series[0].itemStyle.color=color2(corr_uv[7]);
                optiona1.series[1].data=tu[7].slice(sample1*params.dataIndex,sample1*params.dataIndex+parseInt(sample1));
                optiona1.title.text=corr_uv[7];
                myCharta8.setOption(optiona1,true);
                // }
            })

            // 设置对应的小方框中的U1 V1散点图
            optiona1.series[0].data=tudata[0];
            optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
            optiona1.title.text=corruv[0];
            myCharta1.setOption(optiona1,true);

            optiona1.series[0].data=tudata[1];
            optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
            optiona1.title.text=corruv[1];
            myCharta2.setOption(optiona1,true);

            optiona1.series[0].data=tudata[2];
            optiona1.series[0].itemStyle.color=color2(corr_uv[2]);
            optiona1.title.text=corruv[2];
            myCharta3.setOption(optiona1,true);

            optiona1.series[0].data=tudata[3];
            optiona1.series[0].itemStyle.color=color2(corr_uv[3]);
            optiona1.title.text=corruv[3];
            myCharta4.setOption(optiona1,true);

            optiona1.series[0].data=tudata[4];
            optiona1.series[0].itemStyle.color=color2(corr_uv[4]);
            optiona1.title.text=corruv[4];
            myCharta5.setOption(optiona1,true);

            optiona1.series[0].data=tudata[5];
            optiona1.series[0].itemStyle.color=color2(corr_uv[5]);
            optiona1.title.text=corruv[5];
            myCharta6.setOption(optiona1,true);

            optiona1.series[0].data=tudata[6];
            optiona1.series[0].itemStyle.color=color2(corr_uv[6]);
            optiona1.title.text=corruv[6];
            myCharta7.setOption(optiona1,true);

            optiona1.series[0].data=tudata[7];
            optiona1.series[0].itemStyle.color=color2(corr_uv[7]);
            optiona1.title.text=corruv[7];
            myCharta8.setOption(optiona1,true);

            flagstyle = 1
            return;
        }

        // flagstyle == 1 表示为折线图时
        if(flagstyle == 1){
            var optiona1 = {
                title: {
                    text: '折线图',
                    left: 'center'
                },
                dataZoom:[
                    {
                        type: 'inside', // 使鼠标在图表中时滚轮可用
                        xAxisIndex:[0],
                    },
                ],
                tooltip: {
                    trigger: 'axis'
                },

                grid: {
                    top:5,
                    bottom:5,
                    left:5,
                    right:5
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: times,
                    splitLine: false,
                },
                yAxis: {
                    type: 'value',
                    splitLine: false
                },
                series: [
                    {
                        name: 'U1',
                        type: 'line',
                        // stack: '总量1',
                        data: []
                    },
                    {
                        name: 'V1',
                        type: 'line',
                        // stack: '总量2',
                        data: []
                    },
                    {
                        name: 'u1',
                        type: 'line',
                        // stack: '总量3',
                        data: []
                    },
                    {
                        name: 'v1',
                        type: 'line',
                        // stack: '总量4',
                        data: []
                    },
                ]
            };

            // 触发点击事件 进行折线图联动
            myChart5.on('click', function (params) {
                // if(style == 2){
                console.log("params",params)

                // 获取下标
                dataindex = params.dataIndex
                // sum = daindex
                // console.log("sample1",sample1)

                numu11 = []
                numv11 = []

                numu22 = []
                numv22 = []

                numu33 = []
                numv33 = []

                numu44 = []
                numv44 = []

                numu55 = []
                numv55 = []

                numu66 = []
                numv66 = []

                numu77 = []
                numv77 = []

                numu88 = []
                numv88 = []

                indexnum = params.dataIndex
                console.log("indexnum",indexnum)
                //对应 U1 和 V1

                // 获取数组对应的起始值
                a1 = sample*params.dataIndex
                a2 = sample*params.dataIndex+parseInt(sample)

                numu11 = numu1.slice(a1,a2)
                numv11 = numv1.slice(a1,a2)
                console.log("numu11",numu11)
                console.log("numv11",numv11)
                optiona1.series[0].data=numu1;
                optiona1.series[1].data=numv1;
                optiona1.series[2].data=numu11
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv11
                optiona1.title.text=corr_uv[0];
                myCharta1.setOption(optiona1,true);
                console.log("know optiona1",optiona1)

                numu22 = numu2.slice(a1,a2)
                numv22 = numv2.slice(a1,a2)
                optiona1.series[0].data=numu2;
                optiona1.series[1].data=numv2;
                optiona1.series[2].data=numu22
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv22
                optiona1.title.text=corr_uv[1];
                myCharta2.setOption(optiona1,true);

                numu33 = numu3.slice(a1,a2)
                numv33 = numv3.slice(a1,a2)
                optiona1.series[0].data=numu3;
                optiona1.series[1].data=numv3;
                optiona1.series[2].data=numu33
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv33
                optiona1.title.text=corr_uv[2];
                myCharta3.setOption(optiona1,true);

                numu44 = numu4.slice(a1,a2)
                numv44 = numv4.slice(a1,a2)
                optiona1.series[0].data=numu4;
                optiona1.series[1].data=numv4;
                optiona1.series[2].data=numu44
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv44
                optiona1.title.text=corr_uv[3];
                myCharta4.setOption(optiona1,true);

                numu55 = numu5.slice(a1,a2)
                numv55 = numv5.slice(a1,a2)
                optiona1.series[0].data=numu5;
                optiona1.series[1].data=numv5;
                optiona1.series[2].data=numu55
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv55
                optiona1.title.text=corr_uv[4];
                myCharta5.setOption(optiona1,true);

                numu66 = numu6.slice(a1,a2)
                numv66 = numv6.slice(a1,a2)
                optiona1.series[0].data=numu6;
                optiona1.series[1].data=numv6;
                optiona1.series[2].data=numu66
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv66
                optiona1.title.text=corr_uv[5];
                myCharta6.setOption(optiona1,true);

                numu77 = numu7.slice(a1,a2)
                numv77 = numv7.slice(a1,a2)
                optiona1.series[0].data=numu7;
                optiona1.series[1].data=numv7;
                optiona1.series[2].data=numu77
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv77
                optiona1.title.text=corr_uv[6];
                myCharta7.setOption(optiona1,true);

                numu88 = numu8.slice(a1,a2)
                numv88 = numv8.slice(a1,a2)
                optiona1.series[0].data=numu8;
                optiona1.series[1].data=numv8;
                optiona1.series[2].data=numu88
                // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
                optiona1.series[3].data=numv88
                optiona1.title.text=corr_uv[7];
                myCharta8.setOption(optiona1,true);
                // }
            })

            // console.log("numu1",numu1)
            // console.log("numv1",numv1)
            // 设置对应的小方框中的U1 V1折线图
            optiona1.series[0].data=numallu[0];
            optiona1.series[1].data=numallv[0];
            optiona1.xAxis.data=time[0]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[0]);
            optiona1.title.text = corruv[0];
            myCharta1.setOption(optiona1,true);
            console.log("optiona1",optiona1)

            optiona1.series[0].data=numallu[1];
            optiona1.series[1].data=numallv[1];
            optiona1.xAxis.data=time[1]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[1]);
            optiona1.title.text=corruv[1];
            myCharta2.setOption(optiona1,true);
            // console.log("optiona2",optiona2)

            optiona1.series[0].data=numallu[2];
            optiona1.series[1].data=numallv[2];
            optiona1.xAxis.data=time[2]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[2]);
            optiona1.title.text=corruv[2];
            myCharta3.setOption(optiona1,true);

            optiona1.series[0].data=numallu[3];
            optiona1.series[1].data=numallv[3];
            optiona1.xAxis.data=time[3]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[3]);
            optiona1.title.text=corruv[3];
            myCharta4.setOption(optiona1,true);

            optiona1.series[0].data=numallu[4];
            optiona1.series[1].data=numallv[4];
            optiona1.xAxis.data=time[4]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[4]);
            optiona1.title.text=corruv[4];
            myCharta5.setOption(optiona1,true);

            optiona1.series[0].data=numallu[5];
            optiona1.series[1].data=numallv[5];
            optiona1.xAxis.data=time[5]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[5]);
            optiona1.title.text=corruv[5];
            myCharta6.setOption(optiona1,true);

            optiona1.series[0].data=numallu[6];
            optiona1.series[1].data=numallv[6];
            optiona1.xAxis.data=time[6]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[6]);
            optiona1.title.text=corruv[6];
            myCharta7.setOption(optiona1,true);

            optiona1.series[0].data=numallu[7];
            optiona1.series[1].data=numallv[7];
            optiona1.xAxis.data=time[7]
            // optiona1.series[0].itemStyle.color=color2(corr_uv[7]);
            optiona1.title.text=corruv[7];
            myCharta8.setOption(optiona1,true);

            flagstyle = 0
            return;
        }
    }

    var name_jilu;
    var line_jilu;
    function jizhong(param){
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var sel = $('#param-Relevance  option:selected').val();
        name = param.id;
        name_jilu=name;
        shuzi=parseInt(name.replace(/[^0-9]/ig,""));
        var lines=suoyou_links;
        var lines2=[];
        console.log("lines",lines)
        if (sel=='Average'){
            for (var i=0;i<lines.length;i++){
                if (param.id.indexOf('input_cluster')>-1){
                    if (lines[i].start==shuzi && lines[i].value2<=max_t && lines[i].value2>=min_t){
                        lines2.push(lines[i].end)
                    }
                }
                else {
                    if (lines[i].end==shuzi && lines[i].value2<=max_t && lines[i].value2>=min_t){
                        lines2.push(lines[i].start)
                    }
                }
            }
        }
        else {
            for (var i=0;i<lines.length;i++){
                if (param.id.indexOf('input_cluster')>-1){
                    if (lines[i].start==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
                        lines2.push(lines[i].end)
                    }
                }
                else {
                    if (lines[i].end==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
                        lines2.push(lines[i].start)
                    }
                }
            }
        }
        line_jilu=lines2;
        var zuida,rongyu,max1,max2,var1,var2;
        if (param.id.indexOf('input_cluster')>-1){
            zuheX = zuhe1[shuzi];
            zuheY = []
            for (var i=0;i<lines2.length;i++){
                zuheY.push(zuhe2[lines2[i]])
            }
            $.ajax({
                type: "POST",
                url: "CCA3",
                dataType: "json",
                async: false,
                data: {"zuheX": JSON.stringify(zuheX), "zuheY": JSON.stringify(zuheY),"isIn":1},    // 传递列表
                success: function (data) {
                    console.log(data);
                    zuida = data['zuida'];
                    rongyu = data['rongyu'];
                    max1 = data['max1'];
                    max2 = data['max2'];
                    var1=data['var1'];
                    var2=data['var2'];
                }
            });
        }
        else{
            zuheX = [];
            zuheY = zuhe2[shuzi]
            for (var i=0;i<lines2.length;i++){
                zuheX.push(zuhe1[lines2[i]])
            }
            $.ajax({
                type: "POST",
                url: "CCA3",
                dataType: "json",
                async: false,
                data: {"zuheX": JSON.stringify(zuheX), "zuheY": JSON.stringify(zuheY),"isIn":0},    // 传递列表
                success: function (data) {
                    console.log("CCA3",data);
                    zuida = data['zuida'];
                    rongyu = data['rongyu'];
                    max1 = data['max1'];
                    max2 = data['max2'];
                    var1=data['var1'];
                    var2=data['var2'];
                }
            });
        }
        var strr = "";
        for (var i=0;i<lines2.length;i++){
            if (param.id.indexOf('input_cluster')>-1){
                strr += "<tr><td style='text-align:center;vertical-align:middle;'>"+"<div onclick='jizhong2(this)' onmouseover='over2(this)' onmouseout='out2(this)' id='input_"+i+'_'+shuzi+"'style='display: block;height: 40px;'></div>"+"</td><td style='text-align:center;vertical-align:middle;'>"+"<div id='output_"+i+'_'+lines2[i]+"'style='display: block;height: 40px;'></div>"+"</td><td>"+"<div id='max_corr"+i+"'style='display: block;height: 15px;'></div>"+"</td><td>"+"<div id='rongyu_"+i+"'style='display: block;height: 15px;'></div>"+"</td></tr>";
            }
            else{
                strr += "<tr><td style='text-align:center;vertical-align:middle;'>"+"<div onclick='jizhong2(this)' onmouseover='over2(this)' onmouseout='out2(this)' id='input_"+i+'_'+lines2[i]+"'style='display: block;height: 40px;'></div>"+"</td><td style='text-align:center;vertical-align:middle;'>"+"<div id='output_"+i+'_'+shuzi+"'style='display: block;height: 40px;'></div>"+"</td><td>"+"<div id='max_corr"+i+"'style='display: block;height: 15px;'></div>"+"</td><td>"+"<div id='rongyu_"+i+"'style='display: block;height: 15px;'></div>"+"</td></tr>";
            }
            // strr += "<tr><td style='text-align:center;vertical-align:middle;'>"+"<div id='input"+i+"'style='display: block;height: 40px;'></div>"+"</td><td style='text-align:center;vertical-align:middle;'>"+"<div id='output"+i+"'style='display: block;height: 40px;'></div>"+"</td><td>"+"<div id='max_corr"+i+"'style='display: block;height: 15px;'></div>"+"</td><td>"+"<div id='rongyu_"+i+"'style='display: block;height: 15px;'></div>"+"</td></tr>";
        }
        $("#tdData").html(strr);
        for (var i=0;i<lines2.length;i++){
            if (param.id.indexOf('input_cluster')>-1){
                var dom_0 = document.getElementById("input_" + i+'_'+shuzi);
                var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
                var dom_1 = document.getElementById("output_" + i+'_'+ lines2[i]);
                var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
            }
            else {
                var dom_0 = document.getElementById("input_" + i+'_'+ lines2[i]);
                var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
                var dom_1 = document.getElementById("output_" + i+'_'+shuzi);
                var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
            }
            // var dom_0 = document.getElementById("input" + i);
            // var myChart_0 = echarts.init(dom_0, null, {renderer: 'svg'});
            // var dom_1 = document.getElementById("output" + i);
            // var myChart_1 = echarts.init(dom_1, null, {renderer: 'svg'});
            var dom_2 = document.getElementById("max_corr" + i);
            var myChart_2 = echarts.init(dom_2, null, {renderer: 'svg'});
            var dom_3 = document.getElementById("rongyu_" + i);
            var myChart_3 = echarts.init(dom_3, null, {renderer: 'svg'});
            var option_0 = {
                grid:{
                    // height:'100%',
                    width:'100%'
                },
                tooltip:{
                    formatter:function(params){
                        // console.log(params)
                        return params.seriesName+": "+params.data
                    }
                },
                yAxis: {
                    type: 'category',
                    axisLabel: {
                        show: false,
                    },
                    axisLine: {
                        show: false,
                    },
                    axisTick: {
                        show: false,
                    },
                    splitLine: {
                        show: false,
                    },
                },
                xAxis: {
                    type: 'value',
                    axisLabel: {
                        show: false,
                    },
                    axisLine: {
                        show: false,
                    },
                    axisTick: {
                        show: false,
                    },
                    splitLine: {
                        show: false,
                    },
                    max:1
                },
                series: [{
                    name:"Max_Corr",
                    data: [zuida[i]],
                    type: 'bar',
                    itemStyle:{
                        color:'#f47a75'
                    }
                }]
            };
            var option_1 = {
                grid:{
                    // height:'100%',
                    width:'100%'
                },
                tooltip:{
                    formatter:function(params){
                        // console.log(params)
                        return params.seriesName+": "+params.data
                    }
                },
                yAxis: {
                    type: 'category',
                    axisLabel: {
                        show: false,
                    },
                    axisLine: {
                        show: false,
                    },
                    axisTick: {
                        show: false,
                    },
                    splitLine: {
                        show: false,
                    },
                },
                xAxis: {
                    type: 'value',
                    axisLabel: {
                        show: false,
                    },
                    axisLine: {
                        show: false,
                    },
                    axisTick: {
                        show: false,
                    },
                    splitLine: {
                        show: false,
                    },
                    max:1
                },
                series: [{
                    name:'Redundancy',
                    data: [rongyu[i]],
                    type: 'bar',
                    itemStyle:{
                        color:'#0780cf'
                    }
                }]
            };
            var option_2 = {
                tooltip: {
                    trigger: 'item'
                },
                series: [
                    {
                        name: 'Wall_Tem',
                        type: 'pie',
                        radius: ['70%', '100%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            color:'gray',
                            borderRadius: 10,
                            borderColor: '#fff',
                            borderWidth: 2,
                            opacity:0.2
                        },
                        label: {
                            show: false,
                            position: 'center'
                        },
                        // emphasis: {
                        //     label: {
                        //         show: true,
                        //         fontSize: '40',
                        //         fontWeight: 'bold'
                        //     }
                        // },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: 1, name: '搜索引擎',itemStyle:{color:'red',opacity:0.8}},
                            {value: 1, name: '直接访问'},
                            {value: 1, name: '视频广告',itemStyle:{color:'red',opacity:0.8}},
                            {value: 1, name: '直接访问'},
                            {value: 1, name: '邮件营销'},
                            {value: 1, name: '联盟广告'},
                            {value: 1, name: '视频广告'},
                            {value: 1, name: '视频广告'},
                        ]
                    },
                ]
            };
            var option_3 = {
                tooltip: {
                    trigger: 'item'
                },
                series: [
                    {
                        name: 'Factors',
                        type: 'pie',
                        radius: ['70%', '100%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            color:'gray',
                            borderRadius: 10,
                            borderColor: '#fff',
                            borderWidth: 2,
                            opacity:0.2
                        },
                        label: {
                            show: false,
                            position: 'center'
                        },
                        // emphasis: {
                        //     label: {
                        //         show: true,
                        //         fontSize: '40',
                        //         fontWeight: 'bold'
                        //     }
                        // },
                        labelLine: {
                            show: false
                        },
                        data: [
                            {value: 1, name: '搜索引擎',itemStyle:{color:'red',opacity:0.8}},
                            {value: 1, name: '直接访问'},
                            {value: 1, name: '视频广告',itemStyle:{color:'red',opacity:0.8}},
                            {value: 1, name: '直接访问'},
                            {value: 1, name: '邮件营销'},
                            {value: 1, name: '联盟广告'},
                            {value: 1, name: '视频广告'},
                            {value: 1, name: '视频广告'},
                        ]
                    },
                ]
            };
            myChart_2.setOption(option_0)
            myChart_3.setOption(option_1)
            if (param.id.indexOf('input_cluster')>-1){
                var data1=[]
                var data2=[]
                for (var j=0;j<8;j++){
                    var shuzi2=parseInt(biwen_name_jilu[j].substr(biwen_name_jilu[j].length-1,1));
                    // console.log("shuzi2",shuzi2)
                    // for(var k=0;k<jilu_num.length;k++){
                    //     if(biwen_name_jilu.indexOf(jilu_num[k])!=-1){
                    //
                    //     }
                    // }
                    if(zuheX.indexOf(j)!=-1){
                        for(var k=0;k<jilu_num.length;k++){
                            console.log(var1,var1[j])
                            // console.log(biwen_name_jilu[j],jilu_num[k][0],biwen_name_jilu[j].indexOf(jilu_num[k][0]))
                            if(biwen_name_jilu[j].indexOf(jilu_num[k][0])!=-1){
                                data1.push({value: var1[j], name: biwen_name_jilu[j],itemStyle:{color:'red',opacity:0.8}})
                            }
                        }
                        // data1.push({value: 1, name: biwen_name_jilu[j],itemStyle:{color:'red',opacity:0.8}})
                    }
                    else{
                        for(var k=0;k<jilu_num.length;k++){
                            if(biwen_name_jilu[j].indexOf(jilu_num[k][0])!=-1){
                                data1.push({value: var1[j], name: biwen_name_jilu[j]})
                            }
                        }
                        // data1.push({value: 1, name: biwen_name_jilu[j]})
                    }
                }
                console.log("data1",data1)
                for (var j=0;j<34;j++){
                    if(zuheY[i].indexOf(j)!=-1){
                        data2.push({value: var2[j], name: qita_name_jilu[j],itemStyle:{color:'red',opacity:0.8}})
                    }
                    else{
                        data2.push({value: var2[j], name: qita_name_jilu[j]})
                    }
                }
                option_2.series[0].data=data1;
                option_3.series[0].data=data2;
                myChart_0.setOption(option_2)
                myChart_1.setOption(option_3)
            }
            else {
                var data1=[]
                var data2=[]
                for (var j=0;j<8;j++){
                    var shuzi2=parseInt(biwen_name_jilu[j].substr(biwen_name_jilu[j].length-1,1));
                    // console.log("shuzi2",shuzi2)
                    // for(var k=0;k<jilu_num.length;k++){
                    //     if(biwen_name_jilu.indexOf(jilu_num[k])!=-1){
                    //
                    //     }
                    // }
                    if(zuheX[i].indexOf(j)!=-1){
                        for(var k=0;k<jilu_num.length;k++){
                            console.log(biwen_name_jilu[j],jilu_num[k][0],biwen_name_jilu[j].indexOf(jilu_num[k][0]))
                            if(biwen_name_jilu[j].indexOf(jilu_num[k][0])!=-1){
                                data1.push({value: var1[j], name: biwen_name_jilu[j],itemStyle:{color:'red',opacity:0.8}})
                            }
                        }
                        // data1.push({value: 1, name: biwen_name_jilu[j],itemStyle:{color:'red',opacity:0.8}})
                    }
                    else{
                        for(var k=0;k<jilu_num.length;k++){
                            if(biwen_name_jilu[j].indexOf(jilu_num[k][0])!=-1){
                                data1.push({value: var1[j], name: biwen_name_jilu[j]})
                            }
                        }
                        // data1.push({value: 1, name: biwen_name_jilu[j]})
                    }
                }
                console.log("data1",data1)
                for (var j=0;j<34;j++){
                    if(zuheY.indexOf(j)!=-1){
                        data2.push({value: var2[j], name: qita_name_jilu[j],itemStyle:{color:'red',opacity:0.8}})
                    }
                    else{
                        data2.push({value: var2[j], name: qita_name_jilu[j]})
                    }
                }
                option_2.series[0].data=data1;
                option_3.series[0].data=data2;
                myChart_0.setOption(option_2)
                myChart_1.setOption(option_3)
            }
        }
        // console.log(param.id)
    }
    function jizhong2(param){
        var arr=param.id.split('_');
        console.log("arr",arr)
        var shuzi=parseInt(name_jilu.replace(/[^0-9]/ig,""));
        var dd=[]
        if (name_jilu.indexOf('input_cluster')>-1){
            dd.push({
                "start":shuzi,
                "end":parseInt(line_jilu[parseInt(arr[1])])
            })
        }
        else {
            dd.push({
                "start":parseInt(line_jilu[parseInt(arr[1])]),
                "end":shuzi
            })
        }
        clicked(dd[0])
        // console.log(param.id)
        // console.log(arr)
    }
    function over2(param){
        var arr=param.id.split('_');
        console.log("arr",arr)
        var shuzi=parseInt(name_jilu.replace(/[^0-9]/ig,""));
        var dd=[]
        if (name_jilu.indexOf('input_cluster')>-1){
            dd.push({
                "start":shuzi,
                "end":parseInt(line_jilu[parseInt(arr[1])])
            })
        }
        else {
            dd.push({
                "start":parseInt(line_jilu[parseInt(arr[1])]),
                "end":shuzi
            })
        }
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var sel = $('#param-Relevance  option:selected').val();
        // var lines=suoyou_links;
        // var lines2=[]
        // for (var i=0;i<lines.length;i++){
        //     if (lines[i].value<=max_t && lines[i].value>=min_t){
        //         lines2.push(lines[i])
        //     }
        // }
        $('#'+ name_jilu).siblings().animate({"opacity":"0.2"},0);
        $('#'+ 'output_cluster'+line_jilu[parseInt(arr[1])]).siblings().animate({"opacity":"0.2"},0);
        // shuzi=parseInt(name.replace(/[^0-9]/ig,""));
        // console.log("shuzu",shuzi)
        // shuzi=parseInt(name.substr(name.length-1,name.length))
        // console.log(shuzi)
        var lines=suoyou_links;
        var lines2=[];
        // console.log(suoyou_links)
        // console.log(lines,lines.length)
        // console.log("id",param.id.indexOf('input_cluster'))
        // for (var i=0;i<lines.length;i++){
        //     if (param.id.indexOf('input_cluster')>-1){
        //         if (lines[i].start==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
        //             lines2.push(lines[i])
        //         }
        //     }
        //     else {
        //         if (lines[i].end==shuzi && lines[i].value<=max_t && lines[i].value>=min_t){
        //             lines2.push(lines[i])
        //         }
        //     }
        // }
        if (sel=='Average'){
            for (var i=0;i<lines.length;i++){
                if (lines[i].start==dd[0].start && lines[i].end==dd[0].end && lines[i].value2<=max_t && lines[i].value2>=min_t){
                    lines2.push(lines[i])
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value2);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value2));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
        }
        else {
            for (var i=0;i<lines.length;i++){
                if (lines[i].start==dd[0].start && lines[i].end==dd[0].end && lines[i].value2<=max_t && lines[i].value2>=min_t){
                    lines2.push(lines[i])
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
        }
    }
    function out2(param){
        var arr=param.id.split('_');
        console.log("arr",arr)
        var shuzi=parseInt(name_jilu.replace(/[^0-9]/ig,""));
        var dd=[]
        if (name_jilu.indexOf('input_cluster')>-1){
            dd.push({
                "start":shuzi,
                "end":parseInt(line_jilu[parseInt(arr[1])])
            })
        }
        else {
            dd.push({
                "start":parseInt(line_jilu[parseInt(arr[1])]),
                "end":shuzi
            })
        }
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var sel = $('#param-Relevance  option:selected').val();
        var lines=suoyou_links;
        var lines2=[]
        // 添加划过事件 恢复兄弟节点的透明度
        $('#'+ name_jilu).siblings().animate({"opacity":"1"},0);
        $('#Cluster_left').children().animate({"opacity":"1"},0);
        $('#Cluster_right').children().animate({"opacity":"1"},0);
        if (sel=='Average'){
            for (var i=0;i<lines.length;i++){
                if (lines[i].value2<=max_t && lines[i].value2>=min_t){
                    lines2.push(lines[i])
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value2);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value2));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
                .on("mouseover",overed)
                .on("mouseout",outed)
                .on("click",clicked)
        }
        else{
            for (var i=0;i<lines.length;i++){
                if (lines[i].value<=max_t && lines[i].value>=min_t){
                    lines2.push(lines[i])
                }
            }
            d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
            lineGraph
                // .append("g")
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    // console.log(d,i)
                    return createLink(d)
                })
                // .attr("stroke","#ccc")
                // .attr("stroke-width",2)
                .attr("stroke",function (d){
                    return color(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value));
                })
                // .attr("fill",function (d){
                //     return color(d.value);
                // })
                .style("opacity", 0.7)
                .on("mouseover",overed)
                .on("mouseout",outed)
                .on("click",clicked)
        }
        // d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
        // lineGraph
        //     // .append("g")
        //     .selectAll('path')
        //     .data(lines2)
        //     .enter()
        //     .append("path")
        //     .attr("d",function (d,i){
        //         console.log(d,i)
        //         return createLink(d)
        //     })
        //     // .attr("stroke","#ccc")
        //     // .attr("stroke-width",2)
        //     .attr("stroke",function (d){
        //         return color(d.value);
        //     })
        //     .attr("fill",'none')
        //     .attr("stroke-width",function (d){
        //         return linear(Math.abs(d.value));
        //     })
        //     // .attr("fill",function (d){
        //     //     return color(d.value);
        //     // })
        //     .style("opacity", 0.7)
        //     .on("mouseover",overed)
        //     .on("mouseout",outed)
    }

    function mousemove(d, i) {
        // console.log(d,i)
        // console.log(d3v3.mouse(this))
        tooltips.style("opacity", 1)
            .html("1asdas")
            .style("left", (d3v3.mouse(this)[0]+50) + "px")
            .style("top", (d3v3.mouse(this)[1]) + "px")
    }
    function Rel_Change(sel){
        console.log("sel",sel)
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var lines=suoyou_links;
        var lines2=[]
        // for (var i=0;i<lines.length;i++){
        //     if (lines[i].value<=max_t && lines[i].value>=min_t){
        //         lines2.push(lines[i])
        //     }
        // }
        d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
        if(sel=='Average'){
            for (var i=0;i<lines.length;i++){
                if (lines[i].value2<=max_t && lines[i].value2>=min_t){
                    lines2.push(lines[i])
                }
            }
            lineGraph
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    console.log(d,i)
                    return createLink(d)
                })
                .attr("stroke",function (d){
                    return color(d.value2);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value2));
                })
                .style("opacity", 0.7)
                .on("mouseover",overed)
                .on("mouseout",outed)
                .on("click",clicked)
        }
        else if(sel=='Maximum'){
            for (var i=0;i<lines.length;i++){
                if (lines[i].value<=max_t && lines[i].value>=min_t){
                    lines2.push(lines[i])
                }
            }
            lineGraph
                .selectAll('path')
                .data(lines2)
                .enter()
                .append("path")
                .attr("d",function (d,i){
                    console.log(d,i)
                    return createLink(d)
                })
                .attr("stroke",function (d){
                    return color(d.value);
                })
                .attr("fill",'none')
                .attr("stroke-width",function (d){
                    return linear(Math.abs(d.value));
                })
                .style("opacity", 0.7)
                .on("mouseover",overed)
                .on("mouseout",outed)
                .on("click",clicked)
        }
    }
    $('#param-maxthreshold,#param-minthreshold').on('mouseup',function() {
        var max_t = $('#param-maxthreshold').val();
        var min_t = $('#param-minthreshold').val();
        var sel = $('#param-Relevance  option:selected').val();
        var all_lines1=all_link1;
        var lines1=[];
        for (var i=0;i<all_lines1.length;i++){
            // console.log(all_lines1[i])
            if (Math.abs(all_lines1[i].value)<=max_t && Math.abs(all_lines1[i].value)>=min_t){
                lines1.push(all_lines1[i])
            }
        }
        d3v3.select("#linkss1").select("svg").select("g").selectAll("path").remove()
        console.log("lines1",lines1)
        lineGraph1
            .selectAll('path')
            .data(lines1)
            .enter()
            .append("path")
            .attr("d",function (d,i){
                console.log(d,i)
                return createLink(d)
            })
            .attr("stroke",function (d){
                return color2(d.value);
            })
            .attr("fill",'none')
            .attr("stroke-width",function (d){
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 1)
            .on("mouseover",overed2)
            .on("mouseout",outed2)

        var all_lines2=all_link2;
        var lines2=[];
        for (var i=0;i<all_lines2.length;i++){
            if (Math.abs(all_lines2[i].value)<=max_t && Math.abs(all_lines2[i].value)>=min_t){
                lines2.push(all_lines2[i])
            }
        }
        d3v3.select("#linkss3").select("svg").select("g").selectAll("path").remove()
        lineGraph2
            .selectAll('path')
            .data(lines2)
            .enter()
            .append("path")
            .attr("d",function (d,i){
                console.log(d,i)
                return createLink(d)
            })
            .attr("stroke",function (d){
                return color2(d.value);
            })
            .attr("fill",'none')
            .attr("stroke-width",function (d){
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 0.7)

        var all_lines3=all_link3;
        var lines3=[];
        for (var i=0;i<all_lines3.length;i++){
            if (Math.abs(all_lines3[i].value)<=max_t && Math.abs(all_lines3[i].value)>=min_t){
                lines3.push(all_lines3[i])
            }
        }
        d3v3.select("#linkss4").select("svg").select("g").selectAll("path").remove()
        lineGraph3
            .selectAll('path')
            .data(lines3)
            .enter()
            .append("path")
            .attr("d",function (d,i){
                console.log(d,i)
                return createLink(d)
            })
            .attr("stroke",function (d){
                return color2(d.value);
            })
            .attr("fill",'none')
            .attr("stroke-width",function (d){
                return linear2(Math.abs(d.value));
            })
            .style("opacity", 1)
            .on("mouseover",overed3)
            .on("mouseout",outed3)
            // .on("click",clicked)
        // var lines2=[]
        // var lines=suoyou_links;
        // if(sel=='Average'){
        //     for (var i=0;i<lines.length;i++){
        //         if (lines[i].value2<=max_t && lines[i].value2>=min_t){
        //             lines2.push(lines[i])
        //         }
        //     }
        //     d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
        //     lineGraph
        //         .selectAll('path')
        //         .data(lines2)
        //         .enter()
        //         .append("path")
        //         .attr("d",function (d,i){
        //             console.log(d,i)
        //             return createLink(d)
        //         })
        //         .attr("stroke",function (d){
        //             return color(d.value2);
        //         })
        //         .attr("fill",'none')
        //         .attr("stroke-width",function (d){
        //             return linear(Math.abs(d.value2));
        //         })
        //         .style("opacity", 0.7)
        //         .on("mouseover",overed)
        //         .on("mouseout",outed)
        //         .on("click",clicked)
        // }
        // else{
        //     for (var i=0;i<lines.length;i++){
        //         if (lines[i].value<=max_t && lines[i].value>=min_t){
        //             lines2.push(lines[i])
        //         }
        //     }
        //     d3v3.select("#links").select("svg").select("g").selectAll("path").remove()
        //     lineGraph
        //         .selectAll('path')
        //         .data(lines2)
        //         .enter()
        //         .append("path")
        //         .attr("d",function (d,i){
        //             console.log(d,i)
        //             return createLink(d)
        //         })
        //         .attr("stroke",function (d){
        //             return color(d.value);
        //         })
        //         .attr("fill",'none')
        //         .attr("stroke-width",function (d){
        //             return linear(Math.abs(d.value));
        //         })
        //         .style("opacity", 0.7)
        //         .on("mouseover",overed)
        //         .on("mouseout",outed)
        //         .on("click",clicked)
        // }
    });

    // 当点击 连线时 生成对应的雷达图和典型相关性系数
    function clicked(d,i){
        console.log("666",d,i)
        // 壁温参数下标
        zuheX = zuhe1[d.start];
        // 影响参数下标
        zuheY = zuhe2[d.end];
        var jieshi;
        var ydata = [];
        var jy;
        var leida_data = [];
        var xishu_x,xishu_y;
        var xishu_ser=[];
        var zonghe1,zonghe2;
        var z_series=[];
        var input_list,output_list;
        var colorr=['#0780cf','#765005','#fa6d1d','#0e2c82','#b6b51f'];
        $.ajax({
            type: "POST",
            url: "CCA2",
            dataType: "json",
            async: false,
            data: {"zuheX": JSON.stringify(zuheX), "zuheY": JSON.stringify(zuheY)},    // 传递列表
            success: function (data) {
                console.log(data);
                jieshi = data['jieshi'];
                jy = data['jy'];
                xishu_x = data['a'];
                xishu_y = data['b'];
                input_list = data['n1'];
                output_list = data['n2'];
            }
        });
        for(var j=1;j<jieshi[0].length+1;j++){
            ydata.push(j)
        }
        for(var i=0;i<jieshi.length;i++){
            option4.series[i].data=jieshi[i]
        }
        for(var i=0;i<jy.length;i++){
            leida_data.push({
                value: jy[i],
                name: (i+1)
            })
        }
        for(var i = 0;i < xishu_x.length; i++){
            xishu_ser.push({
                data: xishu_x[i],
                type: 'line',
                name: (i+1),
                xAxisIndex:0,
                yAxisIndex:0,
                itemStyle:{
                    color:colorr[i]
                }
            })
        }
        for(var i=0;i<xishu_y.length;i++){
            xishu_ser.push({
                data: xishu_y[i],
                type: 'line',
                name: (i+1),
                xAxisIndex:1,
                yAxisIndex:1,
                itemStyle:{
                    color:colorr[i]
                }
            })
        }
        xishu_ser.push({
            type: 'radar',
            data: leida_data,
        })
        option4.yAxis[0].data=ydata;
        option4.yAxis[1].data=ydata
        option4.yAxis[2].data=ydata
        console.log(option4)
        // 生成 解释率 可视化图
        myChart4.setOption(option4,true);

        //xishu_ser 表示option5的雷达图的值和相关性系数的值
        option5.series = xishu_ser;
        option5.xAxis[0].data = input_list;
        option5.xAxis[1].data = output_list;
        myChart5.setOption(option5,true);
    }

    function overed2(d, i) {
        console.log(d,i)
        // console.log("this",this)
        var Relevance_sel  = $('#param-Relevance  option:selected').val();
        var Relevance;
        if(Relevance_sel=='1'){
            Relevance='Canonical Cross-Loadings';
        }
        else if(Relevance_sel=='2'){
            Relevance='Canonical Loadings';
        }
        else if(Relevance_sel=='3'){
            Relevance='Canonical Weights';
        }
        lineGraph1.selectAll("path").style("opacity", 0.1);
        // alert(this)
        d3v3.select(this).style("opacity", 1);
        $('#tooltips').show()
        // var relevance_sel = $('#param-Relevance  option:selected').val();
        // $('#'+ 'input_cluster'+d.start).siblings().animate({"opacity":"0.2"},0);
        // $('#'+ 'output_cluster'+d.end).siblings().animate({"opacity":"0.2"},0);

        tooltips.style("opacity", 1)
            .html(Relevance+': '+d.value.toFixed(2))
            .style("left", (d3v3.mouse(this)[0]+200) + "px")
            .style("top", (d3v3.mouse(this)[1]+150) + "px")
    }
    function outed2() {
        // console.log(d,i)
        // console.log(d,i)
        // alert(2)
        lineGraph1.selectAll("path").style("opacity", 1);
        $('#tooltips').hide()
        tooltips.style("opacity", 0)
    }

    function overed3(d, i) {
        // console.log(d,i)
        var Relevance_sel  = $('#param-Relevance  option:selected').val();
        var Relevance;
        if(Relevance_sel=='1'){
            Relevance='Canonical Cross-Loadings';
        }
        else if(Relevance_sel=='2'){
            Relevance='Canonical Loadings';
        }
        else if(Relevance_sel=='3'){
            Relevance='Canonical Weights';
        }
        lineGraph3.selectAll("path").style("opacity", 0.1);
        d3v3.select(this).style("opacity", 1);
        $('#tooltips').show()
        // var relevance_sel = $('#param-Relevance  option:selected').val();
        // $('#'+ 'input_cluster'+d.start).siblings().animate({"opacity":"0.2"},0);
        // $('#'+ 'output_cluster'+d.end).siblings().animate({"opacity":"0.2"},0);

        tooltips.style("opacity", 1)
            .html(Relevance+': '+d.value.toFixed(2))
            .style("left", (d3v3.mouse(this)[0]+550) + "px")
            .style("top", (d3v3.mouse(this)[1]+150) + "px")
    }
    function outed3(d, i) {
        // console.log(d,i)
        lineGraph3.selectAll("path").style("opacity", 1);
        $('#tooltips').hide()
        tooltips.style("opacity", 0)
    }

    // 当鼠标划过 连线时 进行其他线段的隐藏
    function overed(d, i) {
        console.log(d,i)
        console.log("this",this)
        lineGraph.selectAll("path").style("opacity", 0.1);
        d3v3.select(this).style("opacity", 0.7);
        $('#tooltips').show()
        var relevance_sel = $('#param-Relevance  option:selected').val();
        $('#'+ 'input_cluster'+d.start).siblings().animate({"opacity":"0.2"},0);
        $('#'+ 'output_cluster'+d.end).siblings().animate({"opacity":"0.2"},0);
        if(relevance_sel=='Average'){
            tooltips.style("opacity", 1)
                .html("组合A："+cluster_left_list[d.start].join("、")+'<br>' +"组合B："+cluster_right_list[d.end].join("、")+'<br>' +"平均相关性："+d.value2)
                .style("left", (d3v3.mouse(this)[0]+50) + "px")
                .style("top", (d3v3.mouse(this)[1]) + "px")
        }
        else{
            tooltips.style("opacity", 1)
                .html("组合A："+cluster_left_list[d.start].join("、")+'<br>' +"组合B："+cluster_right_list[d.end].join("、")+'<br>' +"最大相关性："+d.value)
                .style("left", (d3v3.mouse(this)[0]+50) + "px")
                .style("top", (d3v3.mouse(this)[1]) + "px")
        }
    }

    // 当鼠标滑出时 恢复线段
    function outed(d, i) {
        // console.log(d,i)
        lineGraph.selectAll("path").style("opacity", 0.7);
        $('#tooltips').hide()
        tooltips.style("opacity", 0)
        $('#'+ 'input_cluster'+d.start).siblings().animate({"opacity":"1"},0);
        $('#'+ 'output_cluster'+d.end).siblings().animate({"opacity":"1"},0);
        // d3v3.select(this).style("opacity", 1);
        // d3.selectAll(d.incoming.map(d => d.path)).attr("stroke", colorin).raise();
        // d3.selectAll(d.incoming.map(([d]) => d.text)).attr("fill", colorin).attr("font-weight", "bold");
        // d3.selectAll(d.outgoing.map(d => d.path)).attr("stroke", colorout).raise();
        // d3.selectAll(d.outgoing.map(([, d]) => d.text)).attr("fill", colorout).attr("font-weight", "bold");
    }
    function fade(opacity) {
        // console.log(opacity);
        return function(d, i) {
            console.log(d,i)
            svg.selectAll("line").style("opacity", opacity);
            // var associated_links = lines.filter(function(d) {
            //     return d.source.index == i || d.target.index == i;
            // });
            // console.log(associated_links);
            // associated_links.each(function(dLink, iLink) {
            //     console.log(dLink,iLink);
            //     //unfade links and nodes connected to the current node
            //     d3.select(this).style("opacity", 1);
            //     console.log(d3.select(this))
            //     // d3.select(dLink.source).style("opacity", 1);
            //     // d3.select(dLink.target).style("opacity", 1);
            // });
            // //鼠标放上去显示文字
            // console.log(d3.mouse(this));
            // if (opacity==0)
            // {
            //     return tooltip.style('visibility', 'visible').text(d.name).style('top', (event.pageY-10)+'px').style('left',(event.pageX+10)+'px');
            // }
            // else if (opacity==1)
            // {
            //     return tooltip.style('top', (event.pageY-10)+'px').style('left',(event.pageX+10)+'px')
            // }
        };
    }

    // 执行单击按钮生成 对应的壁温数据可视化图
    var xuanquidlist = []
    var xuanquid
    myChart2.on('click',function (params) {
        // console.log('点击了', params)
        xuanquid = params.dataIndex
        xuanquidlist.push(xuanquid)
        console.log("xuanquid", xuanquid)
        console.log("xuanquidlist", xuanquidlist)
        // 获取所选取的ID文件
        var dataset = document.getElementsByName('save_file_chec');
        // 表示读取的总的文件集 即:biwen_new_data.csv
        var wenjian = $('#param-dataset  option:selected').val();
        var position = $('#param-position  option:selected').val();
        var value = new Array();
        var flag = 0;
        // 将选择的文件集添加到 value列表中
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked){
                value.push(dataset[i].value);
                flag = 1;                     // 表示当有文件被勾选时
            }
        }
        console.log(flag)
        if(flag == 1){
            // value1 表示当前所勾选的文件
            var value1 = value[0]
            console.log("value1",value1)
            // 判断字符串是否包含某个字符 并修改对应的position值
            if (value1.search("低温过热器上部屏")!=-1){
                position = "低温过热器上部屏出口段后墙横向"
            }
            else if (value1.search("高温过热器")!=-1){
                position = "高温过热器出口段横向"
            }
            else if (value1.search("低温过热器下部屏")!=-1){
                position = "低温过热器下部屏出口段后墙横向"
            }
            else if (value1.search("后墙隔墙")!=-1){
                position = "后墙隔墙出口段"
            }
            else if (value1.search("水冷左垂")!=-1){
                position = "水冷壁左侧墙垂直"
            }
            else if (value1.search("水冷右垂")!=-1){
                position = "水冷壁右侧墙垂直"
            }
            else if (value1.search("水冷前垂")!=-1){
                position = "水冷壁前墙垂直"
            }
            else if (value1.search("水冷后垂")!=-1){
                position = "水冷壁后墙垂直"
            }
            else if (value1.search("水冷左螺")!=-1){
                position = "水冷壁左侧墙螺旋"
            }
            else if (value1.search("水冷右螺")!=-1){
                position = "水冷壁右侧墙螺旋"
            }
            else if (value1.search("水冷前螺")!=-1){
                position = "水冷壁前墙螺旋"
            }
            else if (value1.search("水冷后螺")!=-1){
                position = "水冷壁后墙螺旋"
            }
        }

        // 执行ajax 触发点击二维图某点 返回数据事件
        $.ajax({
            type: "POST",
            url: "xuanqu3",
            dataType: "json",
            async: false,
            data: {"index": xuanquid, "choose_id": position, "wenjian": wenjian},
            success: function (data) {

                var option = {
                    title:{
                        text:data['timeb']+"——"+data['timeo'],
                        x:"center",
                        // y:"3px",
                        textStyle:{
                            fontSize:12
                        }
                    },
                    grid:{
                        left: '7%',
                        right: '10%',
                        bottom: '3%',
                        top:'15%',
                        // width:'85%',
                        // height:'80%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'category',
                        data: data['time']
                    },
                    dataZoom:[
                            {
                                type: 'inside', // 使鼠标在图表中时滚轮可用
                                xAxisIndex:[0],
                            },
                    ],
                    tooltip:{
                        formatter:function (params){
                            // console.log(params)
                            return [
                                // '类别名称: ' + param.seriesName,
                                '时间: ' + params.name,
                                '数值: ' + params.data.toFixed(2),
                            ].join('<br/>')
                        }
                    },
                    yAxis: {
                        type: 'value',
                        axisLine:{
                                show:true
                        },
                        max: function (value) {
                            return parseInt(value.max+1);
                        },
                        min: function (value) {
                            return parseInt(value.min-1);
                        }
                    },
                    // legend:legend,
                    series:{
                        data: data['data'],
                        type: 'line',
                        name:data['mingzi']
                    }
                };
                console.log("option",option)
                myChart3.setOption(option)
            }
        })
        $('#average2').show()
        $('#container3').show()
    })

    // 单个壁温测点的 重采样
    $('#param-interval2').on('mouseup',function() {       //鼠标抬起事件(获取最后一个值)
        var lastvalue = $('#param-interval2').val();
        var position = $('#param-position  option:selected').val();
        var wenjian = $('#param-dataset  option:selected').val();
        alert(lastvalue)

        // 获取所勾选的ID对应的文件
        var dataset = document.getElementsByName('save_file_chec');
        var value = new Array();
        var flag = 0;
        // 将选择的文件集添加到 value列表中
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked){
                value.push(dataset[i].value);
                flag = 1;                       // 表示当有文件被勾选时
            }
        }

        console.log("flag",flag)
        if(flag == 1){
            // value1 表示当前所勾选的文件
            var value1 = value[0]
            console.log("value1",value1)
            // 判断字符串是否包含某个字符 并修改对应的position值
            if (value1.search("低温过热器上部屏")!=-1){
                position = "低温过热器上部屏出口段后墙横向"
            }
            else if (value1.search("高温过热器")!=-1){
                position = "高温过热器出口段横向"
            }
            else if (value1.search("低温过热器下部屏")!=-1){
                position = "低温过热器下部屏出口段后墙横向"
            }
            else if (value1.search("后墙隔墙")!=-1){
                position = "后墙隔墙出口段"
            }
            else if (value1.search("水冷左垂")!=-1){
                position = "水冷壁左侧墙垂直"
            }
            else if (value1.search("水冷右垂")!=-1){
                position = "水冷壁右侧墙垂直"
            }
            else if (value1.search("水冷前垂")!=-1){
                position = "水冷壁前墙垂直"
            }
            else if (value1.search("水冷后垂")!=-1){
                position = "水冷壁后墙垂直"
            }
            else if (value1.search("水冷左螺")!=-1){
                position = "水冷壁左侧墙螺旋"
            }
            else if (value1.search("水冷右螺")!=-1){
                position = "水冷壁右侧墙螺旋"
            }
            else if (value1.search("水冷前螺")!=-1){
                position = "水冷壁前墙螺旋"
            }
            else if (value1.search("水冷后螺")!=-1){
                position = "水冷壁后墙螺旋"
            }
        }

        $.ajax({
            type: "POST",
            url: "xuanqu4",
            dataType: "json",
            async: false,
            data: {"index": xuanquid, "valuerange": lastvalue, "choose_id": position, "wenjian": wenjian},
            success: function (data) {
                console.log("dan tuola data",data)
                option3.xAxis.data = data['time'];
                option3.series[0].data = data['datajunfen'];
                option3.title.text = data['timeb'] + "——" + data['timeo']
                myChart3.setOption(option3,true)
            }
        })

    })


    // 壁温数据刷选时间 返回平均值
    myChart2.on('brushSelected', function (params) {

        console.log('brushSelected',params)
        console.log('me',params.batch[0].selected[0].dataIndex)
        indexKuang = params.batch[0].selected[0].dataIndex
        if(indexKuang.length!=0) {
            var position = $('#param-position  option:selected').val();
            var wenjian = $('#param-dataset  option:selected').val();
            console.log(indexKuang)

            // 获取所勾选的ID对应的文件
            var dataset = document.getElementsByName('save_file_chec');
            var value = new Array();
            var flag = 0;
            // 将选择的文件集添加到 value列表中
            for(var i = 0; i < dataset.length; i++){
                if(dataset[i].checked){
                    value.push(dataset[i].value);
                    flag = 1;                // 表示有勾选的文件按钮
                }
            }

            console.log(flag)
            if(flag == 1){
                // value1 表示当前所勾选的文件
                var value1 = value[0]
                console.log("value1",value1)
                // 判断字符串是否包含某个字符 并修改对应的position值
                if (value1.search("低温过热器上部屏")!=-1){
                    position = "低温过热器上部屏出口段后墙横向"
                }
                else if (value1.search("高温过热器")!=-1){
                    position = "高温过热器出口段横向"
                }
                else if (value1.search("低温过热器下部屏")!=-1){
                    position = "低温过热器下部屏出口段后墙横向"
                }
                else if (value1.search("后墙隔墙")!=-1){
                    position = "后墙隔墙出口段"
                }
                else if (value1.search("水冷左垂")!=-1){
                    position = "水冷壁左侧墙垂直"
                }
                else if (value1.search("水冷右垂")!=-1){
                    position = "水冷壁右侧墙垂直"
                }
                else if (value1.search("水冷前垂")!=-1){
                    position = "水冷壁前墙垂直"
                }
                else if (value1.search("水冷后垂")!=-1){
                    position = "水冷壁后墙垂直"
                }
                else if (value1.search("水冷左螺")!=-1){
                    position = "水冷壁左侧墙螺旋"
                }
                else if (value1.search("水冷右螺")!=-1){
                    position = "水冷壁右侧墙螺旋"
                }
                else if (value1.search("水冷前螺")!=-1){
                    position = "水冷壁前墙螺旋"
                }
                else if (value1.search("水冷后螺")!=-1){
                    position = "水冷壁后墙螺旋"
                }
            }

            // 执行ajax 实现二维图的刷选 事件
            $.ajax({
                type: "POST",
                url: "xuanqu",
                dataType: "json",
                async: false,
                data: {"index": JSON.stringify(indexKuang), "choose_id": position, "wenjian": wenjian},    // 传递列表
                success: function (data) {
                    console.log(data)
                    option3.xAxis.data = data['time'];
                    option3.series[0].data = data['datajun'];
                    option3.title.text = data['timeb'] + "——" + data['timeo']
                    // 画选取的点的图
                    // optionkuang = {
                    //     xAxis: {
                    //         type: 'category',
                    //         data: data['time']
                    //     },
                    //     yAxis: {
                    //         type: 'value'
                    //     },
                    //     series: [{
                    //         data: data['datajun'],
                    //         type: 'line'
                    //     }]
                    // };
                    console.log("1",option3)
                    myChart3.setOption(option3,true)
                    console.log("1",option3)
                }
            });
            $('#average').show()
            $('#container3').show()
        }
    });

    $('#param-interval').on('mouseup',function() {       //鼠标抬起事件(获取最后一个值)
        var lastvalue = $('#param-interval').val();
        var position = $('#param-position  option:selected').val();
        var wenjian = $('#param-dataset  option:selected').val();
        alert(lastvalue)

        // 获取所勾选的ID对应的文件
        var dataset = document.getElementsByName('save_file_chec');
        var value = new Array();
        var flag = 0;
        // 将选择的文件集添加到 value列表中
        for(var i = 0; i < dataset.length; i++){
            if(dataset[i].checked){
                value.push(dataset[i].value);
                flag = 1;                       // 表示当有文件被勾选时
            }
        }

        console.log("flag",flag)
        if(flag == 1){
            // value1 表示当前所勾选的文件
            var value1 = value[0]
            console.log("value1",value1)
            // 判断字符串是否包含某个字符 并修改对应的position值
            if (value1.search("低温过热器上部屏")!=-1){
                position = "低温过热器上部屏出口段后墙横向"
            }
            else if (value1.search("高温过热器")!=-1){
                position = "高温过热器出口段横向"
            }
            else if (value1.search("低温过热器下部屏")!=-1){
                position = "低温过热器下部屏出口段后墙横向"
            }
            else if (value1.search("后墙隔墙")!=-1){
                position = "后墙隔墙出口段"
            }
            else if (value1.search("水冷左垂")!=-1){
                position = "水冷壁左侧墙垂直"
            }
            else if (value1.search("水冷右垂")!=-1){
                position = "水冷壁右侧墙垂直"
            }
            else if (value1.search("水冷前垂")!=-1){
                position = "水冷壁前墙垂直"
            }
            else if (value1.search("水冷后垂")!=-1){
                position = "水冷壁后墙垂直"
            }
            else if (value1.search("水冷左螺")!=-1){
                position = "水冷壁左侧墙螺旋"
            }
            else if (value1.search("水冷右螺")!=-1){
                position = "水冷壁右侧墙螺旋"
            }
            else if (value1.search("水冷前螺")!=-1){
                position = "水冷壁前墙螺旋"
            }
            else if (value1.search("水冷后螺")!=-1){
                position = "水冷壁后墙螺旋"
            }
        }

        // 执行二维图时间框的拖拉 并返回平均数据
        $.ajax({
            type: "POST",
            url: "xuanqu2",
            dataType: "json",
            async: false,
            data: {"index": JSON.stringify(indexKuang), "valuerange": lastvalue, "choose_id": position, "wenjian": wenjian},    // 传递列表
            success: function (data) {
                console.log("tuola data",data)
                option3.xAxis.data = data['time'];
                option3.series[0].data = data['datajunfen'];
                option3.title.text = data['timeb'] + "——" + data['timeo']
                // console.log("2",option3)
                myChart3.setOption(option3,true)
                // console.log("2",option3)
            }
        });
    });

    myChart2.on('brush', function (params) {
        console.log(params)
        $('#average').hide()
        $('#average2').hide()
        $('#container3').hide()
    });

    var listt=[];
    var listt_1=[];
    var listt2=[];
    var listt2_1=[];
    var fangda1;
    var fangda2;

    // 当点击一个圆点时 返回其他参数与其的皮尔逊相关性系数  myChart9 代表的是 下面的圆点
    myChart9.on('click',function(params){

        // 获取当前的是 多组对比还是单一对比状态
        var duiflag = $('#param-duibi option:selected').val()

        var xgx = []
        // 单一对比时
        if(duiflag == 1){
            xgx = zongti_xgx
        }
        if(duiflag == 2){
            xgx = duo_xgx
        }

        console.log("666",params)
        console.log(fangda1,fangda2)
        console.log("list",listt)
        if(listt.indexOf(params.componentIndex)!=-1)
        {
            // alert("ok")
            index=listt.indexOf(params.componentIndex)
            listt.splice(index, 1)
            console.log("listt_2",listt)
            listt_1.push(params.componentIndex)
        }
        else if(listt_1.indexOf(params.componentIndex)!=-1){
            index=listt_1.indexOf(params.componentIndex)
            listt_1.splice(index, 1)
            console.log("listt_2",listt)
        }
        else {
            // alert("yes")
            listt.push(params.componentIndex)
            console.log("listt_2",listt)
        }
        // console.log(fangda1[params.componentIndex])

        // 将所点击的按钮 变大 并将其index值置为1
        if(fangda1[params.componentIndex]==0 & listt.indexOf(params.componentIndex)!=-1){
            option9.series[params.componentIndex].symbolSize=10;
            option9.series[params.componentIndex].itemStyle.color='#0780cf';
            option9.series[params.componentIndex].itemStyle.opacity=1;
            fangda1[params.componentIndex]=1
        }
        else if(fangda1[params.componentIndex]==1 & listt_1.indexOf(params.componentIndex)!=-1){
            option9.series[params.componentIndex].symbolSize=10;
            option9.series[params.componentIndex].itemStyle.color='gray';
            option9.series[params.componentIndex].itemStyle.opacity=0.2;
            fangda1[params.componentIndex]=-1
        }
        else {
            option9.series[params.componentIndex].symbolSize=5;
            option9.series[params.componentIndex].itemStyle.color='#0780cf';
            option9.series[params.componentIndex].itemStyle.opacity=1;
            fangda1[params.componentIndex]=0
        }
        myChart9.setOption(option9)
        console.log(listt)
        // 存储的是 皮尔逊相关性系数
        var shuju = [];
        // 壁温参数只有8个
        for (var i = 0;i < 25; i++){
            // 所选参数与自己的相关性 则将其柱状图颜色变红
            if (i == params.componentIndex){
                shuju.push(
                    {
                        value: xgx[params.componentIndex][i],
                        itemStyle: {
                            color: '#a90000'
                        }
                    }
                )
            }
            // 所选参数与其他参数的相关性
            else{
                shuju.push(xgx[params.componentIndex][i])
            }
        }
        console.log("shuju",shuju)
        option7.series[0].data = shuju;
        myChart7.setOption(option7);
    });

    myChart10.on('click',function(params){

        // 获取当前的是 多组对比还是单一对比状态
        var duiflag = $('#param-duibi option:selected').val()

        var xgx = []
        // 单一对比时
        if(duiflag == 1){
            xgx = zongti_xgx
        }
        if(duiflag == 2){
            xgx = duo_xgx
        }

        console.log("params",params)
        if(listt2.indexOf(params.componentIndex)!=-1)
        {
            index=listt2.indexOf(params.componentIndex)
            listt2.splice(index, 1)
            listt2_1.push(params.componentIndex)
        }
        else if(listt2_1.indexOf(params.componentIndex)!=-1){
            index=listt2_1.indexOf(params.componentIndex)
            listt2_1.splice(index, 1)
            console.log("listt_2",listt)
        }
        else {
            listt2.push(params.componentIndex)
        }
        if(fangda2[params.componentIndex]==0 & listt2.indexOf(params.componentIndex)!=-1){
            option10.series[params.componentIndex].symbolSize=10;
            fangda2[params.componentIndex]=1;
            option10.series[params.componentIndex].itemStyle.color='#0780cf';
            option10.series[params.componentIndex].itemStyle.opacity=1;
        }
        else if(fangda2[params.componentIndex]==1 & listt2_1.indexOf(params.componentIndex)!=-1){
            option10.series[params.componentIndex].symbolSize=10;
            option10.series[params.componentIndex].itemStyle.color='gray';
            option10.series[params.componentIndex].itemStyle.opacity=0.2;
            fangda2[params.componentIndex]=-1
        }
        else {
            option10.series[params.componentIndex].symbolSize=5;
            fangda2[params.componentIndex]=0;
            option10.series[params.componentIndex].itemStyle.color='#0780cf';
            option10.series[params.componentIndex].itemStyle.opacity=1;
        }
        myChart10.setOption(option10)
        console.log(listt2)
        var shuju=[];
        for (var i = 0;i < 22;i++){
            if (i==params.componentIndex){
                shuju.push(
                    {
                        value: xgx[25+params.componentIndex][25+i],
                        itemStyle: {
                            color: '#a90000'
                        }
                    }
                )
            }
            else{
                shuju.push(xgx[25+params.componentIndex][25+i])
            }
        }
        console.log(shuju)
        option8.series[0].data=shuju;
        myChart8.setOption(option8);
    });

    // 处理数据 生成小圆点
    function serrr(data){
        var parallel = [];
        // console.log(column.length)
        // console.log(data[0])
        for (var i = 0; i < data.length; i++) {
            parallel.push({singleAxisIndex: 0,coordinateSystem: 'singleAxis',symbolSize: 5,data:[data[i]],type: 'scatter',itemStyle:{opacity:1,color:'#0780cf'},emphasis:{scale:true,itemStyle:{color: 'red',borderWidth:100}}
                    // color:'gray',opacity:1},
            });
        }
        return parallel;
    };


    // 生成对应功率图例的series(color)
    function serr2(data){
        var parallel = [];

        for(var i=0; i < data.length; i++){
            var color1 = color_tu(parseInt(data[i].substring(0,4)))
            console.log("color1",color1)
            parallel.push(
                {
                    name: data[i],
                    type: 'line',
                    data: [""],
                    itemStyle:{
                        // color : color1
                        color : peise[i]
                    }
                }
            )
        }
        return parallel
    }




</script>

</body>

</html>
